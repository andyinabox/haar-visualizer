(function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var l=typeof require=="function"&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var h=r[a]={exports:{}};t[a][0].call(h.exports,function(e){var r=t[a][1][e];return i(r?r:e)},h,h.exports,e,t,r,n)}return r[a].exports}var o=typeof require=="function"&&require;for(var a=0;a<n.length;a++)i(n[a]);return i})({1:[function(e,t,r){var n=e("p5"),i=e("exdat"),o=e("./parseHaarCascade.js");var a={"Average Female":"data/female-averaged-cropped.jpg","Average Male":"data/male-averaged-cropped.jpg"};var s={showImage:true,showGrid:true,haarOverlay:true,haarOpacity:.5,currentStage:0,currentTree:0,currentImage:a["Average Female"]};var l;var u;var h;var f;var c=function(e){e.preload=function(){u=e.loadImage(s.currentImage)};e.setup=function(){l=e.createCanvas(600,600);e.loadXML("data/haarcascade_frontalface_default.xml",n);h=new i.GUI;h.add(s,"currentImage",a).onChange(function(t){u=e.loadImage(t)});h.add(s,"showImage");h.add(s,"showGrid");h.add(s,"haarOverlay");h.add(s,"haarOpacity",0,1)};e.draw=function(){e.background(200);if(s.showImage){e.image(u,0,0,e.width,e.height)}if(f){if(s.showGrid){c(f.sampleSize[0],f.sampleSize[1])}if(s.haarOverlay){for(var r=0;r<=s.currentStage;r++){t(f.stages[r],0,s.currentTree)}}else{t(f.stages[s.currentStage],s.currentTree-1,s.currentTree)}}e.keyTyped=function(){}};function t(e,t,n){e.forEach(function(e,i){if(i>=t&&i<n){r(e)}})}function r(e){e.forEach(function(e,t){p(e)})}function n(e){f=o(e);var t=h.add(s,"currentStage",0,f.stages.length-1);var r=h.add(s,"currentTree",0,f.stages[s.currentStage].length-1);t.step(1).listen();r.step(1).listen();t.onChange(function(e){s.currentTree=0;r.max(f.stages[e].length-1)});console.log("xmlLoaded",f)}function c(t,r,n){var i,o;var a=e.floor(e.width/t);var s=e.floor(e.height/r);var l=n||e.color(100);e.push();e.stroke(l);for(i=1;i<t;i++){e.line(i*a,0,i*a,e.height)}for(o=1;o<r;o++){e.line(0,o*s,e.width,o*s)}e.pop()}function p(t,r){r=r||f.sampleSize;e.noStroke();t.rects.forEach(function(t){var n=t[4];var i=Math.floor(s.haarOpacity*255);var o=e.color(255,255,255,i);if(n<0){o=e.color(0,0,0,i)}var a=e.map(t[0],0,r[0],0,e.width);var l=e.map(t[1],0,r[1],0,e.height);var u=e.map(t[2],0,r[0],0,e.width);var h=e.map(t[3],0,r[1],0,e.height);e.fill(o);e.rect(a,l,u,h)})}};function p(){throw new Error("Error!",arguments)}new n(c)},{"./parseHaarCascade.js":25,exdat:23,p5:24}],2:[function(e,t,r){var n=e("../utils/common.js");var i=e("./toString.js");var o=e("./math.js");var a=e("./interpret.js");t.exports=s;function s(){this.__state=a.apply(this,arguments);if(this.__state===false){throw"Failed to interpret color arguments"}this.__state.a=this.__state.a||1}s.COMPONENTS=["r","g","b","h","s","v","hex","a"];n.extend(s.prototype,{toString:function(){return i(this)},toOriginal:function(){return this.__state.conversion.write(this)}});l(s.prototype,"r",2);l(s.prototype,"g",1);l(s.prototype,"b",0);u(s.prototype,"h");u(s.prototype,"s");u(s.prototype,"v");Object.defineProperty(s.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}});Object.defineProperty(s.prototype,"hex",{get:function(){if(!this.__state.space!=="HEX"){this.__state.hex=o.rgb_to_hex(this.r,this.g,this.b)}return this.__state.hex},set:function(e){this.__state.space="HEX";this.__state.hex=e}});function l(e,t,r){Object.defineProperty(e,t,{get:function(){if(this.__state.space==="RGB"){return this.__state[t]}h(this,t,r);return this.__state[t]},set:function(e){if(this.__state.space!=="RGB"){h(this,t,r);this.__state.space="RGB"}this.__state[t]=e}})}function u(e,t){Object.defineProperty(e,t,{get:function(){if(this.__state.space==="HSV")return this.__state[t];f(this);return this.__state[t]},set:function(e){if(this.__state.space!=="HSV"){f(this);this.__state.space="HSV"}this.__state[t]=e}})}function h(e,t,r){if(e.__state.space==="HEX"){e.__state[t]=o.component_from_hex(e.__state.hex,r)}else if(e.__state.space==="HSV"){n.extend(e.__state,o.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}else{throw"Corrupted color state"}}function f(e){var t=o.rgb_to_hsv(e.r,e.g,e.b);n.extend(e.__state,{s:t.s,v:t.v});if(!n.isNaN(t.h)){e.__state.h=t.h}else if(n.isUndefined(e.__state.h)){e.__state.h=0}}},{"../utils/common.js":19,"./interpret.js":3,"./math.js":4,"./toString.js":5}],3:[function(e,t,r){t.exports=n();function n(){var t=e("../utils/common.js");var r=e("./toString.js");var n,i;var o=function(){i=false;var e=arguments.length>1?t.toArray(arguments):arguments[0];t.each(a,function(r){if(r.litmus(e)){t.each(r.conversions,function(r,o){n=r.read(e);if(i===false&&n!==false){i=n;n.conversionName=o;n.conversion=r;return t.BREAK}});return t.BREAK}});return i};var a=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);if(t===null)return false;return{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString())}},write:r},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);if(t===null)return false;return{space:"HEX",hex:parseInt("0x"+t[1].toString())}},write:r},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);if(t===null)return false;return{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:r},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);if(t===null)return false;return{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:r}}},{litmus:t.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(e){if(e.length!=3)return false;return{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){if(e.length!=4)return false;return{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(e){if(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)&&t.isNumber(e.a)){return{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}}return false},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){if(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)){return{space:"RGB",r:e.r,g:e.g,b:e.b}}return false},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){if(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)&&t.isNumber(e.a)){return{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}}return false},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){if(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)){return{space:"HSV",h:e.h,s:e.s,v:e.v}}return false},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}];return o}},{"../utils/common.js":19,"./toString.js":5}],4:[function(e,t,r){t.exports=n();function n(){var e;return{hsv_to_rgb:function(e,t,r){var n=Math.floor(e/60)%6;var i=e/60-Math.floor(e/60);var o=r*(1-t);var a=r*(1-i*t);var s=r*(1-(1-i)*t);var l=[[r,s,o],[a,r,o],[o,r,s],[o,a,r],[s,o,r],[r,o,a]][n];return{r:l[0]*255,g:l[1]*255,b:l[2]*255}},rgb_to_hsv:function(e,t,r){var n=Math.min(e,t,r),i=Math.max(e,t,r),o=i-n,a,s;if(i!=0){s=o/i}else{return{h:NaN,s:0,v:0}}if(e==i){a=(t-r)/o}else if(t==i){a=2+(r-e)/o}else{a=4+(e-t)/o}a/=6;if(a<0){a+=1}return{h:a*360,s:s,v:i/255}},rgb_to_hex:function(e,t,r){var n=this.hex_with_component(0,2,e);n=this.hex_with_component(n,1,t);n=this.hex_with_component(n,0,r);return n},component_from_hex:function(e,t){return e>>t*8&255},hex_with_component:function(t,r,n){return n<<(e=r*8)|t&~(255<<e)}}}},{}],5:[function(e,t,r){var n=e("../utils/common.js");t.exports=i;function i(e){if(e.a==1||n.isUndefined(e.a)){var t=e.hex.toString(16);while(t.length<6){t="0"+t}return"#"+t}else{return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}}},{"../utils/common.js":19}],6:[function(e,t,r){var n=e("./Controller.js");var i=e("../utils/common.js");var o=e("../dom/dom.js");t.exports=a;function a(e,t){a.superclass.call(this,e,t);var r=this;this.__prev=this.getValue();this.__checkbox=document.createElement("input");this.__checkbox.setAttribute("type","checkbox");o.bind(this.__checkbox,"change",n,false);this.domElement.appendChild(this.__checkbox);this.updateDisplay();function n(){r.setValue(!r.__prev)}}a.superclass=n;i.extend(a.prototype,n.prototype,{setValue:function(e){var t=a.superclass.prototype.setValue.call(this,e);if(this.__onFinishChange){this.__onFinishChange.call(this,this.getValue())}this.__prev=this.getValue();return t},updateDisplay:function(){if(this.getValue()===true){this.__checkbox.setAttribute("checked","checked");this.__checkbox.checked=true}else{this.__checkbox.checked=false}return a.superclass.prototype.updateDisplay.call(this)}})},{"../dom/dom.js":17,"../utils/common.js":19,"./Controller.js":8}],7:[function(e,t,r){var n=e("./Controller.js");var i=e("../utils/common.js");var o=e("../dom/dom.js");var a=e("../color/Color.js");var s=e("../color/interpret.js");t.exports=l;function l(e,t){l.superclass.call(this,e,t);this.__color=new a(this.getValue());this.__temp=new a(0);var r=this;this.domElement=document.createElement("div");o.makeSelectable(this.domElement,false);this.__selector=document.createElement("div");this.__selector.className="selector";this.__saturation_field=document.createElement("div");this.__saturation_field.className="saturation-field";this.__field_knob=document.createElement("div");this.__field_knob.className="field-knob";this.__field_knob_border="2px solid ";this.__hue_knob=document.createElement("div");this.__hue_knob.className="hue-knob";this.__hue_field=document.createElement("div");this.__hue_field.className="hue-field";this.__input=document.createElement("input");this.__input.type="text";this.__input_textShadow="0 1px 1px ";o.bind(this.__input,"keydown",function(e){if(e.keyCode===13){p.call(this)}});o.bind(this.__input,"blur",p);o.bind(this.__selector,"mousedown",function(e){o.addClass(this,"drag").bind(window,"mouseup",function(e){o.removeClass(r.__selector,"drag")})});var n=document.createElement("div");i.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"});i.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1});i.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1});i.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"});i.extend(n.style,{width:"100%",height:"100%",background:"none"});h(n,"top","rgba(0,0,0,0)","#000");i.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"});f(this.__hue_field);i.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"});o.bind(this.__saturation_field,"mousedown",u);o.bind(this.__field_knob,"mousedown",u);o.bind(this.__hue_field,"mousedown",function(e){g(e);o.bind(window,"mousemove",g);o.bind(window,"mouseup",d)});function u(e){m(e);o.bind(window,"mousemove",m);o.bind(window,"mouseup",c)}function c(){o.unbind(window,"mousemove",m);o.unbind(window,"mouseup",c)}function p(){var e=s(this.value);if(e!==false){r.__color.__state=e;r.setValue(r.__color.toOriginal())}else{this.value=r.__color.toString()}}function d(){o.unbind(window,"mousemove",g);o.unbind(window,"mouseup",d)}this.__saturation_field.appendChild(n);this.__selector.appendChild(this.__field_knob);this.__selector.appendChild(this.__saturation_field);this.__selector.appendChild(this.__hue_field);this.__hue_field.appendChild(this.__hue_knob);this.domElement.appendChild(this.__input);this.domElement.appendChild(this.__selector);this.updateDisplay();function m(e){e.preventDefault();var t=o.getWidth(r.__saturation_field);var n=o.getOffset(r.__saturation_field);var i=(e.clientX-n.left+document.body.scrollLeft)/t;var a=1-(e.clientY-n.top+document.body.scrollTop)/t;if(a>1)a=1;else if(a<0)a=0;if(i>1)i=1;else if(i<0)i=0;r.__color.v=a;r.__color.s=i;r.setValue(r.__color.toOriginal());return false}function g(e){e.preventDefault();var t=o.getHeight(r.__hue_field);var n=o.getOffset(r.__hue_field);var i=1-(e.clientY-n.top+document.body.scrollTop)/t;if(i>1)i=1;else if(i<0)i=0;r.__color.h=i*360;r.setValue(r.__color.toOriginal());return false}}l.superclass=n;i.extend(l.prototype,n.prototype,{updateDisplay:function(){var e=s(this.getValue());if(e!==false){var t=false;i.each(a.COMPONENTS,function(r){if(!i.isUndefined(e[r])&&!i.isUndefined(this.__color.__state[r])&&e[r]!==this.__color.__state[r]){t=true;return{}}},this);if(t){i.extend(this.__color.__state,e)}}i.extend(this.__temp.__state,this.__color.__state);this.__temp.a=1;var r=this.__color.v<.5||this.__color.s>.5?255:0;var n=255-r;i.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+r+","+r+","+r+")"});this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px";this.__temp.s=1;this.__temp.v=1;h(this.__saturation_field,"left","#fff",this.__temp.toString());i.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+r+","+r+","+r+")",textShadow:this.__input_textShadow+"rgba("+n+","+n+","+n+",.7)"})}});var u=["-moz-","-o-","-webkit-","-ms-",""];function h(e,t,r,n){e.style.background="";i.each(u,function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+r+" 0%, "+n+" 100%); "})}function f(e){e.style.background="";e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);";e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}},{"../color/Color.js":2,"../color/interpret.js":3,"../dom/dom.js":17,"../utils/common.js":19,"./Controller.js":8}],8:[function(e,t,r){var n=e("../utils/common.js");var i=e("../utils/escapeHtml.js");t.exports=o;function o(e,t){this.initialValue=e[t];this.domElement=document.createElement("div");this.object=e;this.property=t;this.__onChange=undefined;this.__onFinishChange=undefined}n.extend(o.prototype,{onChange:function(e){this.__onChange=e;return this},onFinishChange:function(e){this.__onFinishChange=e;return this},setValue:function(e){this.object[this.property]=e;if(this.__onChange){this.__onChange.call(this,e)}this.updateDisplay();return this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}})},{"../utils/common.js":19,"../utils/escapeHtml.js":21}],9:[function(e,t,r){var n=e("./Controller.js");var i=e("../utils/common.js");var o=e("../dom/dom.js");t.exports=a;function a(e,t,r){a.superclass.call(this,e,t);var n=this;this.__button=document.createElement("div");this.__button.innerHTML=r===undefined?"Fire":r;o.bind(this.__button,"click",function(e){e.preventDefault();n.fire();return false});o.addClass(this.__button,"button");this.domElement.appendChild(this.__button)}a.superclass=n;i.extend(a.prototype,n.prototype,{fire:function(){if(this.__onChange){this.__onChange.call(this)}this.getValue().call(this.object);if(this.__onFinishChange){this.__onFinishChange.call(this,this.getValue())}}})},{"../dom/dom.js":17,"../utils/common.js":19,"./Controller.js":8}],10:[function(e,t,r){var n=e("./Controller.js");var i=e("../utils/common.js");t.exports=o;function o(e,t,r){o.superclass.call(this,e,t);r=r||{};this.__min=r.min;this.__max=r.max;this.__step=r.step;if(i.isUndefined(this.__step)){if(this.initialValue==0){this.__impliedStep=1}else{this.__impliedStep=Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10}}else{this.__impliedStep=this.__step}this.__precision=a(this.__impliedStep)}o.superclass=n;i.extend(o.prototype,n.prototype,{setValue:function(e){if(this.__min!==undefined&&e<this.__min){e=this.__min}else if(this.__max!==undefined&&e>this.__max){e=this.__max}if(this.__step!==undefined&&e%this.__step!=0){e=Math.round(e/this.__step)*this.__step}return o.superclass.prototype.setValue.call(this,e)},min:function(e){this.__min=e;return this},max:function(e){this.__max=e;return this},step:function(e){this.__step=e;this.__impliedStep=e;this.__precision=a(e);return this}});function a(e){e=e.toString();if(e.indexOf(".")>-1){return e.length-e.indexOf(".")-1}else{return 0}}},{"../utils/common.js":19,"./Controller.js":8}],11:[function(e,t,r){var n=e("./NumberController.js");var i=e("../utils/common.js");var o=e("../dom/dom.js");t.exports=a;function a(e,t,r){this.__truncationSuspended=false;a.superclass.call(this,e,t,r);var n=this;var s;this.__input=document.createElement("input");this.__input.setAttribute("type","text");o.bind(this.__input,"change",l);o.bind(this.__input,"blur",u);o.bind(this.__input,"mousedown",h);o.bind(this.__input,"keydown",function(e){if(e.keyCode===13){n.__truncationSuspended=true;this.blur();n.__truncationSuspended=false}});function l(){var e=parseFloat(n.__input.value);if(!i.isNaN(e))n.setValue(e)}function u(){l();if(n.__onFinishChange){n.__onFinishChange.call(n,n.getValue())}}function h(e){o.bind(window,"mousemove",f);o.bind(window,"mouseup",c);s=e.clientY}function f(e){var t=s-e.clientY;n.setValue(n.getValue()+t*n.__impliedStep);s=e.clientY}function c(){o.unbind(window,"mousemove",f);o.unbind(window,"mouseup",c)}this.updateDisplay();this.domElement.appendChild(this.__input)}a.superclass=n;i.extend(a.prototype,n.prototype,{updateDisplay:function(){this.__input.value=this.__truncationSuspended?this.getValue():s(this.getValue(),this.__precision);return a.superclass.prototype.updateDisplay.call(this)}});function s(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r}},{"../dom/dom.js":17,"../utils/common.js":19,"./NumberController.js":10}],12:[function(e,t,r){var n=e("./NumberController.js");var i=e("../utils/common.js");var o=e("../dom/dom.js");var a=e("../utils/css.js");var s="/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n.slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}";t.exports=l;function l(e,t,r,n,i){l.superclass.call(this,e,t,{min:r,max:n,step:i});var a=this;this.__background=document.createElement("div");this.__foreground=document.createElement("div");o.bind(this.__background,"mousedown",s);o.addClass(this.__background,"slider");o.addClass(this.__foreground,"slider-fg");function s(e){o.bind(window,"mousemove",h);o.bind(window,"mouseup",f);h(e)}function h(e){e.preventDefault();var t=o.getOffset(a.__background);var r=o.getWidth(a.__background);a.setValue(u(e.clientX,t.left,t.left+r,a.__min,a.__max));return false}function f(){o.unbind(window,"mousemove",h);o.unbind(window,"mouseup",f);if(a.__onFinishChange){a.__onFinishChange.call(a,a.getValue())}}this.updateDisplay();this.__background.appendChild(this.__foreground);this.domElement.appendChild(this.__background)}l.superclass=n;l.useDefaultStyles=function(){a.inject(s)};i.extend(l.prototype,n.prototype,{updateDisplay:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);this.__foreground.style.width=e*100+"%";return l.superclass.prototype.updateDisplay.call(this)}});function u(e,t,r,n,i){return n+(i-n)*((e-t)/(r-t))}},{"../dom/dom.js":17,"../utils/common.js":19,"../utils/css.js":20,"./NumberController.js":10}],13:[function(e,t,r){var n=e("./Controller.js");var i=e("../dom/dom.js");var o=e("../utils/common.js");t.exports=a;function a(e,t,r){a.superclass.call(this,e,t);var n=this;this.__select=document.createElement("select");if(o.isArray(r)){var s={};o.each(r,function(e){s[e]=e});r=s}o.each(r,function(e,t){var r=document.createElement("option");r.innerHTML=t;r.setAttribute("value",e);n.__select.appendChild(r)});this.updateDisplay();i.bind(this.__select,"change",function(){var e=this.options[this.selectedIndex].value;n.setValue(e)});this.domElement.appendChild(this.__select)}a.superclass=n;o.extend(a.prototype,n.prototype,{setValue:function(e){var t=a.superclass.prototype.setValue.call(this,e);if(this.__onFinishChange){this.__onFinishChange.call(this,this.getValue())}return t},updateDisplay:function(){this.__select.value=this.getValue();return a.superclass.prototype.updateDisplay.call(this)}})},{"../dom/dom.js":17,"../utils/common.js":19,"./Controller.js":8}],14:[function(e,t,r){var n=e("./Controller.js");var i=e("../dom/dom.js");var o=e("../utils/common.js");t.exports=a;function a(e,t){a.superclass.call(this,e,t);var r=this;this.__input=document.createElement("input");this.__input.setAttribute("type","text");i.bind(this.__input,"keyup",n);i.bind(this.__input,"change",n);i.bind(this.__input,"blur",o);i.bind(this.__input,"keydown",function(e){if(e.keyCode===13){this.blur()}});function n(){r.setValue(r.__input.value)}function o(){if(r.__onFinishChange){r.__onFinishChange.call(r,r.getValue())}}this.updateDisplay();this.domElement.appendChild(this.__input)}a.superclass=n;o.extend(a.prototype,n.prototype,{updateDisplay:function(){if(!i.isActive(this.__input)){this.__input.value=this.getValue()}return a.superclass.prototype.updateDisplay.call(this)}})},{"../dom/dom.js":17,"../utils/common.js":19,"./Controller.js":8}],15:[function(e,t,r){var n=e("./OptionController.js");var i=e("./NumberControllerBox.js");var o=e("./NumberControllerSlider.js");var a=e("./StringController.js");var s=e("./FunctionController.js");var l=e("./BooleanController.js");var u=e("../utils/common.js");t.exports=h;function h(e,t){var r=e[t];if(u.isArray(arguments[2])||u.isObject(arguments[2])){return new n(e,t,arguments[2])}if(u.isNumber(r)){if(u.isNumber(arguments[2])&&u.isNumber(arguments[3])){return new o(e,t,arguments[2],arguments[3])}else{return new i(e,t,{min:arguments[2],max:arguments[3]})}}if(u.isString(r)){return new a(e,t)}if(u.isFunction(r)){return new s(e,t,"")}if(u.isBoolean(r)){return new l(e,t)}}},{"../utils/common.js":19,"./BooleanController.js":6,"./FunctionController.js":9,"./NumberControllerBox.js":11,"./NumberControllerSlider.js":12,"./OptionController.js":13,"./StringController.js":14}],16:[function(e,t,r){var n=e("../utils/common.js");var i=e("./dom.js");t.exports=o;function o(){this.backgroundElement=document.createElement("div");n.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"});i.makeFullscreen(this.backgroundElement);this.backgroundElement.style.position="fixed";this.domElement=document.createElement("div");n.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"});document.body.appendChild(this.backgroundElement);document.body.appendChild(this.domElement);var e=this;i.bind(this.backgroundElement,"click",function(){e.hide()})}o.prototype.show=function(){var e=this;this.backgroundElement.style.display="block";this.domElement.style.display="block";this.domElement.style.opacity=0;this.domElement.style.webkitTransform="scale(1.1)";this.layout();n.defer(function(){e.backgroundElement.style.opacity=1;e.domElement.style.opacity=1;e.domElement.style.webkitTransform="scale(1)"})};o.prototype.hide=function(){var e=this;var t=function(){e.domElement.style.display="none";e.backgroundElement.style.display="none";i.unbind(e.domElement,"webkitTransitionEnd",t);i.unbind(e.domElement,"transitionend",t);i.unbind(e.domElement,"oTransitionEnd",t)};i.bind(this.domElement,"webkitTransitionEnd",t);i.bind(this.domElement,"transitionend",t);i.bind(this.domElement,"oTransitionEnd",t);this.backgroundElement.style.opacity=0;this.domElement.style.opacity=0;this.domElement.style.webkitTransform="scale(1.1)"};o.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-i.getWidth(this.domElement)/2+"px";this.domElement.style.top=window.innerHeight/2-i.getHeight(this.domElement)/2+"px"};function a(e){console.log(e)}},{"../utils/common.js":19,"./dom.js":17}],17:[function(e,t,r){var n=e("../utils/common.js");var i={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]};var o={};n.each(i,function(e,t){n.each(e,function(e){o[e]=t})});var a=/(\d+(\.\d+)?)px/;function s(e){if(e==="0"||n.isUndefined(e))return 0;var t=e.match(a);if(!n.isNull(t)){return parseFloat(t[1])}return 0}var l={makeSelectable:function(e,t){if(e===undefined||e.style===undefined)return;e.onselectstart=t?function(){return false}:function(){};e.style.MozUserSelect=t?"auto":"none";e.style.KhtmlUserSelect=t?"auto":"none";e.unselectable=t?"on":"off"},makeFullscreen:function(e,t,r){if(n.isUndefined(t))t=true;if(n.isUndefined(r))r=true;e.style.position="absolute";if(t){e.style.left=0;e.style.right=0}if(r){e.style.top=0;e.style.bottom=0}},fakeEvent:function(e,t,r,i){r=r||{};var a=o[t];if(!a){throw new Error("Event type "+t+" not supported.")}var s=document.createEvent(a);switch(a){case"MouseEvents":var l=r.x||r.clientX||0;var u=r.y||r.clientY||0;s.initMouseEvent(t,r.bubbles||false,r.cancelable||true,window,r.clickCount||1,0,0,l,u,false,false,false,false,0,null);break;case"KeyboardEvents":var h=s.initKeyboardEvent||s.initKeyEvent;n.defaults(r,{cancelable:true,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,keyCode:undefined,charCode:undefined});h(t,r.bubbles||false,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:s.initEvent(t,r.bubbles||false,r.cancelable||true);break}n.defaults(s,i);e.dispatchEvent(s)},bind:function(e,t,r,n){n=n||false;if(e.addEventListener)e.addEventListener(t,r,n);else if(e.attachEvent)e.attachEvent("on"+t,r);return l},unbind:function(e,t,r,n){n=n||false;if(e.removeEventListener)e.removeEventListener(t,r,n);else if(e.detachEvent)e.detachEvent("on"+t,r);return l},addClass:function(e,t){if(e.className===undefined){e.className=t}else if(e.className!==t){var r=e.className.split(/ +/);if(r.indexOf(t)==-1){r.push(t);e.className=r.join(" ").replace(/^\s+/,"").replace(/\s+$/,"")}}return l},removeClass:function(e,t){if(t){if(e.className===undefined){}else if(e.className===t){e.removeAttribute("class")}else{var r=e.className.split(/ +/);var n=r.indexOf(t);if(n!=-1){r.splice(n,1);e.className=r.join(" ")}}}else{e.className=undefined}return l},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||false},getWidth:function(e){var t=getComputedStyle(e);return s(t["border-left-width"])+s(t["border-right-width"])+s(t["padding-left"])+s(t["padding-right"])+s(t["width"])},getHeight:function(e){var t=getComputedStyle(e);return s(t["border-top-width"])+s(t["border-bottom-width"])+s(t["padding-top"])+s(t["padding-bottom"])+s(t["height"])},getOffset:function(e){var t={left:0,top:0};if(e.offsetParent){do{t.left+=e.offsetLeft;t.top+=e.offsetTop}while(e=e.offsetParent)}return t},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}};t.exports=l},{"../utils/common.js":19}],18:[function(e,t,r){var n=e("../utils/css.js");var i='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>';var o=".dg {\n  /** Clear list styles */\n  /* Auto-place container */\n  /* Auto-placed GUI's */\n  /* Line items that don't contain folders. */\n  /** Folder names */\n  /** Hides closed items */\n  /** Controller row */\n  /** Name-half (left) */\n  /** Controller-half (right) */\n  /** Controller placement */\n  /** Shorter number boxes when slider is present. */\n  /** Ensure the entire boolean and function row shows a hand */ }\n  .dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both; }\n  .dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 0; }\n  .dg:not(.ac) .main {\n    /** Exclude mains in ac so that we don't hide close button */\n    overflow: hidden; }\n  .dg.main {\n    -webkit-transition: opacity 0.1s linear;\n    -o-transition: opacity 0.1s linear;\n    -moz-transition: opacity 0.1s linear;\n    transition: opacity 0.1s linear; }\n    .dg.main.taller-than-window {\n      overflow-y: auto; }\n      .dg.main.taller-than-window .close-button {\n        opacity: 1;\n        /* TODO, these are style notes */\n        margin-top: -1px;\n        border-top: 1px solid #2c2c2c; }\n    .dg.main ul.closed .close-button {\n      opacity: 1 !important; }\n    .dg.main:hover .close-button,\n    .dg.main .close-button.drag {\n      opacity: 1; }\n    .dg.main .close-button {\n      /*opacity: 0;*/\n      -webkit-transition: opacity 0.1s linear;\n      -o-transition: opacity 0.1s linear;\n      -moz-transition: opacity 0.1s linear;\n      transition: opacity 0.1s linear;\n      border: 0;\n      position: absolute;\n      line-height: 19px;\n      height: 20px;\n      /* TODO, these are style notes */\n      cursor: pointer;\n      text-align: center;\n      background-color: #000; }\n      .dg.main .close-button:hover {\n        background-color: #111; }\n  .dg.a {\n    float: right;\n    margin-right: 15px;\n    overflow-x: hidden; }\n    .dg.a.has-save > ul {\n      margin-top: 27px; }\n      .dg.a.has-save > ul.closed {\n        margin-top: 0; }\n    .dg.a .save-row {\n      position: fixed;\n      top: 0;\n      z-index: 1002; }\n  .dg li {\n    -webkit-transition: height 0.1s ease-out;\n    -o-transition: height 0.1s ease-out;\n    -moz-transition: height 0.1s ease-out;\n    transition: height 0.1s ease-out; }\n  .dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    overflow: hidden;\n    padding: 0 4px 0 5px; }\n  .dg li.folder {\n    padding: 0;\n    border-left: 4px solid rgba(0, 0, 0, 0); }\n  .dg li.title {\n    cursor: pointer;\n    margin-left: -4px; }\n  .dg .closed li:not(.title),\n  .dg .closed ul li,\n  .dg .closed ul li > * {\n    height: 0;\n    overflow: hidden;\n    border: 0; }\n  .dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px; }\n  .dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .dg .c {\n    float: left;\n    width: 60%; }\n  .dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right; }\n  .dg .has-slider input[type=text] {\n    width: 30%;\n    /*display: none;*/\n    margin-left: 0; }\n  .dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px; }\n  .dg .slider-fg {\n    height: 100%; }\n  .dg .c input[type=checkbox] {\n    margin-top: 9px; }\n  .dg .c select {\n    margin-top: 5px; }\n  .dg .cr.function,\n  .dg .cr.function .property-name,\n  .dg .cr.function *,\n  .dg .cr.boolean,\n  .dg .cr.boolean * {\n    cursor: pointer; }\n  .dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10; }\n  .dg .c:hover .selector,\n  .dg .selector.drag {\n    display: block; }\n  .dg li.save-row {\n    padding: 0; }\n    .dg li.save-row .button {\n      display: inline-block;\n      padding: 0px 6px; }\n  .dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px; }\n\n/* TODO Separate style and structure */\n#dg-new-constructor {\n  padding: 10px;\n  color: #222;\n  font-family: Monaco, monospace;\n  font-size: 10px;\n  border: 0;\n  resize: none;\n  box-shadow: inset 1px 1px 1px #888;\n  word-wrap: break-word;\n  margin: 12px 0;\n  display: block;\n  width: 440px;\n  overflow-y: scroll;\n  height: 100px;\n  position: relative; }\n\n#dg-local-explain {\n  display: none;\n  font-size: 11px;\n  line-height: 17px;\n  border-radius: 3px;\n  background-color: #333;\n  padding: 8px;\n  margin-top: 10px; }\n  #dg-local-explain code {\n    font-size: 10px; }\n\n#dat-gui-save-locally {\n  display: none; }\n\n/** Main type */\n.dg {\n  color: #eee;\n  font: 11px 'Lucida Grande', sans-serif;\n  text-shadow: 0 -1px 0 #111;\n  /** Auto place */\n  /* Controller row, <li> */\n  /** Controllers */ }\n  .dg.main {\n    /** Scrollbar */ }\n    .dg.main::-webkit-scrollbar {\n      width: 5px;\n      background: #1a1a1a; }\n    .dg.main::-webkit-scrollbar-corner {\n      height: 0;\n      display: none; }\n    .dg.main::-webkit-scrollbar-thumb {\n      border-radius: 5px;\n      background: #676767; }\n  .dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c; }\n  .dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0; }\n    .dg li.save-row select {\n      margin-left: 5px;\n      width: 108px; }\n    .dg li.save-row .button {\n      margin-left: 5px;\n      margin-top: 1px;\n      border-radius: 2px;\n      font-size: 9px;\n      line-height: 7px;\n      padding: 4px 4px 5px 4px;\n      background: #c5bdad;\n      color: #fff;\n      text-shadow: 0 1px 0 #b0a58f;\n      box-shadow: 0 -1px 0 #b0a58f;\n      cursor: pointer; }\n      .dg li.save-row .button.gears {\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n        height: 7px;\n        width: 8px; }\n      .dg li.save-row .button:hover {\n        background-color: #bab19e;\n        box-shadow: 0 -1px 0 #b0a58f; }\n  .dg li.folder {\n    border-bottom: 0; }\n  .dg li.title {\n    padding-left: 16px;\n    background: black url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n  .dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\n  .dg .cr.boolean {\n    border-left: 3px solid #806787; }\n  .dg .cr.function {\n    border-left: 3px solid #e61d5f; }\n  .dg .cr.number {\n    border-left: 3px solid #2fa1d6; }\n    .dg .cr.number input[type=text] {\n      color: #2fa1d6; }\n  .dg .cr.string {\n    border-left: 3px solid #1ed36f; }\n    .dg .cr.string input[type=text] {\n      color: #1ed36f; }\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\n    background: #111; }\n  .dg .c input[type=text] {\n    background: #303030;\n    outline: none; }\n    .dg .c input[type=text]:hover {\n      background: #3c3c3c; }\n    .dg .c input[type=text]:focus {\n      background: #494949;\n      color: #fff; }\n  .dg .c .slider {\n    background: #303030;\n    cursor: ew-resize; }\n  .dg .c .slider-fg {\n    background: #2fa1d6; }\n  .dg .c .slider:hover {\n    background: #3c3c3c; }\n    .dg .c .slider:hover .slider-fg {\n      background: #44abda; }\n";

var a=e("../controllers/factory.js");var s=e("../controllers/Controller.js");var l=e("../controllers/BooleanController.js");var u=e("../controllers/FunctionController.js");var h=e("../controllers/NumberControllerBox.js");var f=e("../controllers/NumberControllerSlider.js");var c=e("../controllers/ColorController.js");var p=e("../utils/requestAnimationFrame.js");var d=e("../dom/CenteredDiv.js");var m=e("../dom/dom.js");var g=e("../utils/common.js");t.exports=v();function v(){n.inject(o);var e="dg";var t=72;var r=20;var v="Default";var y=function(){try{return"localStorage"in window&&window["localStorage"]!==null}catch(e){return false}}();var _;var b=true;var x;var w=false;var S=[];var C=function(t){var r=this;this.domElement=document.createElement("div");this.__ul=document.createElement("ul");this.domElement.appendChild(this.__ul);m.addClass(this.domElement,e);this.__folders={};this.__controllers=[];this.__rememberedObjects=[];this.__rememberedObjectIndecesToControllers=[];this.__listening=[];t=t||{};t=g.defaults(t,{autoPlace:true,width:C.DEFAULT_WIDTH});t=g.defaults(t,{resizable:t.autoPlace,hideable:t.autoPlace});if(!g.isUndefined(t.load)){if(t.preset)t.load.preset=t.preset}else{t.load={preset:v}}if(g.isUndefined(t.parent)&&t.hideable){S.push(this)}t.resizable=g.isUndefined(t.parent)&&t.resizable;if(t.autoPlace&&g.isUndefined(t.scrollable)){t.scrollable=true}var n=y&&localStorage.getItem(M(this,"isLocal"))==="true";var i;Object.defineProperties(this,{parent:{get:function(){return t.parent}},scrollable:{get:function(){return t.scrollable}},autoPlace:{get:function(){return t.autoPlace}},preset:{get:function(){if(r.parent){return r.getRoot().preset}else{return t.load.preset}},set:function(e){if(r.parent){r.getRoot().preset=e}else{t.load.preset=e}O(this);r.revert()}},width:{get:function(){return t.width},set:function(e){t.width=e;k(r,e)}},name:{get:function(){return t.name},set:function(e){t.name=e;if(a){a.innerHTML=t.name}}},closed:{get:function(){return t.closed},set:function(e){t.closed=e;if(t.closed){m.addClass(r.__ul,C.CLASS_CLOSED)}else{m.removeClass(r.__ul,C.CLASS_CLOSED)}this.onResize();if(r.__closeButton){r.__closeButton.innerHTML=e?C.TEXT_OPEN:C.TEXT_CLOSED}}},load:{get:function(){return t.load}},useLocalStorage:{get:function(){return n},set:function(e){if(y){n=e;if(e){m.bind(window,"unload",i)}else{m.unbind(window,"unload",i)}localStorage.setItem(M(r,"isLocal"),e)}}}});if(g.isUndefined(t.parent)){t.closed=false;m.addClass(this.domElement,C.CLASS_MAIN);m.makeSelectable(this.domElement,false);if(y){if(n){r.useLocalStorage=true;var o=localStorage.getItem(M(this,"gui"));if(o){t.load=JSON.parse(o)}}}this.__closeButton=document.createElement("div");this.__closeButton.innerHTML=C.TEXT_CLOSED;m.addClass(this.__closeButton,C.CLASS_CLOSE_BUTTON);this.domElement.appendChild(this.__closeButton);m.bind(this.__closeButton,"click",function(){r.closed=!r.closed})}else{if(t.closed===undefined){t.closed=true}var a=document.createTextNode(t.name);m.addClass(a,"controller-name");var s=E(r,a);var l=function(e){e.preventDefault();r.closed=!r.closed;return false};m.addClass(this.__ul,C.CLASS_CLOSED);m.addClass(s,"title");m.bind(s,"click",l);if(!t.closed){this.closed=false}}if(t.autoPlace){if(g.isUndefined(t.parent)){if(b){x=document.createElement("div");m.addClass(x,e);m.addClass(x,C.CLASS_AUTO_PLACE_CONTAINER);document.body.appendChild(x);b=false}x.appendChild(this.domElement);m.addClass(this.domElement,C.CLASS_AUTO_PLACE)}if(!this.parent)k(r,t.width)}m.bind(window,"resize",function(){r.onResize()});m.bind(this.__ul,"webkitTransitionEnd",function(){r.onResize()});m.bind(this.__ul,"transitionend",function(){r.onResize()});m.bind(this.__ul,"oTransitionEnd",function(){r.onResize()});this.onResize();if(t.resizable){D(this)}i=function(){if(y&&localStorage.getItem(M(r,"isLocal"))==="true"){localStorage.setItem(M(r,"gui"),JSON.stringify(r.getSaveObject()))}};this.saveToLocalStorageIfPossible=i;var u=r.getRoot();function h(){var e=r.getRoot();e.width+=1;g.defer(function(){e.width-=1})}if(!t.parent){h()}};C.toggleHide=function(){w=!w;g.each(S,function(e){e.domElement.style.zIndex=w?-999:999;e.domElement.style.opacity=w?0:1})};C.CLASS_AUTO_PLACE="a";C.CLASS_AUTO_PLACE_CONTAINER="ac";C.CLASS_MAIN="main";C.CLASS_CONTROLLER_ROW="cr";C.CLASS_TOO_TALL="taller-than-window";C.CLASS_CLOSED="closed";C.CLASS_CLOSE_BUTTON="close-button";C.CLASS_DRAG="drag";C.DEFAULT_WIDTH=245;C.TEXT_CLOSED="Close Controls";C.TEXT_OPEN="Open Controls";m.bind(window,"keydown",function(e){if(document.activeElement.type!=="text"&&(e.which===t||e.keyCode==t)){C.toggleHide()}},false);g.extend(C.prototype,{add:function(e,t){return T(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return T(this,e,t,{color:true})},remove:function(e){this.__ul.removeChild(e.__li);this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;g.defer(function(){t.onResize()})},destroy:function(){if(this.autoPlace){x.removeChild(this.domElement)}},addFolder:function(e){if(this.__folders[e]!==undefined){throw new Error("You already have a folder in this GUI by the"+' name "'+e+'"')}var t={name:e,parent:this};t.autoPlace=this.autoPlace;if(this.load&&this.load.folders&&this.load.folders[e]){t.closed=this.load.folders[e].closed;t.load=this.load.folders[e]}var r=new C(t);this.__folders[e]=r;var n=E(this,r.domElement);m.addClass(n,"folder");return r},removeFolder:function(e){var t=this.__folders[e];if(!t){return}delete this.__folders[e];var r=t.__controllers;for(var n=0;n<r.length;++n){r[n].remove()}var i=Object.keys(t.__folders||{});for(n=0;n<i.length;++n){var o=i[n];t.removeFolder(o)}var a=t.domElement.parentNode;a.parentNode.removeChild(a)},open:function(){this.closed=false},update:function(){F(this)},close:function(){this.closed=true},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=m.getOffset(e.__ul).top;var n=0;g.each(e.__ul.childNodes,function(t){if(!(e.autoPlace&&t===e.__save_row))n+=m.getHeight(t)});if(window.innerHeight-t-r<n){m.addClass(e.domElement,C.CLASS_TOO_TALL);e.__ul.style.height=window.innerHeight-t-r+"px"}else{m.removeClass(e.domElement,C.CLASS_TOO_TALL);e.__ul.style.height="auto"}}if(e.__resize_handle){g.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"})}if(e.__closeButton){e.__closeButton.style.width=e.width+"px"}},remember:function(){if(g.isUndefined(_)){_=new d;_.domElement.innerHTML=i}if(this.parent){throw new Error("You can only call remember on a top level GUI.")}var e=this;g.each(Array.prototype.slice.call(arguments),function(t){if(e.__rememberedObjects.length==0){N(e)}if(e.__rememberedObjects.indexOf(t)==-1){e.__rememberedObjects.push(t)}});if(this.autoPlace){k(this,this.width)}},getRoot:function(){var e=this;while(e.parent){e=e.parent}return e},getSaveObject:function(){var e=this.load;e.closed=this.closed;if(this.__rememberedObjects.length>0){e.preset=this.preset;if(!e.remembered){e.remembered={}}e.remembered[this.preset]=I(this)}e.folders={};g.each(this.__folders,function(t,r){e.folders[r]=t.getSaveObject()});return e},save:function(){if(!this.load.remembered){this.load.remembered={}}this.load.remembered[this.preset]=I(this);L(this,false);this.saveToLocalStorageIfPossible()},saveAs:function(e){if(!this.load.remembered){this.load.remembered={};this.load.remembered[v]=I(this,true)}this.load.remembered[e]=I(this);this.preset=e;P(this,e,true);this.saveToLocalStorageIfPossible()},revert:function(e){g.each(this.__controllers,function(t){if(!this.getRoot().load.remembered){t.setValue(t.initialValue)}else{A(e||this.getRoot(),t)}},this);g.each(this.__folders,function(e){e.revert(e)});if(!e){L(this.getRoot(),false)}},listen:function(e){var t=this.__listening.length==0;this.__listening.push(e);if(t)U(this.__listening)}});function T(e,t,r,n){if(t[r]===undefined){throw new Error("Object "+t+' has no property "'+r+'"')}var i;if(n.color){i=new c(t,r)}else{var o=[t,r].concat(n.factoryArgs);i=a.apply(e,o)}if(n.before instanceof s){n.before=n.before.__li}A(e,i);m.addClass(i.domElement,"c");var l=document.createElement("span");m.addClass(l,"property-name");l.innerHTML=i.property;var u=document.createElement("div");u.appendChild(l);u.appendChild(i.domElement);var h=E(e,u,n.before);m.addClass(h,C.CLASS_CONTROLLER_ROW);m.addClass(h,typeof i.getValue());R(e,h,i);e.__controllers.push(i);return i}function E(e,t,r){var n=document.createElement("li");if(t)n.appendChild(t);if(r){e.__ul.insertBefore(n,params.before)}else{e.__ul.appendChild(n)}e.onResize();return n}function R(e,t,r){r.__li=t;r.__gui=e;g.extend(r,{options:function(t){if(arguments.length>1){r.remove();return T(e,r.object,r.property,{before:r.__li.nextElementSibling,factoryArgs:[g.toArray(arguments)]})}if(g.isArray(t)||g.isObject(t)){r.remove();return T(e,r.object,r.property,{before:r.__li.nextElementSibling,factoryArgs:[t]})}},name:function(e){r.__li.firstElementChild.firstElementChild.innerHTML=e;return r},listen:function(){r.__gui.listen(r);return r},remove:function(){r.__gui.remove(r);return r}});if(r instanceof f){var n=new h(r.object,r.property,{min:r.__min,max:r.__max,step:r.__step});g.each(["updateDisplay","onChange","onFinishChange"],function(e){var t=r[e];var i=n[e];r[e]=n[e]=function(){var e=Array.prototype.slice.call(arguments);t.apply(r,e);return i.apply(n,e)}});m.addClass(t,"has-slider");r.domElement.insertBefore(n.domElement,r.domElement.firstElementChild)}else if(r instanceof h){var i=function(t){if(g.isNumber(r.__min)&&g.isNumber(r.__max)){r.remove();return T(e,r.object,r.property,{before:r.__li.nextElementSibling,factoryArgs:[r.__min,r.__max,r.__step]})}return t};r.min=g.compose(i,r.min);r.max=g.compose(i,r.max)}else if(r instanceof l){m.bind(t,"click",function(){m.fakeEvent(r.__checkbox,"click")});m.bind(r.__checkbox,"click",function(e){e.stopPropagation()})}else if(r instanceof u){m.bind(t,"click",function(){m.fakeEvent(r.__button,"click")});m.bind(t,"mouseover",function(){m.addClass(r.__button,"hover")});m.bind(t,"mouseout",function(){m.removeClass(r.__button,"hover")})}else if(r instanceof c){m.addClass(t,"color");r.updateDisplay=g.compose(function(e){t.style.borderLeftColor=r.__color.toString();return e},r.updateDisplay);r.updateDisplay()}r.setValue=g.compose(function(t){if(e.getRoot().__preset_select&&r.isModified()){L(e.getRoot(),true)}return t},r.setValue)}function A(e,t){var r=e.getRoot();var n=r.__rememberedObjects.indexOf(t.object);if(n!=-1){var i=r.__rememberedObjectIndecesToControllers[n];if(i===undefined){i={};r.__rememberedObjectIndecesToControllers[n]=i}i[t.property]=t;if(r.load&&r.load.remembered){var o=r.load.remembered;var a;if(o[e.preset]){a=o[e.preset]}else if(o[v]){a=o[v]}else{return}if(a[n]&&a[n][t.property]!==undefined){var s=a[n][t.property];t.initialValue=s;t.setValue(s)}}}}function M(e,t){return document.location.href+"."+t}function N(e){var t=e.__save_row=document.createElement("li");m.addClass(e.domElement,"has-save");e.__ul.insertBefore(t,e.__ul.firstChild);m.addClass(t,"save-row");var r=document.createElement("span");r.innerHTML="&nbsp;";m.addClass(r,"button gears");var n=document.createElement("span");n.innerHTML="Save";m.addClass(n,"button");m.addClass(n,"save");var i=document.createElement("span");i.innerHTML="New";m.addClass(i,"button");m.addClass(i,"save-as");var o=document.createElement("span");o.innerHTML="Revert";m.addClass(o,"button");m.addClass(o,"revert");var a=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered){g.each(e.load.remembered,function(t,r){P(e,r,r==e.preset)})}else{P(e,v,false)}m.bind(a,"change",function(){for(var t=0;t<e.__preset_select.length;t++){e.__preset_select[t].innerHTML=e.__preset_select[t].value}e.preset=this.value});t.appendChild(a);t.appendChild(r);t.appendChild(n);t.appendChild(i);t.appendChild(o);if(y){var s=document.getElementById("dg-save-locally");var l=document.getElementById("dg-local-explain");s.style.display="block";var u=document.getElementById("dg-local-storage");if(localStorage.getItem(M(e,"isLocal"))==="true"){u.setAttribute("checked","checked")}function h(){l.style.display=e.useLocalStorage?"block":"none"}h();m.bind(u,"change",function(){e.useLocalStorage=!e.useLocalStorage;h()})}var f=document.getElementById("dg-new-constructor");m.bind(f,"keydown",function(e){if(e.metaKey&&(e.which===67||e.keyCode==67)){_.hide()}});m.bind(r,"click",function(){f.innerHTML=JSON.stringify(e.getSaveObject(),undefined,2);_.show();f.focus();f.select()});m.bind(n,"click",function(){e.save()});m.bind(i,"click",function(){var t=prompt("Enter a new preset name.");if(t)e.saveAs(t)});m.bind(o,"click",function(){e.revert()})}function D(e){e.__resize_handle=document.createElement("div");g.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var t;m.bind(e.__resize_handle,"mousedown",r);m.bind(e.__closeButton,"mousedown",r);e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild);function r(r){r.preventDefault();t=r.clientX;m.addClass(e.__closeButton,C.CLASS_DRAG);m.bind(window,"mousemove",n);m.bind(window,"mouseup",i);return false}function n(r){r.preventDefault();e.width+=t-r.clientX;e.onResize();t=r.clientX;return false}function i(){m.removeClass(e.__closeButton,C.CLASS_DRAG);m.unbind(window,"mousemove",n);m.unbind(window,"mouseup",i)}}function k(e,t){e.domElement.style.width=t+"px";if(e.__save_row&&e.autoPlace){e.__save_row.style.width=t+"px"}if(e.__closeButton){e.__closeButton.style.width=t+"px"}}function I(e,t){var r={};g.each(e.__rememberedObjects,function(n,i){var o={};var a=e.__rememberedObjectIndecesToControllers[i];g.each(a,function(e,r){o[r]=t?e.initialValue:e.getValue()});r[i]=o});return r}function P(e,t,r){var n=document.createElement("option");n.innerHTML=t;n.value=t;e.__preset_select.appendChild(n);if(r){e.__preset_select.selectedIndex=e.__preset_select.length-1}}function O(e){for(var t=0;t<e.__preset_select.length;t++){if(e.__preset_select[t].value==e.preset){e.__preset_select.selectedIndex=t}}}function L(e,t){var r=e.__preset_select[e.__preset_select.selectedIndex];if(t){r.innerHTML=r.value+"*"}else{r.innerHTML=r.value}}function U(e){if(e.length!=0){p(function(){U(e)})}g.each(e,function(e){e.updateDisplay()})}function F(e){B(e.__controllers);Object.keys(e.__folders).forEach(function(t){F(e.__folders[t])})}function B(e){for(var t in e){e[t].updateDisplay()}}return C}},{"../controllers/BooleanController.js":6,"../controllers/ColorController.js":7,"../controllers/Controller.js":8,"../controllers/FunctionController.js":9,"../controllers/NumberControllerBox.js":11,"../controllers/NumberControllerSlider.js":12,"../controllers/factory.js":15,"../dom/CenteredDiv.js":16,"../dom/dom.js":17,"../utils/common.js":19,"../utils/css.js":20,"../utils/requestAnimationFrame.js":22}],19:[function(e,t,r){t.exports=n();function n(){var e=Array.prototype.forEach;var t=Array.prototype.slice;return{BREAK:{},extend:function(e){this.each(t.call(arguments,1),function(t){for(var r in t)if(!this.isUndefined(t[r]))e[r]=t[r]},this);return e},defaults:function(e){this.each(t.call(arguments,1),function(t){for(var r in t)if(this.isUndefined(e[r]))e[r]=t[r]},this);return e},compose:function(){var e=t.call(arguments);return function(){var r=t.call(arguments);for(var n=e.length-1;n>=0;n--){r=[e[n].apply(this,r)]}return r[0]}},each:function(t,r,n){if(!t)return;if(e&&t.forEach&&t.forEach===e){t.forEach(r,n)}else if(t.length===t.length+0){for(var i=0,o=t.length;i<o;i++)if(i in t&&r.call(n,t[i],i)===this.BREAK)return}else{for(var i in t)if(r.call(n,t[i],i)===this.BREAK)return}},defer:function(e){setTimeout(e,0)},toArray:function(e){if(e.toArray)return e.toArray();return t.call(e)},isUndefined:function(e){return e===undefined},isNull:function(e){return e===null},isNaN:function(e){return e!==e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return e===false||e===true},isFunction:function(e){return Object.prototype.toString.call(e)==="[object Function]"}}}},{}],20:[function(e,t,r){t.exports=n();function n(){return{load:function(e,t){t=t||document;var r=t.createElement("link");r.type="text/css";r.rel="stylesheet";r.href=e;t.getElementsByTagName("head")[0].appendChild(r)},inject:function(e,t){t=t||document;var r=document.createElement("style");r.type="text/css";r.innerHTML=e;t.getElementsByTagName("head")[0].appendChild(r)}}}},{}],21:[function(e,t,r){t.exports=i;var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function i(e){return String(e).replace(/[&<>"'\/]/g,function(e){return n[e]})}},{}],22:[function(e,t,r){t.exports=n();function n(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}},{}],23:[function(e,t,r){t.exports={color:{math:e("./dat/color/math.js"),interpret:e("./dat/color/interpret.js"),Color:e("./dat/color/Color.js")},dom:{dom:e("./dat/dom/dom.js")},controllers:{Controller:e("./dat/controllers/Controller.js"),BooleanController:e("./dat/controllers/BooleanController.js"),OptionController:e("./dat/controllers/OptionController.js"),StringController:e("./dat/controllers/StringController.js"),NumberController:e("./dat/controllers/NumberController.js"),NumberControllerBox:e("./dat/controllers/NumberControllerBox.js"),NumberControllerSlider:e("./dat/controllers/NumberControllerSlider.js"),FunctionController:e("./dat/controllers/FunctionController.js"),ColorController:e("./dat/controllers/ColorController.js")},gui:{GUI:e("./dat/gui/GUI.js")},GUI:e("./dat/gui/GUI.js")}},{"./dat/color/Color.js":2,"./dat/color/interpret.js":3,"./dat/color/math.js":4,"./dat/controllers/BooleanController.js":6,"./dat/controllers/ColorController.js":7,"./dat/controllers/Controller.js":8,"./dat/controllers/FunctionController.js":9,"./dat/controllers/NumberController.js":10,"./dat/controllers/NumberControllerBox.js":11,"./dat/controllers/NumberControllerSlider.js":12,"./dat/controllers/OptionController.js":13,"./dat/controllers/StringController.js":14,"./dat/dom/dom.js":17,"./dat/gui/GUI.js":18}],24:[function(require,module,exports){(function(global){(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.p5=e()}})(function(){var define,module,exports;return function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var l=typeof require=="function"&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var h=r[a]={exports:{}};t[a][0].call(h.exports,function(e){var r=t[a][1][e];return i(r?r:e)},h,h.exports,e,t,r,n)}return r[a].exports}var o=typeof require=="function"&&require;for(var a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){},{}],2:[function(e,t,r){"use strict";r.argument=function(e,t){if(!e){throw new Error(t)}};r.assert=r.argument},{}],3:[function(e,t,r){"use strict";function n(e,t,r,n,i){e.beginPath();e.moveTo(t,r);e.lineTo(n,i);e.stroke()}r.line=n},{}],4:[function(e,t,r){"use strict";var n=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"];var i=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"];var o=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"];var a=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function s(e){this.font=e}s.prototype.charToGlyphIndex=function(e){var t=e.charCodeAt(0);var r=this.font.glyphs;if(r){for(var n=0;n<r.length;n+=1){var i=r.get(n);for(var o=0;o<i.unicodes.length;o+=1){if(i.unicodes[o]===t){return n}}}}else{return null}};function l(e){this.cmap=e}l.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.charCodeAt(0)]||0};function u(e,t){this.encoding=e;this.charset=t}u.prototype.charToGlyphIndex=function(e){var t=e.charCodeAt(0);var r=this.encoding[t];return this.charset.indexOf(r)};function h(e){var t;switch(e.version){case 1:this.names=r.standardNames.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(t=0;t<e.numberOfGlyphs;t++){if(e.glyphNameIndex[t]<r.standardNames.length){this.names[t]=r.standardNames[e.glyphNameIndex[t]]}else{this.names[t]=e.names[e.glyphNameIndex[t]-r.standardNames.length]}}break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(t=0;t<e.numberOfGlyphs;t++){this.names[t]=r.standardNames[t+e.glyphNameIndex[t]]}break;case 3:this.names=[];break}}h.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)};h.prototype.glyphIndexToName=function(e){return this.names[e]};function f(e){var t;var r=e.tables.cmap.glyphIndexMap;var n=Object.keys(r);for(var i=0;i<n.length;i+=1){var o=n[i];var a=r[o];t=e.glyphs.get(a);t.addUnicode(parseInt(o))}for(i=0;i<e.glyphs.length;i+=1){t=e.glyphs.get(i);if(e.cffEncoding){t.name=e.cffEncoding.charset[i]}else{t.name=e.glyphNames.glyphIndexToName(i)}}}r.cffStandardStrings=n;r.cffStandardEncoding=i;r.cffExpertEncoding=o;r.standardNames=a;r.DefaultEncoding=s;r.CmapEncoding=l;r.CffEncoding=u;r.GlyphNames=h;r.addGlyphNames=f},{}],5:[function(e,t,r){"use strict";var n=e("./path");var i=e("./tables/sfnt");var o=e("./encoding");var a=e("./glyphset");function s(e){e=e||{};this.familyName=e.familyName||" ";this.styleName=e.styleName||" ";this.designer=e.designer||" ";this.designerURL=e.designerURL||" ";this.manufacturer=e.manufacturer||" ";

this.manufacturerURL=e.manufacturerURL||" ";this.license=e.license||" ";this.licenseURL=e.licenseURL||" ";this.version=e.version||"Version 0.1";this.description=e.description||" ";this.copyright=e.copyright||" ";this.trademark=e.trademark||" ";this.unitsPerEm=e.unitsPerEm||1e3;this.ascender=e.ascender;this.descender=e.descender;this.supported=true;this.glyphs=new a.GlyphSet(this,e.glyphs||[]);this.encoding=new o.DefaultEncoding(this);this.tables={}}s.prototype.hasChar=function(e){return this.encoding.charToGlyphIndex(e)!==null};s.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)};s.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e);var r=this.glyphs.get(t);if(!r){r=this.glyphs.get(0)}return r};s.prototype.stringToGlyphs=function(e){var t=[];for(var r=0;r<e.length;r+=1){var n=e[r];t.push(this.charToGlyph(n))}return t};s.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)};s.prototype.nameToGlyph=function(e){var t=this.nametoGlyphIndex(e);var r=this.glyphs.get(t);if(!r){r=this.glyphs.get(0)}return r};s.prototype.glyphIndexToName=function(e){if(!this.glyphNames.glyphIndexToName){return""}return this.glyphNames.glyphIndexToName(e)};s.prototype.getKerningValue=function(e,t){e=e.index||e;t=t.index||t;var r=this.getGposKerningValue;return r?r(e,t):this.kerningPairs[e+","+t]||0};s.prototype.forEachGlyph=function(e,t,r,n,i,o){if(!this.supported){return}t=t!==undefined?t:0;r=r!==undefined?r:0;n=n!==undefined?n:72;i=i||{};var a=i.kerning===undefined?true:i.kerning;var s=1/this.unitsPerEm*n;var l=this.stringToGlyphs(e);for(var u=0;u<l.length;u+=1){var h=l[u];o(h,t,r,n,i);if(h.advanceWidth){t+=h.advanceWidth*s}if(a&&u<l.length-1){var f=this.getKerningValue(h,l[u+1]);t+=f*s}}};s.prototype.getPath=function(e,t,r,i,o){var a=new n.Path;this.forEachGlyph(e,t,r,i,o,function(e,t,r,n){var i=e.getPath(t,r,n);a.extend(i)});return a};s.prototype.draw=function(e,t,r,n,i,o){this.getPath(t,r,n,i,o).draw(e)};s.prototype.drawPoints=function(e,t,r,n,i,o){this.forEachGlyph(t,r,n,i,o,function(t,r,n,i){t.drawPoints(e,r,n,i)})};s.prototype.drawMetrics=function(e,t,r,n,i,o){this.forEachGlyph(t,r,n,i,o,function(t,r,n,i){t.drawMetrics(e,r,n,i)})};s.prototype.validate=function(){var e=[];var t=this;function r(t,r){if(!t){e.push(r)}}function n(e){r(t[e]&&t[e].trim().length>0,"No "+e+" specified.")}n("familyName");n("weightName");n("manufacturer");n("copyright");n("version");r(this.unitsPerEm>0,"No unitsPerEm specified.")};s.prototype.toTables=function(){return i.fontToTable(this)};s.prototype.toBuffer=function(){var e=this.toTables();var t=e.encode();var r=new ArrayBuffer(t.length);var n=new Uint8Array(r);for(var i=0;i<t.length;i++){n[i]=t[i]}return r};s.prototype.download=function(){var e=this.familyName.replace(/\s/g,"")+"-"+this.styleName+".otf";var t=this.toBuffer();window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem;window.requestFileSystem(window.TEMPORARY,t.byteLength,function(r){r.root.getFile(e,{create:true},function(e){e.createWriter(function(r){var n=new DataView(t);var i=new Blob([n],{type:"font/opentype"});r.write(i);r.addEventListener("writeend",function(){location.href=e.toURL()},false)})})},function(e){throw e})};r.Font=s},{"./encoding":4,"./glyphset":7,"./path":10,"./tables/sfnt":25}],6:[function(e,t,r){"use strict";var n=e("./check");var i=e("./draw");var o=e("./path");function a(e,t){var r=t||{commands:[]};return{configurable:true,get:function(){if(typeof r==="function"){r=r()}return r},set:function(e){r=e}}}function s(e){this.bindConstructorValues(e)}s.prototype.bindConstructorValues=function(e){this.index=e.index||0;this.name=e.name||null;this.unicode=e.unicode||undefined;this.unicodes=e.unicodes||e.unicode!==undefined?[e.unicode]:[];if(e.xMin){this.xMin=e.xMin}if(e.yMin){this.yMin=e.yMin}if(e.xMax){this.xMax=e.xMax}if(e.yMax){this.yMax=e.yMax}if(e.advanceWidth){this.advanceWidth=e.advanceWidth}Object.defineProperty(this,"path",a(this,e.path))};s.prototype.addUnicode=function(e){if(this.unicodes.length===0){this.unicode=e}this.unicodes.push(e)};s.prototype.getPath=function(e,t,r){e=e!==undefined?e:0;t=t!==undefined?t:0;r=r!==undefined?r:72;var n=1/this.path.unitsPerEm*r;var i=new o.Path;var a=this.path.commands;for(var s=0;s<a.length;s+=1){var l=a[s];if(l.type==="M"){i.moveTo(e+l.x*n,t+-l.y*n)}else if(l.type==="L"){i.lineTo(e+l.x*n,t+-l.y*n)}else if(l.type==="Q"){i.quadraticCurveTo(e+l.x1*n,t+-l.y1*n,e+l.x*n,t+-l.y*n)}else if(l.type==="C"){i.curveTo(e+l.x1*n,t+-l.y1*n,e+l.x2*n,t+-l.y2*n,e+l.x*n,t+-l.y*n)}else if(l.type==="Z"){i.closePath()}}return i};s.prototype.getContours=function(){if(this.points===undefined){return[]}var e=[];var t=[];for(var r=0;r<this.points.length;r+=1){var i=this.points[r];t.push(i);if(i.lastPointOfContour){e.push(t);t=[]}}n.argument(t.length===0,"There are still points left in the current contour.");return e};s.prototype.getMetrics=function(){var e=this.path.commands;var t=[];var r=[];for(var n=0;n<e.length;n+=1){var i=e[n];if(i.type!=="Z"){t.push(i.x);r.push(i.y)}if(i.type==="Q"||i.type==="C"){t.push(i.x1);r.push(i.y1)}if(i.type==="C"){t.push(i.x2);r.push(i.y2)}}var o={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,r),leftSideBearing:0};o.rightSideBearing=this.advanceWidth-o.leftSideBearing-(o.xMax-o.xMin);return o};s.prototype.draw=function(e,t,r,n){this.getPath(t,r,n).draw(e)};s.prototype.drawPoints=function(e,t,r,n){function i(t,r,n,i){var o=Math.PI*2;e.beginPath();for(var a=0;a<t.length;a+=1){e.moveTo(r+t[a].x*i,n+t[a].y*i);e.arc(r+t[a].x*i,n+t[a].y*i,2,0,o,false)}e.closePath();e.fill()}t=t!==undefined?t:0;r=r!==undefined?r:0;n=n!==undefined?n:24;var o=1/this.path.unitsPerEm*n;var a=[];var s=[];var l=this.path;for(var u=0;u<l.commands.length;u+=1){var h=l.commands[u];if(h.x!==undefined){a.push({x:h.x,y:-h.y})}if(h.x1!==undefined){s.push({x:h.x1,y:-h.y1})}if(h.x2!==undefined){s.push({x:h.x2,y:-h.y2})}}e.fillStyle="blue";i(a,t,r,o);e.fillStyle="red";i(s,t,r,o)};s.prototype.drawMetrics=function(e,t,r,n){var o;t=t!==undefined?t:0;r=r!==undefined?r:0;n=n!==undefined?n:24;o=1/this.path.unitsPerEm*n;e.lineWidth=1;e.strokeStyle="black";i.line(e,t,-1e4,t,1e4);i.line(e,-1e4,r,1e4,r);var a=this.xMin||0;var s=this.yMin||0;var l=this.xMax||0;var u=this.yMax||0;var h=this.advanceWidth||0;e.strokeStyle="blue";i.line(e,t+a*o,-1e4,t+a*o,1e4);i.line(e,t+l*o,-1e4,t+l*o,1e4);i.line(e,-1e4,r+-s*o,1e4,r+-s*o);i.line(e,-1e4,r+-u*o,1e4,r+-u*o);e.strokeStyle="green";i.line(e,t+h*o,-1e4,t+h*o,1e4)};r.Glyph=s},{"./check":2,"./draw":3,"./path":10}],7:[function(e,t,r){"use strict";var n=e("./glyph");function i(e,t){this.font=e;this.glyphs={};if(Array.isArray(t)){for(var r=0;r<t.length;r++){this.glyphs[r]=t[r]}}this.length=t&&t.length||0}i.prototype.get=function(e){if(typeof this.glyphs[e]==="function"){this.glyphs[e]=this.glyphs[e]()}return this.glyphs[e]};i.prototype.push=function(e,t){this.glyphs[e]=t;this.length++};function o(e,t){return new n.Glyph({index:t,font:e})}function a(e,t,r,i,o,a){return function(){var s=new n.Glyph({index:t,font:e});s.path=function(){r(s,i,o);var t=a(e.glyphs,s);t.unitsPerEm=e.unitsPerEm;return t};return s}}function s(e,t,r,i){return function(){var o=new n.Glyph({index:t,font:e});o.path=function(){var t=r(e,o,i);t.unitsPerEm=e.unitsPerEm;return t};return o}}r.GlyphSet=i;r.glyphLoader=o;r.ttfGlyphLoader=a;r.cffGlyphLoader=s},{"./glyph":6}],8:[function(e,t,r){"use strict";var n=e("./encoding");var i=e("./font");var o=e("./glyph");var a=e("./parse");var s=e("./path");var l=e("./tables/cmap");var u=e("./tables/cff");var h=e("./tables/glyf");var f=e("./tables/gpos");var c=e("./tables/head");var p=e("./tables/hhea");var d=e("./tables/hmtx");var m=e("./tables/kern");var g=e("./tables/loca");var v=e("./tables/maxp");var y=e("./tables/name");var _=e("./tables/os2");var b=e("./tables/post");function x(e){var t=new ArrayBuffer(e.length);var r=new Uint8Array(t);for(var n=0;n<e.length;n+=1){r[n]=e[n]}return t}function w(t,r){var n=e("fs");n.readFile(t,function(e,t){if(e){return r(e.message)}r(null,x(t))})}function S(e,t){var r=new XMLHttpRequest;r.open("get",e,true);r.responseType="arraybuffer";r.onload=function(){if(r.status!==200){return t("Font could not be loaded: "+r.statusText)}return t(null,r.response)};r.send()}function C(e){var t;var r;var o;var s;var x;var w;var S;var C=new i.Font;var T=new DataView(e,0);var E=a.getFixed(T,0);if(E===1){C.outlinesFormat="truetype"}else{E=a.getTag(T,0);if(E==="OTTO"){C.outlinesFormat="cff"}else{throw new Error("Unsupported OpenType version "+E)}}var R=a.getUShort(T,4);var A=12;for(var M=0;M<R;M+=1){var N=a.getTag(T,A);var D=a.getULong(T,A+8);switch(N){case"cmap":C.tables.cmap=l.parse(T,D);C.encoding=new n.CmapEncoding(C.tables.cmap);if(!C.encoding){C.supported=false}break;case"head":C.tables.head=c.parse(T,D);C.unitsPerEm=C.tables.head.unitsPerEm;t=C.tables.head.indexToLocFormat;break;case"hhea":C.tables.hhea=p.parse(T,D);C.ascender=C.tables.hhea.ascender;C.descender=C.tables.hhea.descender;C.numberOfHMetrics=C.tables.hhea.numberOfHMetrics;break;case"hmtx":r=D;break;case"maxp":C.tables.maxp=v.parse(T,D);C.numGlyphs=C.tables.maxp.numGlyphs;break;case"name":C.tables.name=y.parse(T,D);C.familyName=C.tables.name.fontFamily;C.styleName=C.tables.name.fontSubfamily;break;case"OS/2":C.tables.os2=_.parse(T,D);break;case"post":C.tables.post=b.parse(T,D);C.glyphNames=new n.GlyphNames(C.tables.post);break;case"glyf":o=D;break;case"loca":s=D;break;case"CFF ":x=D;break;case"kern":w=D;break;case"GPOS":S=D;break}A+=16}if(o&&s){var k=t===0;var I=g.parse(T,s,C.numGlyphs,k);C.glyphs=h.parse(T,o,I,C);d.parse(T,r,C.numberOfHMetrics,C.numGlyphs,C.glyphs);n.addGlyphNames(C)}else if(x){u.parse(T,x,C);n.addGlyphNames(C)}else{C.supported=false}if(C.supported){if(w){C.kerningPairs=m.parse(T,w)}else{C.kerningPairs={}}if(S){f.parse(T,S,C)}}return C}function T(e,t){var r=typeof window==="undefined";var n=r?w:S;n(e,function(e,r){if(e){return t(e)}var n=C(r);if(!n.supported){return t("Font is not supported (is this a Postscript font?)")}return t(null,n)})}r._parse=a;r.Font=i.Font;r.Glyph=o.Glyph;r.Path=s.Path;r.parse=C;r.load=T},{"./encoding":4,"./font":5,"./glyph":6,"./parse":9,"./path":10,"./tables/cff":12,"./tables/cmap":13,"./tables/glyf":14,"./tables/gpos":15,"./tables/head":16,"./tables/hhea":17,"./tables/hmtx":18,"./tables/kern":19,"./tables/loca":20,"./tables/maxp":21,"./tables/name":22,"./tables/os2":23,"./tables/post":24,fs:1}],9:[function(e,t,r){"use strict";r.getByte=function o(e,t){return e.getUint8(t)};r.getCard8=r.getByte;r.getUShort=function(e,t){return e.getUint16(t,false)};r.getCard16=r.getUShort;r.getShort=function(e,t){return e.getInt16(t,false)};r.getULong=function(e,t){return e.getUint32(t,false)};r.getFixed=function(e,t){var r=e.getInt16(t,false);var n=e.getUint16(t+2,false);return r+n/65535};r.getTag=function(e,t){var r="";for(var n=t;n<t+4;n+=1){r+=String.fromCharCode(e.getInt8(n))}return r};r.getOffset=function(e,t,r){var n=0;for(var i=0;i<r;i+=1){n<<=8;n+=e.getUint8(t+i)}return n};r.getBytes=function(e,t,r){var n=[];for(var i=t;i<r;i+=1){n.push(e.getUint8(i))}return n};r.bytesToString=function(e){var t="";for(var r=0;r<e.length;r+=1){t+=String.fromCharCode(e[r])}return t};var n={"byte":1,uShort:2,"short":2,uLong:4,fixed:4,longDateTime:8,tag:4};function i(e,t){this.data=e;this.offset=t;this.relativeOffset=0}i.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);this.relativeOffset+=1;return e};i.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);this.relativeOffset+=1;return e};i.prototype.parseCard8=i.prototype.parseByte;i.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);this.relativeOffset+=2;return e};i.prototype.parseCard16=i.prototype.parseUShort;i.prototype.parseSID=i.prototype.parseUShort;i.prototype.parseOffset16=i.prototype.parseUShort;i.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);this.relativeOffset+=2;return e};i.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;this.relativeOffset+=2;return e};i.prototype.parseULong=function(){var e=r.getULong(this.data,this.offset+this.relativeOffset);this.relativeOffset+=4;return e};i.prototype.parseFixed=function(){var e=r.getFixed(this.data,this.offset+this.relativeOffset);this.relativeOffset+=4;return e};i.prototype.parseOffset16List=i.prototype.parseUShortList=function(e){var t=new Array(e);var n=this.data;var i=this.offset+this.relativeOffset;for(var o=0;o<e;o++){t[o]=r.getUShort(n,i);i+=2}this.relativeOffset+=e*2;return t};i.prototype.parseString=function(e){var t=this.data;var r=this.offset+this.relativeOffset;var n="";this.relativeOffset+=e;for(var i=0;i<e;i++){n+=String.fromCharCode(t.getUint8(r+i))}return n};i.prototype.parseTag=function(){return this.parseString(4)};i.prototype.parseLongDateTime=function(){var e=r.getULong(this.data,this.offset+this.relativeOffset+4);this.relativeOffset+=8;return e};i.prototype.parseFixed=function(){var e=r.getULong(this.data,this.offset+this.relativeOffset);this.relativeOffset+=4;return e/65536};i.prototype.parseVersion=function(){var e=r.getUShort(this.data,this.offset+this.relativeOffset);var t=r.getUShort(this.data,this.offset+this.relativeOffset+2);this.relativeOffset+=4;return e+t/4096/10};i.prototype.skip=function(e,t){if(t===undefined){t=1}this.relativeOffset+=n[e]*t};r.Parser=i},{}],10:[function(e,t,r){"use strict";function n(){this.commands=[];this.fill="black";this.stroke=null;this.strokeWidth=1}n.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})};n.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})};n.prototype.curveTo=n.prototype.bezierCurveTo=function(e,t,r,n,i,o){this.commands.push({type:"C",x1:e,y1:t,x2:r,y2:n,x:i,y:o})};n.prototype.quadTo=n.prototype.quadraticCurveTo=function(e,t,r,n){this.commands.push({type:"Q",x1:e,y1:t,x:r,y:n})};n.prototype.close=n.prototype.closePath=function(){this.commands.push({type:"Z"})};n.prototype.extend=function(e){if(e.commands){e=e.commands}Array.prototype.push.apply(this.commands,e)};n.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var r=this.commands[t];if(r.type==="M"){e.moveTo(r.x,r.y)}else if(r.type==="L"){e.lineTo(r.x,r.y)}else if(r.type==="C"){e.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y)}else if(r.type==="Q"){e.quadraticCurveTo(r.x1,r.y1,r.x,r.y)}else if(r.type==="Z"){e.closePath()}}if(this.fill){e.fillStyle=this.fill;e.fill()}if(this.stroke){e.strokeStyle=this.stroke;e.lineWidth=this.strokeWidth;e.stroke()}};n.prototype.toPathData=function(e){e=e!==undefined?e:2;function t(t){if(Math.round(t)===t){return""+Math.round(t)}else{return t.toFixed(e)}}function r(){var e="";for(var r=0;r<arguments.length;r+=1){var n=arguments[r];if(n>=0&&r>0){e+=" "}e+=t(n)}return e}var n="";for(var i=0;i<this.commands.length;i+=1){var o=this.commands[i];if(o.type==="M"){n+="M"+r(o.x,o.y)}else if(o.type==="L"){n+="L"+r(o.x,o.y)}else if(o.type==="C"){n+="C"+r(o.x1,o.y1,o.x2,o.y2,o.x,o.y)}else if(o.type==="Q"){n+="Q"+r(o.x1,o.y1,o.x,o.y)}else if(o.type==="Z"){n+="Z"}}return n};n.prototype.toSVG=function(e){var t='<path d="';t+=this.toPathData(e);t+='"';if(this.fill&this.fill!=="black"){if(this.fill===null){t+=' fill="none"'}else{t+=' fill="'+this.fill+'"'}}if(this.stroke){t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'}t+="/>";return t};r.Path=n},{}],11:[function(e,t,r){"use strict";var n=e("./check");var i=e("./types").encode;var o=e("./types").sizeOf;function a(e,t,r){var n;for(n=0;n<t.length;n+=1){var i=t[n];this[i.name]=i.value}this.tableName=e;this.fields=t;if(r){var o=Object.keys(r);for(n=0;n<o.length;n+=1){var a=o[n];var s=r[a];if(this[a]!==undefined){this[a]=s}}}}a.prototype.sizeOf=function(){var e=0;for(var t=0;t<this.fields.length;t+=1){var r=this.fields[t];var i=this[r.name];if(i===undefined){i=r.value}if(typeof i.sizeOf==="function"){e+=i.sizeOf()}else{var a=o[r.type];n.assert(typeof a==="function","Could not find sizeOf function for field"+r.name);e+=a(i)}}return e};a.prototype.encode=function(){return i.TABLE(this)};r.Table=a},{"./check":2,"./types":26}],12:[function(e,t,r){"use strict";var n=e("../encoding");var i=e("../glyphset");var o=e("../parse");var a=e("../path");var s=e("../table");function l(e,t){if(e===t){return true}else if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length){return false}for(var r=0;r<e.length;r+=1){if(!l(e[r],t[r])){return false}}return true}else{return false}}function u(e,t,r){var n=[];var i=[];var a=o.getCard16(e,t);var s;var l;var u;if(a!==0){var h=o.getByte(e,t+2);l=t+(a+1)*h+2;var f=t+3;for(s=0;s<a+1;s+=1){n.push(o.getOffset(e,f,h));f+=h}u=l+n[a]}else{u=t+2}for(s=0;s<n.length-1;s+=1){var c=o.getBytes(e,l+n[s],l+n[s+1]);if(r){c=r(c)}i.push(c)}return{objects:i,startOffset:t,endOffset:u}}function h(e){var t="";var r=15;var n=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];while(true){var i=e.parseByte();var o=i>>4;var a=i&15;if(o===r){break}t+=n[o];if(a===r){break}t+=n[a]}return parseFloat(t)}function f(e,t){var r;var n;var i;var o;if(t===28){r=e.parseByte();n=e.parseByte();return r<<8|n}if(t===29){r=e.parseByte();n=e.parseByte();i=e.parseByte();o=e.parseByte();return r<<24|n<<16|i<<8|o}if(t===30){return h(e)}if(t>=32&&t<=246){return t-139}if(t>=247&&t<=250){r=e.parseByte();return(t-247)*256+r+108}if(t>=251&&t<=254){r=e.parseByte();return-(t-251)*256-r-108}throw new Error("Invalid b0 "+t)}function c(e){var t={};for(var r=0;r<e.length;r+=1){var n=e[r][0];var i=e[r][1];var o;if(i.length===1){o=i[0]}else{o=i}if(t.hasOwnProperty(n)){throw new Error("Object "+t+" already has key "+n)}t[n]=o}return t}function p(e,t,r){t=t!==undefined?t:0;var n=new o.Parser(e,t);var i=[];var a=[];r=r!==undefined?r:e.length;while(n.relativeOffset<r){var s=n.parseByte();if(s<=21){if(s===12){s=1200+n.parseByte()}i.push([s,a]);a=[]}else{a.push(f(n,s))}}return c(i)}function d(e,t){if(t<=390){t=n.cffStandardStrings[t]}else{t=e[t-391]}return t}function m(e,t,r){var n={};for(var i=0;i<t.length;i+=1){var o=t[i];var a=e[o.op];if(a===undefined){a=o.value!==undefined?o.value:null}if(o.type==="SID"){a=d(r,a)}n[o.name]=a}return n}function g(e,t){var r={};r.formatMajor=o.getCard8(e,t);r.formatMinor=o.getCard8(e,t+1);r.size=o.getCard8(e,t+2);r.offsetSize=o.getCard8(e,t+3);r.startOffset=t;r.endOffset=t+4;return r}var v=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]}];var y=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function _(e,t){var r=p(e,0,e.byteLength);return m(r,v,t)}function b(e,t,r,n){var i=p(e,t,r);return m(i,y,n)}function x(e,t,r,n){var i;var a;var s;var l=new o.Parser(e,t);r-=1;var u=[".notdef"];var h=l.parseCard8();if(h===0){for(i=0;i<r;i+=1){a=l.parseSID();u.push(d(n,a))}}else if(h===1){while(u.length<=r){a=l.parseSID();s=l.parseCard8();for(i=0;i<=s;i+=1){u.push(d(n,a));a+=1}}}else if(h===2){while(u.length<=r){a=l.parseSID();s=l.parseCard16();for(i=0;i<=s;i+=1){u.push(d(n,a));a+=1}}}else{throw new Error("Unknown charset format "+h)}return u}function w(e,t,r){var i;var a;var s={};var l=new o.Parser(e,t);var u=l.parseCard8();if(u===0){var h=l.parseCard8();for(i=0;i<h;i+=1){a=l.parseCard8();s[a]=i}}else if(u===1){var f=l.parseCard8();a=1;for(i=0;i<f;i+=1){var c=l.parseCard8();var p=l.parseCard8();for(var d=c;d<=c+p;d+=1){s[d]=a;a+=1}}}else{throw new Error("Unknown encoding format "+u)}return new n.CffEncoding(s,r)}function S(e,t,r){var n;var i;var o;var s;var l=new a.Path;var u=[];var h=0;var f=false;var c=e.defaultWidthX;var p=false;var d=0;var m=0;function g(e,t){if(p){l.closePath()}l.moveTo(e,t);p=true}function v(){var t;t=u.length%2!==0;if(t&&!f){c=u.shift()+e.nominalWidthX}h+=u.length>>1;u.length=0;f=true}function y(r){var a;var _;var b;var x;var w;var S;var C;var T;var E;var R;var A;var M;var N=0;while(N<r.length){var D=r[N];N+=1;switch(D){case 1:v();break;case 3:v();break;case 4:if(u.length>1&&!f){c=u.shift()+e.nominalWidthX;f=true}m+=u.pop();g(d,m);break;case 5:while(u.length>0){d+=u.shift();m+=u.shift();l.lineTo(d,m)}break;case 6:while(u.length>0){d+=u.shift();l.lineTo(d,m);if(u.length===0){break}m+=u.shift();l.lineTo(d,m)}break;case 7:while(u.length>0){m+=u.shift();l.lineTo(d,m);if(u.length===0){break}d+=u.shift();l.lineTo(d,m)}break;case 8:while(u.length>0){n=d+u.shift();i=m+u.shift();o=n+u.shift();s=i+u.shift();d=o+u.shift();m=s+u.shift();l.curveTo(n,i,o,s,d,m)}break;case 10:w=u.pop()+e.subrsBias;S=e.subrs[w];if(S){y(S)}break;case 11:return;case 12:D=r[N];N+=1;switch(D){case 35:n=d+u.shift();i=m+u.shift();o=n+u.shift();s=i+u.shift();C=o+u.shift();T=s+u.shift();E=C+u.shift();R=T+u.shift();A=E+u.shift();M=R+u.shift();d=A+u.shift();m=M+u.shift();u.shift();l.curveTo(n,i,o,s,C,T);l.curveTo(E,R,A,M,d,m);break;case 34:n=d+u.shift();i=m;o=n+u.shift();s=i+u.shift();C=o+u.shift();T=s;E=C+u.shift();R=s;A=E+u.shift();M=m;d=A+u.shift();l.curveTo(n,i,o,s,C,T);l.curveTo(E,R,A,M,d,m);break;case 36:n=d+u.shift();i=m+u.shift();o=n+u.shift();s=i+u.shift();C=o+u.shift();T=s;E=C+u.shift();R=s;A=E+u.shift();M=R+u.shift();d=A+u.shift();l.curveTo(n,i,o,s,C,T);l.curveTo(E,R,A,M,d,m);break;case 37:n=d+u.shift();i=m+u.shift();o=n+u.shift();s=i+u.shift();C=o+u.shift();T=s+u.shift();E=C+u.shift();R=T+u.shift();A=E+u.shift();M=R+u.shift();if(Math.abs(A-d)>Math.abs(M-m)){d=A+u.shift()}else{m=M+u.shift()}l.curveTo(n,i,o,s,C,T);l.curveTo(E,R,A,M,d,m);break;default:console.log("Glyph "+t.index+": unknown operator "+1200+D);u.length=0}break;case 14:if(u.length>0&&!f){c=u.shift()+e.nominalWidthX;f=true}if(p){l.closePath();p=false}break;case 18:v();break;case 19:case 20:v();N+=h+7>>3;break;case 21:if(u.length>2&&!f){c=u.shift()+e.nominalWidthX;f=true}m+=u.pop();d+=u.pop();g(d,m);break;case 22:if(u.length>1&&!f){c=u.shift()+e.nominalWidthX;f=true}d+=u.pop();g(d,m);break;case 23:v();break;case 24:while(u.length>2){n=d+u.shift();i=m+u.shift();o=n+u.shift();s=i+u.shift();d=o+u.shift();m=s+u.shift();l.curveTo(n,i,o,s,d,m)}d+=u.shift();m+=u.shift();l.lineTo(d,m);break;case 25:while(u.length>6){d+=u.shift();m+=u.shift();l.lineTo(d,m)}n=d+u.shift();i=m+u.shift();o=n+u.shift();s=i+u.shift();d=o+u.shift();m=s+u.shift();l.curveTo(n,i,o,s,d,m);break;case 26:if(u.length%2){d+=u.shift()}while(u.length>0){n=d;i=m+u.shift();o=n+u.shift();s=i+u.shift();d=o;m=s+u.shift();l.curveTo(n,i,o,s,d,m)}break;case 27:if(u.length%2){m+=u.shift()}while(u.length>0){n=d+u.shift();i=m;o=n+u.shift();s=i+u.shift();d=o+u.shift();m=s;l.curveTo(n,i,o,s,d,m)}break;case 28:a=r[N];_=r[N+1];u.push((a<<24|_<<16)>>16);N+=2;break;case 29:w=u.pop()+e.gsubrsBias;S=e.gsubrs[w];if(S){y(S)}break;case 30:while(u.length>0){n=d;i=m+u.shift();o=n+u.shift();s=i+u.shift();d=o+u.shift();m=s+(u.length===1?u.shift():0);l.curveTo(n,i,o,s,d,m);if(u.length===0){break}n=d+u.shift();i=m;o=n+u.shift();s=i+u.shift();m=s+u.shift();d=o+(u.length===1?u.shift():0);l.curveTo(n,i,o,s,d,m)}break;case 31:while(u.length>0){n=d+u.shift();i=m;o=n+u.shift();s=i+u.shift();m=s+u.shift();d=o+(u.length===1?u.shift():0);l.curveTo(n,i,o,s,d,m);if(u.length===0){break}n=d;i=m+u.shift();o=n+u.shift();s=i+u.shift();d=o+u.shift();m=s+(u.length===1?u.shift():0);l.curveTo(n,i,o,s,d,m)}break;default:if(D<32){console.log("Glyph "+t.index+": unknown operator "+D)}else if(D<247){u.push(D-139)}else if(D<251){a=r[N];N+=1;u.push((D-247)*256+a+108)}else if(D<255){a=r[N];N+=1;u.push(-(D-251)*256-a-108)}else{a=r[N];_=r[N+1];b=r[N+2];x=r[N+3];N+=4;u.push((a<<24|_<<16|b<<8|x)/65536)}}}}y(r);t.advanceWidth=c;return l}function C(e){var t;if(e.length<1240){t=107}else if(e.length<33900){t=1131}else{t=32768}return t}function T(e,t,r){r.tables.cff={};var a=g(e,t);var s=u(e,a.endOffset,o.bytesToString);var l=u(e,s.endOffset);var h=u(e,l.endOffset,o.bytesToString);var f=u(e,h.endOffset);r.gsubrs=f.objects;r.gsubrsBias=C(r.gsubrs);var c=new DataView(new Uint8Array(l.objects[0]).buffer);var p=_(c,h.objects);r.tables.cff.topDict=p;var d=t+p["private"][1];var m=b(e,d,p["private"][0],h.objects);r.defaultWidthX=m.defaultWidthX;r.nominalWidthX=m.nominalWidthX;if(m.subrs!==0){var v=d+m.subrs;var y=u(e,v);r.subrs=y.objects;r.subrsBias=C(r.subrs)}else{r.subrs=[];r.subrsBias=0}var T=u(e,t+p.charStrings);r.nGlyphs=T.objects.length;var E=x(e,t+p.charset,r.nGlyphs,h.objects);if(p.encoding===0){r.cffEncoding=new n.CffEncoding(n.cffStandardEncoding,E)}else if(p.encoding===1){r.cffEncoding=new n.CffEncoding(n.cffExpertEncoding,E)}else{r.cffEncoding=w(e,t+p.encoding,E)}r.encoding=r.encoding||r.cffEncoding;r.glyphs=new i.GlyphSet(r);for(var R=0;R<r.nGlyphs;R+=1){var A=T.objects[R];r.glyphs.push(R,i.cffGlyphLoader(r,R,S,A))}}function E(e,t){var r;var i=n.cffStandardStrings.indexOf(e);if(i>=0){r=i}i=t.indexOf(e);if(i>=0){r=i+n.cffStandardStrings.length}else{r=n.cffStandardStrings.length+t.length;t.push(e)}return r}function R(){return new s.Table("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function A(e){var t=new s.Table("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var r=0;r<e.length;r+=1){t.names.push({name:"name_"+r,type:"NAME",value:e[r]})}return t}function M(e,t,r){var n={};for(var i=0;i<e.length;i+=1){var o=e[i];var a=t[o.name];if(a!==undefined&&!l(a,o.value)){if(o.type==="SID"){a=E(a,r)}n[o.op]={name:o.name,type:o.type,value:a}}}return n}function N(e,t){var r=new s.Table("Top DICT",[{name:"dict",type:"DICT",value:{}}]);r.dict=M(v,e,t);return r}function D(e){var t=new s.Table("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}];return t}function k(e){var t=new s.Table("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var r=0;r<e.length;r+=1){t.strings.push({name:"string_"+r,type:"STRING",value:e[r]})}return t}function I(){return new s.Table("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function P(e,t){var r=new s.Table("Charsets",[{name:"format",type:"Card8",value:0}]);for(var n=0;n<e.length;n+=1){var i=e[n];var o=E(i,t);r.fields.push({name:"glyph_"+n,type:"SID",value:o})}return r}function O(e){var t=[];var r=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});var n=0;var i=0;for(var o=0;o<r.commands.length;o+=1){var a;var s;var l=r.commands[o];if(l.type==="Q"){var u=1/3;var h=2/3;l={type:"C",x:l.x,y:l.y,x1:u*n+h*l.x1,y1:u*i+h*l.y1,x2:u*l.x+h*l.x1,y2:u*l.y+h*l.y1}}if(l.type==="M"){a=Math.round(l.x-n);s=Math.round(l.y-i);t.push({name:"dx",type:"NUMBER",value:a});t.push({name:"dy",type:"NUMBER",value:s});t.push({name:"rmoveto",type:"OP",value:21});n=Math.round(l.x);i=Math.round(l.y)}else if(l.type==="L"){a=Math.round(l.x-n);s=Math.round(l.y-i);t.push({name:"dx",type:"NUMBER",value:a});t.push({name:"dy",type:"NUMBER",value:s});t.push({name:"rlineto",type:"OP",value:5});n=Math.round(l.x);i=Math.round(l.y)}else if(l.type==="C"){var f=Math.round(l.x1-n);var c=Math.round(l.y1-i);var p=Math.round(l.x2-l.x1);var d=Math.round(l.y2-l.y1);a=Math.round(l.x-l.x2);s=Math.round(l.y-l.y2);t.push({name:"dx1",type:"NUMBER",value:f});t.push({name:"dy1",type:"NUMBER",value:c});t.push({name:"dx2",type:"NUMBER",value:p});t.push({name:"dy2",type:"NUMBER",value:d});t.push({name:"dx",type:"NUMBER",value:a});t.push({name:"dy",type:"NUMBER",value:s});t.push({name:"rrcurveto",type:"OP",value:8});n=Math.round(l.x);i=Math.round(l.y)}}t.push({name:"endchar",type:"OP",value:14});return t}function L(e){var t=new s.Table("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]);for(var r=0;r<e.length;r+=1){var n=e.get(r);var i=O(n);t.charStrings.push({name:n.name,type:"CHARSTRING",value:i})}return t}function U(e,t){var r=new s.Table("Private DICT",[{name:"dict",type:"DICT",value:{}}]);r.dict=M(y,e,t);return r}function F(e){var t=new s.Table("Private DICT INDEX",[{name:"privateDicts",type:"INDEX",value:[]}]);t.privateDicts=[{name:"privateDict_0",type:"TABLE",value:e}];return t}function B(e,t){var r=new s.Table("CFF ",[{name:"header",type:"TABLE"},{name:"nameIndex",type:"TABLE"},{name:"topDictIndex",type:"TABLE"},{name:"stringIndex",type:"TABLE"},{name:"globalSubrIndex",type:"TABLE"},{name:"charsets",type:"TABLE"},{name:"charStringsIndex",type:"TABLE"},{name:"privateDictIndex",type:"TABLE"}]);var n=1/t.unitsPerEm;var i={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontMatrix:[n,0,0,n,0,0],charset:999,encoding:0,charStrings:999,"private":[0,999]};var o={};var a=[];var l;for(var u=1;u<e.length;u+=1){l=e.get(u);a.push(l.name)}var h=[];r.header=R();r.nameIndex=A([t.postScriptName]);var f=N(i,h);r.topDictIndex=D(f);r.globalSubrIndex=I();r.charsets=P(a,h);r.charStringsIndex=L(e);var c=U(o,h);r.privateDictIndex=F(c);r.stringIndex=k(h);var p=r.header.sizeOf()+r.nameIndex.sizeOf()+r.topDictIndex.sizeOf()+r.stringIndex.sizeOf()+r.globalSubrIndex.sizeOf();i.charset=p;i.encoding=0;i.charStrings=i.charset+r.charsets.sizeOf();i.private[1]=i.charStrings+r.charStringsIndex.sizeOf();f=N(i,h);r.topDictIndex=D(f);return r}r.parse=T;r.make=B},{"../encoding":4,"../glyphset":7,"../parse":9,"../path":10,"../table":11}],13:[function(e,t,r){"use strict";var n=e("../check");var i=e("../parse");var o=e("../table");function a(e,t){var r;var o={};o.version=i.getUShort(e,t);n.argument(o.version===0,"cmap table version should be 0.");o.numTables=i.getUShort(e,t+2);var a=-1;for(r=0;r<o.numTables;r+=1){var s=i.getUShort(e,t+4+r*8);var l=i.getUShort(e,t+4+r*8+2);if(s===3&&(l===1||l===0)){a=i.getULong(e,t+4+r*8+4);break}}if(a===-1){return null}var u=new i.Parser(e,t+a);o.format=u.parseUShort();n.argument(o.format===4,"Only format 4 cmap tables are supported.");o.length=u.parseUShort();o.language=u.parseUShort();var h;o.segCount=h=u.parseUShort()>>1;u.skip("uShort",3);o.glyphIndexMap={};var f=new i.Parser(e,t+a+14);var c=new i.Parser(e,t+a+16+h*2);var p=new i.Parser(e,t+a+16+h*4);var d=new i.Parser(e,t+a+16+h*6);var m=t+a+16+h*8;for(r=0;r<h-1;r+=1){var g;var v=f.parseUShort();var y=c.parseUShort();var _=p.parseShort();var b=d.parseUShort();for(var x=y;x<=v;x+=1){if(b!==0){m=d.offset+d.relativeOffset-2;m+=b;m+=(x-y)*2;g=i.getUShort(e,m);if(g!==0){g=g+_&65535}}else{g=x+_&65535}o.glyphIndexMap[x]=g}}return o}function s(e,t,r){e.segments.push({end:t,start:t,delta:-(t-r),offset:0})}function l(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}function u(e){var t;var r=new o.Table("cmap",[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:1},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:12},{name:"format",type:"USHORT",value:4},{name:"length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",
value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);r.segments=[];for(t=0;t<e.length;t+=1){var n=e.get(t);for(var i=0;i<n.unicodes.length;i+=1){s(r,n.unicodes[i],t)}r.segments=r.segments.sort(function(e,t){return e.start-t.start})}l(r);var a;a=r.segments.length;r.segCountX2=a*2;r.searchRange=Math.pow(2,Math.floor(Math.log(a)/Math.log(2)))*2;r.entrySelector=Math.log(r.searchRange/2)/Math.log(2);r.rangeShift=r.segCountX2-r.searchRange;var u=[];var h=[];var f=[];var c=[];var p=[];for(t=0;t<a;t+=1){var d=r.segments[t];u=u.concat({name:"end_"+t,type:"USHORT",value:d.end});h=h.concat({name:"start_"+t,type:"USHORT",value:d.start});f=f.concat({name:"idDelta_"+t,type:"SHORT",value:d.delta});c=c.concat({name:"idRangeOffset_"+t,type:"USHORT",value:d.offset});if(d.glyphId!==undefined){p=p.concat({name:"glyph_"+t,type:"USHORT",value:d.glyphId})}}r.fields=r.fields.concat(u);r.fields.push({name:"reservedPad",type:"USHORT",value:0});r.fields=r.fields.concat(h);r.fields=r.fields.concat(f);r.fields=r.fields.concat(c);r.fields=r.fields.concat(p);r.length=14+u.length*2+2+h.length*2+f.length*2+c.length*2+p.length*2;return r}r.parse=a;r.make=u},{"../check":2,"../parse":9,"../table":11}],14:[function(e,t,r){"use strict";var n=e("../check");var i=e("../glyphset");var o=e("../parse");var a=e("../path");function s(e,t,r,n,i){var o;if((t&n)>0){o=e.parseByte();if((t&i)===0){o=-o}o=r+o}else{if((t&i)>0){o=r}else{o=r+e.parseShort()}}return o}function l(e,t,r){var i=new o.Parser(t,r);e.numberOfContours=i.parseShort();e.xMin=i.parseShort();e.yMin=i.parseShort();e.xMax=i.parseShort();e.yMax=i.parseShort();var a;var l;if(e.numberOfContours>0){var u;var h=e.endPointIndices=[];for(u=0;u<e.numberOfContours;u+=1){h.push(i.parseUShort())}e.instructionLength=i.parseUShort();e.instructions=[];for(u=0;u<e.instructionLength;u+=1){e.instructions.push(i.parseByte())}var f=h[h.length-1]+1;a=[];for(u=0;u<f;u+=1){l=i.parseByte();a.push(l);if((l&8)>0){var c=i.parseByte();for(var p=0;p<c;p+=1){a.push(l);u+=1}}}n.argument(a.length===f,"Bad flags.");if(h.length>0){var d=[];var m;if(f>0){for(u=0;u<f;u+=1){l=a[u];m={};m.onCurve=!!(l&1);m.lastPointOfContour=h.indexOf(u)>=0;d.push(m)}var g=0;for(u=0;u<f;u+=1){l=a[u];m=d[u];m.x=s(i,l,g,2,16);g=m.x}var v=0;for(u=0;u<f;u+=1){l=a[u];m=d[u];m.y=s(i,l,v,4,32);v=m.y}}e.points=d}else{e.points=[]}}else if(e.numberOfContours===0){e.points=[]}else{e.isComposite=true;e.points=[];e.components=[];var y=true;while(y){a=i.parseUShort();var _={glyphIndex:i.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};if((a&1)>0){_.dx=i.parseShort();_.dy=i.parseShort()}else{_.dx=i.parseChar();_.dy=i.parseChar()}if((a&8)>0){_.xScale=_.yScale=i.parseF2Dot14()}else if((a&64)>0){_.xScale=i.parseF2Dot14();_.yScale=i.parseF2Dot14()}else if((a&128)>0){_.xScale=i.parseF2Dot14();_.scale01=i.parseF2Dot14();_.scale10=i.parseF2Dot14();_.yScale=i.parseF2Dot14()}e.components.push(_);y=!!(a&32)}}}function u(e,t){var r=[];for(var n=0;n<e.length;n+=1){var i=e[n];var o={x:t.xScale*i.x+t.scale01*i.y+t.dx,y:t.scale10*i.x+t.yScale*i.y+t.dy,onCurve:i.onCurve,lastPointOfContour:i.lastPointOfContour};r.push(o)}return r}function h(e){var t=[];var r=[];for(var i=0;i<e.length;i+=1){var o=e[i];r.push(o);if(o.lastPointOfContour){t.push(r);r=[]}}n.argument(r.length===0,"There are still points left in the current contour.");return t}function f(e){var t=new a.Path;if(!e){return t}var r=h(e);for(var n=0;n<r.length;n+=1){var i=r[n];var o=i[0];var s=i[i.length-1];var l;var u;if(o.onCurve){l=null;u=true}else{if(s.onCurve){o=s}else{o={x:(o.x+s.x)/2,y:(o.y+s.y)/2}}l=o;u=false}t.moveTo(o.x,o.y);for(var f=u?1:0;f<i.length;f+=1){var c=i[f];var p=f===0?o:i[f-1];if(p.onCurve&&c.onCurve){t.lineTo(c.x,c.y)}else if(p.onCurve&&!c.onCurve){l=c}else if(!p.onCurve&&!c.onCurve){var d={x:(p.x+c.x)/2,y:(p.y+c.y)/2};t.quadraticCurveTo(p.x,p.y,d.x,d.y);l=c}else if(!p.onCurve&&c.onCurve){t.quadraticCurveTo(l.x,l.y,c.x,c.y);l=null}else{throw new Error("Invalid state.")}}if(o!==s){if(l){t.quadraticCurveTo(l.x,l.y,o.x,o.y)}else{t.lineTo(o.x,o.y)}}}t.closePath();return t}function c(e,t){if(t.isComposite){for(var r=0;r<t.components.length;r+=1){var n=t.components[r];var i=e.get(n.glyphIndex);if(i.points){var o=u(i.points,n);t.points=t.points.concat(o)}}}return f(t.points)}function p(e,t,r,n){var o=new i.GlyphSet(n);var a;for(a=0;a<r.length-1;a+=1){var s=r[a];var u=r[a+1];if(s!==u){o.push(a,i.ttfGlyphLoader(n,a,l,e,t+s,c))}else{o.push(a,i.glyphLoader(n,a))}}return o}r.parse=p},{"../check":2,"../glyphset":7,"../parse":9,"../path":10}],15:[function(e,t,r){"use strict";var n=e("../check");var i=e("../parse");function o(e,t){var r=new i.Parser(e,t);var n=r.parseUShort();var o=[];for(var a=0;a<n;a++){o[r.parseTag()]={offset:r.parseUShort()}}return o}function a(e,t){var r=new i.Parser(e,t);var n=r.parseUShort();var o=r.parseUShort();if(n===1){return r.parseUShortList(o)}else if(n===2){var a=[];for(;o--;){var s=r.parseUShort();var l=r.parseUShort();var u=r.parseUShort();for(var h=s;h<=l;h++){a[u++]=h}}return a}}function s(e,t){var r=new i.Parser(e,t);var n=r.parseUShort();if(n===1){var o=r.parseUShort();var a=r.parseUShort();var s=r.parseUShortList(a);return function(e){return s[e-o]||0}}else if(n===2){var l=r.parseUShort();var u=[];var h=[];var f=[];for(var c=0;c<l;c++){u[c]=r.parseUShort();h[c]=r.parseUShort();f[c]=r.parseUShort()}return function(e){var t=0;var r=u.length-1;while(t<r){var n=t+r+1>>1;if(e<u[n]){r=n-1}else{t=n}}if(u[t]<=e&&e<=h[t]){return f[t]||0}return 0}}}function l(e,t){var r=new i.Parser(e,t);var n=r.parseUShort();var o=r.parseUShort();var l=a(e,t+o);var u=r.parseUShort();var h=r.parseUShort();var f;var c;if(u!==4||h!==0)return;var p={};if(n===1){var d=r.parseUShort();var m=[];var g=r.parseOffset16List(d);for(var v=0;v<d;v++){var y=g[v];var _=p[y];if(!_){_={};r.relativeOffset=y;var b=r.parseUShort();for(;b--;){var x=r.parseUShort();if(u)f=r.parseShort();if(h)c=r.parseShort();_[x]=f}}m[l[v]]=_}return function(e,t){var r=m[e];if(r)return r[t]}}else if(n===2){var w=r.parseUShort();var S=r.parseUShort();var C=r.parseUShort();var T=r.parseUShort();var E=s(e,t+w);var R=s(e,t+S);var A=[];for(var M=0;M<C;M++){var N=A[M]=[];for(var D=0;D<T;D++){if(u)f=r.parseShort();if(h)c=r.parseShort();N[D]=f}}var k={};for(M=0;M<l.length;M++)k[l[M]]=1;return function(e,t){if(!k[e])return;var r=E(e);var n=R(t);var i=A[r];if(i){return i[n]}}}}function u(e,t){var r=new i.Parser(e,t);var n=r.parseUShort();var o=r.parseUShort();var a=o&16;var s=r.parseUShort();var u=r.parseOffset16List(s);var h={lookupType:n,lookupFlag:o,markFilteringSet:a?r.parseUShort():-1};if(n===2){var f=[];for(var c=0;c<s;c++){f.push(l(e,t+u[c]))}h.getKerningValue=function(e,t){for(var r=f.length;r--;){var n=f[r](e,t);if(n!==undefined)return n}return 0}}return h}function h(e,t,r){var a=new i.Parser(e,t);var s=a.parseFixed();n.argument(s===1,"Unsupported GPOS table version.");o(e,t+a.parseUShort());o(e,t+a.parseUShort());var l=a.parseUShort();a.relativeOffset=l;var h=a.parseUShort();var f=a.parseOffset16List(h);var c=t+l;for(var p=0;p<h;p++){var d=u(e,c+f[p]);if(d.lookupType===2&&!r.getGposKerningValue)r.getGposKerningValue=d.getKerningValue}}r.parse=h},{"../check":2,"../parse":9}],16:[function(e,t,r){"use strict";var n=e("../check");var i=e("../parse");var o=e("../table");function a(e,t){var r={};var o=new i.Parser(e,t);r.version=o.parseVersion();r.fontRevision=Math.round(o.parseFixed()*1e3)/1e3;r.checkSumAdjustment=o.parseULong();r.magicNumber=o.parseULong();n.argument(r.magicNumber===1594834165,"Font header has wrong magic number.");r.flags=o.parseUShort();r.unitsPerEm=o.parseUShort();r.created=o.parseLongDateTime();r.modified=o.parseLongDateTime();r.xMin=o.parseShort();r.yMin=o.parseShort();r.xMax=o.parseShort();r.yMax=o.parseShort();r.macStyle=o.parseUShort();r.lowestRecPPEM=o.parseUShort();r.fontDirectionHint=o.parseShort();r.indexToLocFormat=o.parseShort();r.glyphDataFormat=o.parseShort();return r}function s(e){return new o.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:0},{name:"modified",type:"LONGDATETIME",value:0},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}r.parse=a;r.make=s},{"../check":2,"../parse":9,"../table":11}],17:[function(e,t,r){"use strict";var n=e("../parse");var i=e("../table");function o(e,t){var r={};var i=new n.Parser(e,t);r.version=i.parseVersion();r.ascender=i.parseShort();r.descender=i.parseShort();r.lineGap=i.parseShort();r.advanceWidthMax=i.parseUShort();r.minLeftSideBearing=i.parseShort();r.minRightSideBearing=i.parseShort();r.xMaxExtent=i.parseShort();r.caretSlopeRise=i.parseShort();r.caretSlopeRun=i.parseShort();r.caretOffset=i.parseShort();i.relativeOffset+=8;r.metricDataFormat=i.parseShort();r.numberOfHMetrics=i.parseUShort();return r}function a(e){return new i.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}r.parse=o;r.make=a},{"../parse":9,"../table":11}],18:[function(e,t,r){"use strict";var n=e("../parse");var i=e("../table");function o(e,t,r,i,o){var a;var s;var l=new n.Parser(e,t);for(var u=0;u<i;u+=1){if(u<r){a=l.parseUShort();s=l.parseShort()}var h=o.get(u);h.advanceWidth=a;h.leftSideBearing=s}}function a(e){var t=new i.Table("hmtx",[]);for(var r=0;r<e.length;r+=1){var n=e.get(r);var o=n.advanceWidth||0;var a=n.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+r,type:"USHORT",value:o});t.fields.push({name:"leftSideBearing_"+r,type:"SHORT",value:a})}return t}r.parse=o;r.make=a},{"../parse":9,"../table":11}],19:[function(e,t,r){"use strict";var n=e("../check");var i=e("../parse");function o(e,t){var r={};var o=new i.Parser(e,t);var a=o.parseUShort();n.argument(a===0,"Unsupported kern table version.");o.skip("uShort",1);var s=o.parseUShort();n.argument(s===0,"Unsupported kern sub-table version.");o.skip("uShort",2);var l=o.parseUShort();o.skip("uShort",3);for(var u=0;u<l;u+=1){var h=o.parseUShort();var f=o.parseUShort();var c=o.parseShort();r[h+","+f]=c}return r}r.parse=o},{"../check":2,"../parse":9}],20:[function(e,t,r){"use strict";var n=e("../parse");function i(e,t,r,i){var o=new n.Parser(e,t);var a=i?o.parseUShort:o.parseULong;var s=[];for(var l=0;l<r+1;l+=1){var u=a.call(o);if(i){u*=2}s.push(u)}return s}r.parse=i},{"../parse":9}],21:[function(e,t,r){"use strict";var n=e("../parse");var i=e("../table");function o(e,t){var r={};var i=new n.Parser(e,t);r.version=i.parseVersion();r.numGlyphs=i.parseUShort();if(r.version===1){r.maxPoints=i.parseUShort();r.maxContours=i.parseUShort();r.maxCompositePoints=i.parseUShort();r.maxCompositeContours=i.parseUShort();r.maxZones=i.parseUShort();r.maxTwilightPoints=i.parseUShort();r.maxStorage=i.parseUShort();r.maxFunctionDefs=i.parseUShort();r.maxInstructionDefs=i.parseUShort();r.maxStackElements=i.parseUShort();r.maxSizeOfInstructions=i.parseUShort();r.maxComponentElements=i.parseUShort();r.maxComponentDepth=i.parseUShort()}return r}function a(e){return new i.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}r.parse=o;r.make=a},{"../parse":9,"../table":11}],22:[function(e,t,r){"use strict";var n=e("../types").encode;var i=e("../parse");var o=e("../table");var a=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","licence","licenceURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"];function s(e,t){var r={};var n=new i.Parser(e,t);r.format=n.parseUShort();var o=n.parseUShort();var s=n.offset+n.parseUShort();var l=0;for(var u=0;u<o;u++){var h=n.parseUShort();var f=n.parseUShort();var c=n.parseUShort();var p=n.parseUShort();var d=a[p];var m=n.parseUShort();var g=n.parseUShort();if(h===3&&f===1&&c===1033){var v=[];var y=m/2;for(var _=0;_<y;_++,g+=2){v[_]=i.getShort(e,s+g)}var b=String.fromCharCode.apply(null,v);if(d){r[d]=b}else{l++;r["unknown"+l]=b}}}if(r.format===1){r.langTagCount=n.parseUShort()}return r}function l(e,t,r,n,i,a){return new o.Table("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:r},{name:"nameID",type:"USHORT",value:n},{name:"length",type:"USHORT",value:i},{name:"offset",type:"USHORT",value:a}])}function u(e,t,r,i){var o=n.STRING(r);e.records.push(l(1,0,0,t,o.length,i));e.strings.push(o);i+=o.length;return i}function h(e,t,r,i){var o=n.UTF16(r);e.records.push(l(3,1,1033,t,o.length,i));e.strings.push(o);i+=o.length;return i}function f(e){var t=new o.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:0},{name:"stringOffset",type:"USHORT",value:0}]);t.records=[];t.strings=[];var r=0;var n;var i;for(n=0;n<a.length;n+=1){if(e[a[n]]!==undefined){i=e[a[n]];r=u(t,n,i,r)}}for(n=0;n<a.length;n+=1){if(e[a[n]]!==undefined){i=e[a[n]];r=h(t,n,i,r)}}t.count=t.records.length;t.stringOffset=6+t.count*12;for(n=0;n<t.records.length;n+=1){t.fields.push({name:"record_"+n,type:"TABLE",value:t.records[n]})}for(n=0;n<t.strings.length;n+=1){t.fields.push({name:"string_"+n,type:"LITERAL",value:t.strings[n]})}return t}r.parse=s;r.make=f},{"../parse":9,"../table":11,"../types":26}],23:[function(e,t,r){"use strict";var n=e("../parse");var i=e("../table");var o=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function a(e){for(var t=0;t<o.length;t+=1){var r=o[t];if(e>=r.begin&&e<r.end){return t}}return-1}function s(e,t){var r={};var i=new n.Parser(e,t);r.version=i.parseUShort();r.xAvgCharWidth=i.parseShort();r.usWeightClass=i.parseUShort();r.usWidthClass=i.parseUShort();r.fsType=i.parseUShort();r.ySubscriptXSize=i.parseShort();r.ySubscriptYSize=i.parseShort();r.ySubscriptXOffset=i.parseShort();r.ySubscriptYOffset=i.parseShort();r.ySuperscriptXSize=i.parseShort();r.ySuperscriptYSize=i.parseShort();r.ySuperscriptXOffset=i.parseShort();r.ySuperscriptYOffset=i.parseShort();r.yStrikeoutSize=i.parseShort();r.yStrikeoutPosition=i.parseShort();r.sFamilyClass=i.parseShort();r.panose=[];for(var o=0;o<10;o++){r.panose[o]=i.parseByte()}r.ulUnicodeRange1=i.parseULong();r.ulUnicodeRange2=i.parseULong();r.ulUnicodeRange3=i.parseULong();r.ulUnicodeRange4=i.parseULong();r.achVendID=String.fromCharCode(i.parseByte(),i.parseByte(),i.parseByte(),i.parseByte());r.fsSelection=i.parseUShort();r.usFirstCharIndex=i.parseUShort();r.usLastCharIndex=i.parseUShort();r.sTypoAscender=i.parseShort();r.sTypoDescender=i.parseShort();r.sTypoLineGap=i.parseShort();r.usWinAscent=i.parseUShort();r.usWinDescent=i.parseUShort();if(r.version>=1){r.ulCodePageRange1=i.parseULong();r.ulCodePageRange2=i.parseULong()}if(r.version>=2){r.sxHeight=i.parseShort();r.sCapHeight=i.parseShort();r.usDefaultChar=i.parseUShort();r.usBreakChar=i.parseUShort();r.usMaxContent=i.parseUShort()}return r}function l(e){return new i.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)}r.unicodeRanges=o;r.getUnicodeRange=a;r.parse=s;r.make=l},{"../parse":9,"../table":11}],24:[function(e,t,r){"use strict";var n=e("../encoding");var i=e("../parse");var o=e("../table");function a(e,t){var r={};var o=new i.Parser(e,t);var a;r.version=o.parseVersion();r.italicAngle=o.parseFixed();r.underlinePosition=o.parseShort();r.underlineThickness=o.parseShort();r.isFixedPitch=o.parseULong();r.minMemType42=o.parseULong();r.maxMemType42=o.parseULong();r.minMemType1=o.parseULong();r.maxMemType1=o.parseULong();switch(r.version){case 1:r.names=n.standardNames.slice();break;case 2:r.numberOfGlyphs=o.parseUShort();r.glyphNameIndex=new Array(r.numberOfGlyphs);for(a=0;a<r.numberOfGlyphs;a++){r.glyphNameIndex[a]=o.parseUShort()}r.names=[];for(a=0;a<r.numberOfGlyphs;a++){if(r.glyphNameIndex[a]>=n.standardNames.length){var s=o.parseChar();r.names.push(o.parseString(s))}}break;case 2.5:r.numberOfGlyphs=o.parseUShort();r.offset=new Array(r.numberOfGlyphs);for(a=0;a<r.numberOfGlyphs;a++){r.offset[a]=o.parseChar()}break}return r}function s(){return new o.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}r.parse=a;r.make=s},{"../encoding":4,"../parse":9,"../table":11}],25:[function(e,t,r){"use strict";var n=e("../check");var i=e("../table");var o=e("./cmap");var a=e("./cff");var s=e("./head");var l=e("./hhea");var u=e("./hmtx");var h=e("./maxp");var f=e("./name");var c=e("./os2");var p=e("./post");function d(e){return Math.log(e)/Math.log(2)|0}function m(e){while(e.length%4!==0){e.push(0)}var t=0;for(var r=0;r<e.length;r+=4){t+=(e[r]<<24)+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3]}t%=Math.pow(2,32);return t}function g(e,t,r,n){return new i.Table("Table Record",[{name:"tag",type:"TAG",value:e!==undefined?e:""},{name:"checkSum",type:"ULONG",value:t!==undefined?t:0},{name:"offset",type:"ULONG",value:r!==undefined?r:0},{name:"length",type:"ULONG",value:n!==undefined?n:0}])}function v(e){var t=new i.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e;t.numTables=e.length;var r=Math.pow(2,d(t.numTables));t.searchRange=16*r;t.entrySelector=d(r);t.rangeShift=t.numTables*16-t.searchRange;var o=[];var a=[];var s=t.sizeOf()+g().sizeOf()*t.numTables;while(s%4!==0){s+=1;a.push({name:"padding",type:"BYTE",value:0})}for(var l=0;l<e.length;l+=1){var u=e[l];n.argument(u.tableName.length===4,"Table name"+u.tableName+" is invalid.");var h=u.sizeOf();var f=g(u.tableName,m(u.encode()),s,h);o.push({name:f.tag+" Table Record",type:"TABLE",value:f});a.push({name:u.tableName+" table",type:"TABLE",value:u});s+=h;n.argument(!isNaN(s),"Something went wrong calculating the offset.");while(s%4!==0){s+=1;a.push({name:"padding",type:"BYTE",value:0})}}o.sort(function(e,t){if(e.value.tag>t.value.tag){return 1}else{return-1}});t.fields=t.fields.concat(o);t.fields=t.fields.concat(a);return t}function y(e,t,r){for(var n=0;n<t.length;n+=1){var i=e.charToGlyphIndex(t[n]);if(i>0){var o=e.glyphs.get(i);return o.getMetrics()}}return r}function _(e){var t=0;for(var r=0;r<e.length;r+=1){t+=e[r]}return t/e.length}function b(e){var t=[];var r=[];var n=[];var i=[];var d=[];var g=[];var b=[];var x;var w=0;var S=0;var C=0;var T=0;var E=0;for(var R=0;R<e.glyphs.length;R+=1){var A=e.glyphs.get(R);var M=A.unicode|0;if(x>M||x===null){x=M}if(w<M){w=M}var N=c.getUnicodeRange(M);if(N<32){S|=1<<N}else if(N<64){C|=1<<N-32}else if(N<96){T|=1<<N-64}else if(N<123){E|=1<<N-96}else{throw new Error("Unicode ranges bits > 123 are reserved for internal usage")}if(A.name===".notdef")continue;var D=A.getMetrics();t.push(D.xMin);r.push(D.yMin);n.push(D.xMax);i.push(D.yMax);g.push(D.leftSideBearing);b.push(D.rightSideBearing);d.push(A.advanceWidth)}var k={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,n),yMax:Math.max.apply(null,i),advanceWidthMax:Math.max.apply(null,d),advanceWidthAvg:_(d),minLeftSideBearing:Math.min.apply(null,g),maxLeftSideBearing:Math.max.apply(null,g),minRightSideBearing:Math.min.apply(null,b)};k.ascender=e.ascender!==undefined?e.ascender:k.yMax;k.descender=e.descender!==undefined?e.descender:k.yMin;var I=s.make({unitsPerEm:e.unitsPerEm,xMin:k.xMin,yMin:k.yMin,xMax:k.xMax,yMax:k.yMax});var P=l.make({ascender:k.ascender,descender:k.descender,advanceWidthMax:k.advanceWidthMax,minLeftSideBearing:k.minLeftSideBearing,minRightSideBearing:k.minRightSideBearing,xMaxExtent:k.maxLeftSideBearing+(k.xMax-k.xMin),numberOfHMetrics:e.glyphs.length});var O=h.make(e.glyphs.length);var L=c.make({xAvgCharWidth:Math.round(k.advanceWidthAvg),usWeightClass:500,usWidthClass:5,usFirstCharIndex:x,usLastCharIndex:w,ulUnicodeRange1:S,ulUnicodeRange2:C,ulUnicodeRange3:T,ulUnicodeRange4:E,sTypoAscender:k.ascender,sTypoDescender:k.descender,sTypoLineGap:0,usWinAscent:k.ascender,usWinDescent:-k.descender,sxHeight:y(e,"xyvw",{yMax:0}).yMax,sCapHeight:y(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",k).yMax,usBreakChar:e.hasChar(" ")?32:0});var U=u.make(e.glyphs);var F=o.make(e.glyphs);var B=e.familyName+" "+e.styleName;var H=e.familyName.replace(/\s/g,"")+"-"+e.styleName;var G=f.make({copyright:e.copyright,fontFamily:e.familyName,fontSubfamily:e.styleName,uniqueID:e.manufacturer+":"+B,fullName:B,version:e.version,postScriptName:H,trademark:e.trademark,manufacturer:e.manufacturer,designer:e.designer,description:e.description,manufacturerURL:e.manufacturerURL,designerURL:e.designerURL,license:e.license,licenseURL:e.licenseURL,preferredFamily:e.familyName,preferredSubfamily:e.styleName});var j=p.make();var V=a.make(e.glyphs,{version:e.version,fullName:B,familyName:e.familyName,weightName:e.styleName,postScriptName:H,unitsPerEm:e.unitsPerEm});var q=[I,P,O,L,G,F,j,V,U];var z=v(q);var W=z.encode();var X=m(W);var Y=z.fields;var Z=false;for(R=0;R<Y.length;R+=1){if(Y[R].name==="head table"){Y[R].value.checkSumAdjustment=2981146554-X;Z=true;break}}if(!Z){throw new Error("Could not find head table with checkSum to adjust.")}return z}r.computeCheckSum=m;r.make=v;r.fontToTable=b},{"../check":2,"../table":11,"./cff":12,"./cmap":13,"./head":16,"./hhea":17,"./hmtx":18,"./maxp":21,"./name":22,"./os2":23,"./post":24}],26:[function(e,t,r){"use strict";var n=e("./check");var i=32768;var o=2147483648;var a={};var s={};var l={};function u(e){return function(){return e}}s.BYTE=function(e){n.argument(e>=0&&e<=255,"Byte value should be between 0 and 255.");return[e]};l.BYTE=u(1);s.CHAR=function(e){return[e.charCodeAt(0)]};l.BYTE=u(1);s.CHARARRAY=function(e){var t=[];for(var r=0;r<e.length;r+=1){t.push(e.charCodeAt(r))}return t};l.CHARARRAY=function(e){return e.length};s.USHORT=function(e){return[e>>8&255,e&255]};l.USHORT=u(2);s.SHORT=function(e){if(e>=i){e=-(2*i-e)}return[e>>8&255,e&255]};l.SHORT=u(2);s.UINT24=function(e){return[e>>16&255,e>>8&255,e&255]};l.UINT24=u(3);s.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,e&255]};l.ULONG=u(4);s.LONG=function(e){if(e>=o){e=-(2*o-e)}return[e>>24&255,e>>16&255,e>>8&255,e&255]};l.LONG=u(4);s.FIXED=s.ULONG;l.FIXED=l.ULONG;s.FWORD=s.SHORT;l.FWORD=l.SHORT;s.UFWORD=s.USHORT;l.UFWORD=l.USHORT;s.LONGDATETIME=function(){return[0,0,0,0,0,0,0,0]};l.LONGDATETIME=u(8);s.TAG=function(e){n.argument(e.length===4,"Tag should be exactly 4 ASCII characters.");return[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]};l.TAG=u(4);s.Card8=s.BYTE;l.Card8=l.BYTE;s.Card16=s.USHORT;l.Card16=l.USHORT;s.OffSize=s.BYTE;l.OffSize=l.BYTE;s.SID=s.USHORT;l.SID=l.USHORT;s.NUMBER=function(e){if(e>=-107&&e<=107){return[e+139]}else if(e>=108&&e<=1131){e=e-108;return[(e>>8)+247,e&255]}else if(e>=-1131&&e<=-108){e=-e-108;return[(e>>8)+251,e&255]}else if(e>=-32768&&e<=32767){return s.NUMBER16(e)}else{return s.NUMBER32(e)}};l.NUMBER=function(e){return s.NUMBER(e).length};s.NUMBER16=function(e){return[28,e>>8&255,e&255]};l.NUMBER16=u(2);s.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,e&255]};l.NUMBER32=u(4);s.REAL=function(e){var t=e.toString();var r=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(r){var n=parseFloat("1e"+((r[2]?+r[2]:0)+r[1].length));t=(Math.round(e*n)/n).toString()}var i="";var o;var a;for(o=0,a=t.length;o<a;o+=1){var s=t[o];if(s==="e"){i+=t[++o]==="-"?"c":"b"}else if(s==="."){i+="a"}else if(s==="-"){i+="e"}else{i+=s}}i+=i.length&1?"f":"ff";var l=[30];for(o=0,a=i.length;o<a;o+=2){l.push(parseInt(i.substr(o,2),16))}return l};l.REAL=function(e){return s.REAL(e).length};s.NAME=s.CHARARRAY;l.NAME=l.CHARARRAY;s.STRING=s.CHARARRAY;l.STRING=l.CHARARRAY;s.UTF16=function(e){var t=[];for(var r=0;r<e.length;r+=1){t.push(0);t.push(e.charCodeAt(r))}return t};l.UTF16=function(e){return e.length*2};s.INDEX=function(e){var t;var r=1;var n=[r];var i=[];var o=0;for(t=0;t<e.length;t+=1){var a=s.OBJECT(e[t]);Array.prototype.push.apply(i,a);o+=a.length;r+=a.length;n.push(r)}if(i.length===0){return[0,0]}var l=[];var u=1+Math.floor(Math.log(o)/Math.log(2))/8|0;var h=[undefined,s.BYTE,s.USHORT,s.UINT24,s.ULONG][u];for(t=0;t<n.length;t+=1){var f=h(n[t]);Array.prototype.push.apply(l,f)}return Array.prototype.concat(s.Card16(e.length),s.OffSize(u),l,i)};l.INDEX=function(e){return s.INDEX(e).length};s.DICT=function(e){var t=[];var r=Object.keys(e);var n=r.length;for(var i=0;i<n;i+=1){var o=parseInt(r[i],0);var a=e[o];t=t.concat(s.OPERAND(a.value,a.type));t=t.concat(s.OPERATOR(o))}return t};l.DICT=function(e){return s.DICT(e).length};s.OPERATOR=function(e){if(e<1200){return[e]}else{return[12,e-1200]}};s.OPERAND=function(e,t){var r=[];if(Array.isArray(t)){for(var i=0;i<t.length;i+=1){n.argument(e.length===t.length,"Not enough arguments given for type"+t);r=r.concat(s.OPERAND(e[i],t[i]))}}else{if(t==="SID"){r=r.concat(s.NUMBER(e))}else if(t==="offset"){r=r.concat(s.NUMBER32(e))}else if(t==="number"){r=r.concat(s.NUMBER(e))}else if(t==="real"){r=r.concat(s.REAL(e))}else{throw new Error("Unknown operand type "+t)}}return r};s.OP=s.BYTE;l.OP=l.BYTE;var h=typeof WeakMap==="function"&&new WeakMap;s.CHARSTRING=function(e){if(h&&h.has(e)){return h.get(e)}var t=[];var r=e.length;for(var n=0;n<r;n+=1){var i=e[n];t=t.concat(s[i.type](i.value))}if(h){h.set(e,t)}return t};l.CHARSTRING=function(e){return s.CHARSTRING(e).length};s.OBJECT=function(e){var t=s[e.type];n.argument(t!==undefined,"No encoding function for type "+e.type);return t(e.value)};s.TABLE=function(e){var t=[];var r=e.fields.length;for(var i=0;i<r;i+=1){var o=e.fields[i];var a=s[o.type];n.argument(a!==undefined,"No encoding function for field type "+o.type);var l=e[o.name];if(l===undefined){l=o.value}var u=a(l);t=t.concat(u)}return t};s.LITERAL=function(e){return e};l.LITERAL=function(e){return e.length};r.decode=a;
r.encode=s;r.sizeOf=l},{"./check":2}],27:[function(_dereq_,module,exports){!function(e,t,r){if(typeof module!="undefined"&&module.exports)module.exports=r();else if(typeof define=="function"&&define.amd)define(r);else t[e]=r()}("reqwest",this,function(){var win=window,doc=document,httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray=typeof Array.isArray=="function"?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(e["crossOrigin"]===true){var t=win[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t){return t}else if(win[xDomainRequest]){return new XDomainRequest}else{throw new Error("Browser does not support cross-origin requests")}}else if(win[xmlHttpRequest]){return new XMLHttpRequest}else{return new ActiveXObject("Microsoft.XMLHTTP")}},globalSetupOptions={dataFilter:function(e){return e}};function succeed(e){var t=protocolRe.exec(e.url);t=t&&t[1]||window.location.protocol;return httpsRe.test(t)?twoHundo.test(e.request.status):!!e.request.response}function handleReadyState(e,t,r){return function(){if(e._aborted)return r(e.request);if(e._timedOut)return r(e.request,"Request is aborted: timeout");if(e.request&&e.request[readyState]==4){e.request.onreadystatechange=noop;if(succeed(e))t(e.request);else r(e.request)}}}function setHeaders(e,t){var r=t["headers"]||{},n;r["Accept"]=r["Accept"]||defaultHeaders["accept"][t["type"]]||defaultHeaders["accept"]["*"];var i=typeof FormData==="function"&&t["data"]instanceof FormData;if(!t["crossOrigin"]&&!r[requestedWith])r[requestedWith]=defaultHeaders["requestedWith"];if(!r[contentType]&&!i)r[contentType]=t["contentType"]||defaultHeaders["contentType"];for(n in r)r.hasOwnProperty(n)&&"setRequestHeader"in e&&e.setRequestHeader(n,r[n])}function setCredentials(e,t){if(typeof t["withCredentials"]!=="undefined"&&typeof e.withCredentials!=="undefined"){e.withCredentials=!!t["withCredentials"]}}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,r,n){var i=uniqid++,o=e["jsonpCallback"]||"callback",a=e["jsonpCallbackName"]||reqwest.getcallbackPrefix(i),s=new RegExp("((^|\\?|&)"+o+")=([^&]+)"),l=n.match(s),u=doc.createElement("script"),h=0,f=navigator.userAgent.indexOf("MSIE 10.0")!==-1;if(l){if(l[3]==="?"){n=n.replace(s,"$1="+a)}else{a=l[3]}}else{n=urlappend(n,o+"="+a)}win[a]=generalCallback;u.type="text/javascript";u.src=n;u.async=true;if(typeof u.onreadystatechange!=="undefined"&&!f){u.htmlFor=u.id="_reqwest_"+i}u.onload=u.onreadystatechange=function(){if(u[readyState]&&u[readyState]!=="complete"&&u[readyState]!=="loaded"||h){return false}u.onload=u.onreadystatechange=null;u.onclick&&u.onclick();t(lastValue);lastValue=undefined;head.removeChild(u);h=1};head.appendChild(u);return{abort:function(){u.onload=u.onreadystatechange=null;r({},"Request is aborted: timeout",{});lastValue=undefined;head.removeChild(u);h=1}}}function getRequest(e,t){var r=this.o,n=(r["method"]||"GET").toUpperCase(),i=typeof r==="string"?r:r["url"],o=r["processData"]!==false&&r["data"]&&typeof r["data"]!=="string"?reqwest.toQueryString(r["data"]):r["data"]||null,a,s=false;if((r["type"]=="jsonp"||n=="GET")&&o){i=urlappend(i,o);o=null}if(r["type"]=="jsonp")return handleJsonp(r,e,t,i);a=r.xhr&&r.xhr(r)||xhr(r);a.open(n,i,r["async"]===false?false:true);setHeaders(a,r);setCredentials(a,r);if(win[xDomainRequest]&&a instanceof win[xDomainRequest]){a.onload=e;a.onerror=t;a.onprogress=function(){};s=true}else{a.onreadystatechange=handleReadyState(this,e,t)}r["before"]&&r["before"](a);if(s){setTimeout(function(){a.send(o)},200)}else{a.send(o)}return a}function Reqwest(e,t){this.o=e;this.fn=t;init.apply(this,arguments)}function setType(e){if(e.match("json"))return"json";if(e.match("javascript"))return"js";if(e.match("text"))return"html";if(e.match("xml"))return"xml"}function init(o,fn){this.url=typeof o=="string"?o:o["url"];this.timeout=null;this._fulfilled=false;this._successHandler=function(){};this._fulfillmentHandlers=[];this._errorHandlers=[];this._completeHandlers=[];this._erred=false;this._responseArgs={};var self=this;fn=fn||function(){};if(o["timeout"]){this.timeout=setTimeout(function(){timedOut()},o["timeout"])}if(o["success"]){this._successHandler=function(){o["success"].apply(o,arguments)}}if(o["error"]){this._errorHandlers.push(function(){o["error"].apply(o,arguments)})}if(o["complete"]){this._completeHandlers.push(function(){o["complete"].apply(o,arguments)})}function complete(e){o["timeout"]&&clearTimeout(self.timeout);self.timeout=null;while(self._completeHandlers.length>0){self._completeHandlers.shift()(e)}}function success(resp){var type=o["type"]||resp&&setType(resp.getResponseHeader("Content-Type"));resp=type!=="jsonp"?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r){switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML;break}}self._responseArgs.resp=resp;self._fulfilled=true;fn(resp);self._successHandler(resp);while(self._fulfillmentHandlers.length>0){resp=self._fulfillmentHandlers.shift()(resp)}complete(resp)}function timedOut(){self._timedOut=true;self.request.abort()}function error(e,t,r){e=self.request;self._responseArgs.resp=e;self._responseArgs.msg=t;self._responseArgs.t=r;self._erred=true;while(self._errorHandlers.length>0){self._errorHandlers.shift()(e,t,r)}complete(e)}this.request=getRequest.call(this,success,error)}Reqwest.prototype={abort:function(){this._aborted=true;this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){e=e||function(){};t=t||function(){};if(this._fulfilled){this._responseArgs.resp=e(this._responseArgs.resp)}else if(this._erred){t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t)}else{this._fulfillmentHandlers.push(e);this._errorHandlers.push(t)}return this},always:function(e){if(this._fulfilled||this._erred){e(this._responseArgs.resp)}else{this._completeHandlers.push(e)}return this},fail:function(e){if(this._erred){e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t)}else{this._errorHandlers.push(e)}return this},"catch":function(e){return this.fail(e)}};function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var r=e.name,n=e.tagName.toLowerCase(),i=function(e){if(e&&!e["disabled"])t(r,normalize(e["attributes"]["value"]&&e["attributes"]["value"]["specified"]?e["value"]:e["text"]))},o,a,s,l;if(e.disabled||!r)return;switch(n){case"input":if(!/reset|button|image|file/i.test(e.type)){o=/checkbox/i.test(e.type);a=/radio/i.test(e.type);s=e.value;(!(o||a)||e.checked)&&t(r,normalize(o&&s===""?"on":s))}break;case"textarea":t(r,normalize(e.value));break;case"select":if(e.type.toLowerCase()==="select-one"){i(e.selectedIndex>=0?e.options[e.selectedIndex]:null)}else{for(l=0;e.length&&l<e.length;l++){e.options[l].selected&&i(e.options[l])}}break}}function eachFormElement(){var e=this,t,r,n=function(t,r){var n,i,o;for(n=0;n<r.length;n++){o=t[byTag](r[n]);for(i=0;i<o.length;i++)serial(o[i],e)}};for(r=0;r<arguments.length;r++){t=arguments[r];if(/input|select|textarea/i.test(t.tagName))serial(t,e);n(t,["input","select","textarea"])}}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};eachFormElement.apply(function(t,r){if(t in e){e[t]&&!isArray(e[t])&&(e[t]=[e[t]]);e[t].push(r)}else e[t]=r},arguments);return e}reqwest.serializeArray=function(){var e=[];eachFormElement.apply(function(t,r){e.push({name:t,value:r})},arguments);return e};reqwest.serialize=function(){if(arguments.length===0)return"";var e,t,r=Array.prototype.slice.call(arguments,0);e=r.pop();e&&e.nodeType&&r.push(e)&&(e=null);e&&(e=e.type);if(e=="map")t=serializeHash;else if(e=="array")t=reqwest.serializeArray;else t=serializeQueryString;return t.apply(null,r)};reqwest.toQueryString=function(e,t){var r,n,i=t||false,o=[],a=encodeURIComponent,s=function(e,t){t="function"===typeof t?t():t==null?"":t;o[o.length]=a(e)+"="+a(t)};if(isArray(e)){for(n=0;e&&n<e.length;n++)s(e[n]["name"],e[n]["value"])}else{for(r in e){if(e.hasOwnProperty(r))buildParams(r,e[r],i,s)}}return o.join("&").replace(/%20/g,"+")};function buildParams(e,t,r,n){var i,o,a,s=/\[\]$/;if(isArray(t)){for(o=0;t&&o<t.length;o++){a=t[o];if(r||s.test(e)){n(e,a)}else{buildParams(e+"["+(typeof a==="object"?o:"")+"]",a,r,n)}}}else if(t&&t.toString()==="[object Object]"){for(i in t){buildParams(e+"["+i+"]",t[i],r,n)}}else{n(e,t)}}reqwest.getcallbackPrefix=function(){return callbackPrefix};reqwest.compat=function(e,t){if(e){e["type"]&&(e["method"]=e["type"])&&delete e["type"];e["dataType"]&&(e["type"]=e["dataType"]);e["jsonpCallback"]&&(e["jsonpCallbackName"]=e["jsonpCallback"])&&delete e["jsonpCallback"];e["jsonp"]&&(e["jsonpCallback"]=e["jsonp"])}return new Reqwest(e,t)};reqwest.ajaxSetup=function(e){e=e||{};for(var t in e){globalSetupOptions[t]=e[t]}};return reqwest})},{}],28:[function(e,t,r){"use strict";var n=e("../core/core");e("./p5.Geometry3D");n.prototype.plane=function(e,t){e=e||50;t=t||50;var r=typeof arguments[2]===Number?arguments[2]:1;var i=typeof arguments[3]===Number?arguments[3]:1;var o="plane|"+e+"|"+t+"|"+r+"|"+i;if(!this._renderer.geometryInHash(o)){var a=new n.Geometry3D;var s=function(r,i){var o=2*e*r-e;var a=2*t*i-t;var s=0;return new n.Vector(o,a,s)};a.parametricGeometry(s,r,i);var l=a.generateObj();this._renderer.initBuffer(o,[l])}this._renderer.drawBuffer(o)};n.prototype.sphere=function(e,t){e=e||50;var r=t||24;var i=t||16;var o="sphere|"+e+"|"+r+"|"+i;if(!this._renderer.geometryInHash(o)){var a=new n.Geometry3D;var s=function(t,r){var i=2*Math.PI*t;var o=Math.PI*r-Math.PI/2;var a=e*Math.cos(o)*Math.sin(i);var s=e*Math.sin(o);var l=e*Math.cos(o)*Math.cos(i);return new n.Vector(a,s,l)};a.parametricGeometry(s,r,i);var l=a.generateObj(true,true);this._renderer.initBuffer(o,[l])}this._renderer.drawBuffer(o);return this};n.prototype.ellipsoid=function(e,t,r,i){e=e||50;t=t||50;r=r||50;var o=i||24;var a=i||24;var s="ellipsoid|"+e+"|"+t+"|"+r+"|"+o+"|"+a;if(!this._renderer.geometryInHash(s)){var l=new n.Geometry3D;var u=function(i,o){var a=2*Math.PI*i;var s=Math.PI*o-Math.PI/2;var l=e*Math.cos(s)*Math.sin(a);var u=t*Math.sin(s);var h=r*Math.cos(s)*Math.cos(a);return new n.Vector(l,u,h)};l.parametricGeometry(u,o,a);var h=l.generateObj(true,true);this._renderer.initBuffer(s,[h])}this._renderer.drawBuffer(s);return this};n.prototype.cylinder=function(e,t,r){e=e||50;t=t||50;var i=r||24;var o=r||16;var a="cylinder|"+e+"|"+t+"|"+i+"|"+o;if(!this._renderer.geometryInHash(a)){var s=new n.Geometry3D;var l=function(r,i){var o=2*Math.PI*r;var a=e*Math.sin(o);var s=2*t*i-t;var l=e*Math.cos(o);return new n.Vector(a,s,l)};s.parametricGeometry(l,i,o);var u=s.generateObj(true);var h=function(r,i){var o=2*Math.PI*r;var a=e*Math.sin(-o);var s=t;var l=e*Math.cos(o);if(i===0){return new n.Vector(0,t,0)}else{return new n.Vector(a,s,l)}};var f=new n.Geometry3D;f.parametricGeometry(h,i,1);var c=f.generateObj();var p=function(r,i){var o=2*Math.PI*r;var a=e*Math.sin(o);var s=-t;var l=e*Math.cos(o);if(i===0){return new n.Vector(0,-t,0)}else{return new n.Vector(a,s,l)}};var d=new n.Geometry3D;d.parametricGeometry(p,i,1);var m=d.generateObj();this._renderer.initBuffer(a,[u,c,m])}this._renderer.drawBuffer(a);return this};n.prototype.cone=function(e,t,r){e=e||50;t=t||50;var i=r||24;var o=r||16;var a="cone|"+e+"|"+t+"|"+i+"|"+o;if(!this._renderer.geometryInHash(a)){var s=new n.Geometry3D;var l=function(r,i){var o=2*Math.PI*r;var a=e*(1-i)*Math.sin(o);var s=2*t*i-t;var l=e*(1-i)*Math.cos(o);return new n.Vector(a,s,l)};s.parametricGeometry(l,i,o);var u=s.generateObj(true);var h=new n.Geometry3D;var f=function(r,i){var o=2*Math.PI*r;var a=e*(1-i)*Math.sin(-o);var s=-t;var l=e*(1-i)*Math.cos(o);return new n.Vector(a,s,l)};h.parametricGeometry(f,i,1);var c=h.generateObj();this._renderer.initBuffer(a,[u,c])}this._renderer.drawBuffer(a);return this};n.prototype.torus=function(e,t,r){e=e||50;t=t||10;var i=r||24;var o=r||16;var a="torus|"+e+"|"+t+"|"+i+"|"+o;if(!this._renderer.geometryInHash(a)){var s=new n.Geometry3D;var l=function(r,i){var o=2*Math.PI*r;var a=2*Math.PI*i;var s=(e+t*Math.cos(a))*Math.cos(o);var l=(e+t*Math.cos(a))*Math.sin(o);var u=t*Math.sin(a);return new n.Vector(s,l,u)};s.parametricGeometry(l,i,o);var u=s.generateObj(true);this._renderer.initBuffer(a,[u])}this._renderer.drawBuffer(a);return this};n.prototype.box=function(e,t,r){e=e||50;t=t||e;r=r||e;var i=typeof arguments[3]===Number?arguments[3]:1;var o=typeof arguments[4]===Number?arguments[4]:1;var a="cube|"+e+"|"+t+"|"+r+"|"+i+"|"+o;if(!this._renderer.geometryInHash(a)){var s=new n.Geometry3D;var l=function(i,o){var a=2*e*i-e;var s=2*t*o-t;var l=r;return new n.Vector(a,s,l)};var u=function(i,o){var a=2*e*(1-i)-e;var s=2*t*o-t;var l=-r;return new n.Vector(a,s,l)};var h=function(i,o){var a=2*e*(1-i)-e;var s=t;var l=2*r*o-r;return new n.Vector(a,s,l)};var f=function(i,o){var a=2*e*i-e;var s=-t;var l=2*r*o-r;return new n.Vector(a,s,l)};var c=function(i,o){var a=e;var s=2*t*i-t;var l=2*r*o-r;return new n.Vector(a,s,l)};var p=function(i,o){var a=-e;var s=2*t*(1-i)-t;var l=2*r*o-r;return new n.Vector(a,s,l)};s.parametricGeometry(l,i,o,s.vertices.length);s.parametricGeometry(u,i,o,s.vertices.length);s.parametricGeometry(h,i,o,s.vertices.length);s.parametricGeometry(f,i,o,s.vertices.length);s.parametricGeometry(c,i,o,s.vertices.length);s.parametricGeometry(p,i,o,s.vertices.length);var d=s.generateObj();this._renderer.initBuffer(a,[d])}this._renderer.drawBuffer(a);return this};t.exports=n},{"../core/core":48,"./p5.Geometry3D":34}],29:[function(e,t,r){"use strict";var n=e("../core/core");n.prototype.camera=function(e,t,r){var n=new Array(arguments.length);for(var i=0;i<n.length;++i){n[i]=arguments[i]}this._validateParameters("camera",n,["Number","Number","Number"]);this._renderer.translate(-e,-t,-r)};n.prototype.perspective=function(e,t,r,i){var o=new Array(arguments.length);for(var a=0;a<o.length;++a){o[a]=arguments[a]}this._validateParameters("perspective",o,["Number","Number","Number","Number"]);this._renderer.uPMatrix=n.Matrix.identity();this._renderer.uPMatrix.perspective(e,t,r,i);this._renderer._setCamera=true};n.prototype.ortho=function(e,t,r,i,o,a){var s=new Array(arguments.length);for(var l=0;l<s.length;++l){s[l]=arguments[l]}this._validateParameters("ortho",s,["Number","Number","Number","Number","Number","Number"]);e/=this.width;t/=this.width;i/=this.height;r/=this.height;this._renderer.uPMatrix=n.Matrix.identity();this._renderer.uPMatrix.ortho(e,t,r,i,o,a);this._renderer._setCamera=true};t.exports=n},{"../core/core":48}],30:[function(e,t,r){"use strict";var n=e("../core/core");n.Renderer3D.prototype._primitives2D=function(e){this._setDefaultCamera();var t=this.GL;var r=this._getColorVertexShader();var n=this.verticeBuffer;t.bindBuffer(t.ARRAY_BUFFER,n);t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW);t.vertexAttribPointer(r.vertexPositionAttribute,3,t.FLOAT,false,0,0);var i=this.colorBuffer;t.bindBuffer(t.ARRAY_BUFFER,i);var o=this._getCurColor();var a=[];for(var s=0;s<e.length/3;s++){a=a.concat(o)}t.bufferData(t.ARRAY_BUFFER,new Float32Array(a),t.STATIC_DRAW);t.vertexAttribPointer(r.vertexColorAttribute,4,t.FLOAT,false,0,0);var l="vertexColorVert|vertexColorFrag";this.setMatrixUniforms(l)};n.Renderer3D.prototype.point=function(e,t,r){var n=this.GL;this._primitives2D([e,t,r]);n.drawArrays(n.POINTS,0,1);return this};n.Renderer3D.prototype.line=function(e,t,r,n,i,o){var a=this.GL;this._primitives2D([e,t,r,n,i,o]);a.drawArrays(a.LINES,0,2);return this};n.Renderer3D.prototype.triangle=function(e,t,r,n,i,o,a,s,l){var u=this.GL;this._primitives2D([e,t,r,n,i,o,a,s,l]);this._strokeCheck();u.drawArrays(u.TRIANGLES,0,3);return this};n.Renderer3D.prototype.quad=function(e,t,r,n,i,o,a,s,l,u,h,f){var c=this.GL;this._primitives2D([e,t,r,n,i,o,a,s,l,u,h,f]);this._strokeCheck();c.drawArrays(c.TRIANGLE_STRIP,0,4);return this};n.Renderer3D.prototype.beginShape=function(e){this.shapeMode=e;this.verticeStack=[];return this};n.Renderer3D.prototype.vertex=function(e,t,r){this.verticeStack.push(e,t,r);return this};n.Renderer3D.prototype.endShape=function(){var e=this.GL;this._primitives2D(this.verticeStack);this.verticeStack=[];switch(this.shapeMode){case"POINTS":e.drawArrays(e.POINTS,0,1);break;case"LINES":e.drawArrays(e.LINES,0,2);break;case"TRIANGLES":this._strokeCheck();e.drawArrays(e.TRIANGLES,0,3);break;case"TRIANGLE_STRIP":this._strokeCheck();e.drawArrays(e.TRIANGLE_STRIP,0,4);break;default:this._strokeCheck();e.drawArrays(e.TRIANGLES,0,3);break}return this};n.Renderer3D.prototype._strokeCheck=function(){if(this.drawMode==="stroke"){throw new Error("stroke for shapes in 3D not yet implemented, use fill for now :(")}};n.Renderer3D.prototype.strokeWeight=function(){throw new Error("strokeWeight for 3d not yet implemented")};n.Renderer3D.prototype.fill=function(e,t,r,n){var i=this._pInst.color.apply(this._pInst,arguments);var o=i._array;this.curColor=o;this.drawMode="fill";return this};n.Renderer3D.prototype.stroke=function(e,t,r,n){var i=this._pInst.color.apply(this._pInst,arguments);var o=i._array;this.curColor=o;this.drawMode="stroke";return this};n.Renderer3D.prototype._getColorVertexShader=function(){var e=this.GL;var t="vertexColorVert|vertexColorFrag";var r;if(!this.materialInHash(t)){r=this.initShaders("vertexColorVert","vertexColorFrag",true);this.mHash[t]=r;r.vertexColorAttribute=e.getAttribLocation(r,"aVertexColor");e.enableVertexAttribArray(r.vertexColorAttribute)}else{r=this.mHash[t]}return r};t.exports=n.Renderer3D},{"../core/core":48}],31:[function(e,t,r){"use strict";var n=e("../core/core");n.prototype.orbitControl=function(){if(this.mouseIsPressed){this.rotateY((this.mouseX-this.width/2)/(this.width/2));this.rotateX((this.mouseY-this.height/2)/(this.width/2))}return this};t.exports=n},{"../core/core":48}],32:[function(e,t,r){"use strict";var n=e("../core/core");n.prototype.ambientLight=function(e,t,r,n){var i=this._renderer.GL;var o=this._renderer._getShader("lightVert","lightTextureFrag");i.useProgram(o);o.uAmbientColor=i.getUniformLocation(o,"uAmbientColor["+this._renderer.ambientLightCount+"]");var a=this._renderer._pInst.color.apply(this._renderer._pInst,arguments);var s=a._array;i.uniform3f(o.uAmbientColor,s[0],s[1],s[2]);o.uMaterialColor=i.getUniformLocation(o,"uMaterialColor");i.uniform4f(o.uMaterialColor,1,1,1,1);this._renderer.ambientLightCount++;o.uAmbientLightCount=i.getUniformLocation(o,"uAmbientLightCount");i.uniform1i(o.uAmbientLightCount,this._renderer.ambientLightCount);return this};n.prototype.directionalLight=function(e,t,r,n,i,o,a){var s=this._renderer.GL;var l=this._renderer._getShader("lightVert","lightTextureFrag");s.useProgram(l);l.uDirectionalColor=s.getUniformLocation(l,"uDirectionalColor["+this._renderer.directionalLightCount+"]");var u=this._renderer._pInst.color.apply(this._renderer._pInst,[e,t,r]);var h=u._array;s.uniform3f(l.uDirectionalColor,h[0],h[1],h[2]);var f,c,p;if(typeof arguments[arguments.length-1]==="number"){f=arguments[arguments.length-3];c=arguments[arguments.length-2];p=arguments[arguments.length-1]}else{try{f=arguments[arguments.length-1].x;c=arguments[arguments.length-1].y;p=arguments[arguments.length-1].z}catch(d){throw d}}l.uLightingDirection=s.getUniformLocation(l,"uLightingDirection["+this._renderer.directionalLightCount+"]");s.uniform3f(l.uLightingDirection,f,c,p);l.uMaterialColor=s.getUniformLocation(l,"uMaterialColor");s.uniform4f(l.uMaterialColor,1,1,1,1);this._renderer.directionalLightCount++;l.uDirectionalLightCount=s.getUniformLocation(l,"uDirectionalLightCount");s.uniform1i(l.uDirectionalLightCount,this._renderer.directionalLightCount);return this};n.prototype.pointLight=function(e,t,r,n,i,o,a){var s=this._renderer.GL;var l=this._renderer._getShader("lightVert","lightTextureFrag");s.useProgram(l);l.uPointLightColor=s.getUniformLocation(l,"uPointLightColor["+this._renderer.pointLightCount+"]");var u=this._renderer._pInst.color.apply(this._renderer._pInst,[e,t,r]);var h=u._array;s.uniform3f(l.uPointLightColor,h[0],h[1],h[2]);var f,c,p;if(typeof arguments[arguments.length-1]==="number"){f=arguments[arguments.length-3];c=arguments[arguments.length-2];p=arguments[arguments.length-1]}else{try{f=arguments[arguments.length-1].x;c=arguments[arguments.length-1].y;p=arguments[arguments.length-1].z}catch(d){throw d}}l.uPointLightLocation=s.getUniformLocation(l,"uPointLightLocation["+this._renderer.pointLightCount+"]");s.uniform3f(l.uPointLightLocation,f,c,p);l.uMaterialColor=s.getUniformLocation(l,"uMaterialColor");s.uniform4f(l.uMaterialColor,1,1,1,1);this._renderer.pointLightCount++;l.uPointLightCount=s.getUniformLocation(l,"uPointLightCount");s.uniform1i(l.uPointLightCount,this._renderer.pointLightCount);return this};t.exports=n},{"../core/core":48}],33:[function(e,t,r){"use strict";var n=e("../core/core");n.prototype.normalMaterial=function(){this._renderer._getShader("normalVert","normalFrag");return this};n.prototype.texture=function(e){var t=this._renderer.GL;var r=this._renderer._getShader("lightVert","lightTextureFrag");t.useProgram(r);if(e instanceof n.Image){if(!e.isTexture){var o=t.createTexture();e.createTexture(o);t.bindTexture(t.TEXTURE_2D,o);t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,1);e._setProperty("isTexture",true)}else{}e.loadPixels();var a=new Uint8Array(e.pixels);t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.width,e.height,0,t.RGBA,t.UNSIGNED_BYTE,a)}else if(e instanceof n.MediaElement){if(!e.loadedmetadata){return}t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e.elt)}else{}if(i(e.width)&&i(e.height)){t.generateMipmap(t.TEXTURE_2D)}else{t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}t.uniform1i(t.getUniformLocation(r,"uSampler"),0);t.uniform1i(t.getUniformLocation(r,"isTexture"),true);return this};function i(e){return(e&e-1)===0}n.prototype.basicMaterial=function(e,t,r,n){var i=this._renderer.GL;var o=this._renderer._getShader("normalVert","basicFrag");i.useProgram(o);o.uMaterialColor=i.getUniformLocation(o,"uMaterialColor");var a=this._renderer._pInst.color.apply(this._renderer._pInst,arguments);var s=a._array;i.uniform4f(o.uMaterialColor,s[0],s[1],s[2],s[3]);return this};n.prototype.ambientMaterial=function(e,t,r,n){var i=this._renderer.GL;var o=this._renderer._getShader("lightVert","lightTextureFrag");i.useProgram(o);o.uMaterialColor=i.getUniformLocation(o,"uMaterialColor");var a=this._renderer._pInst.color.apply(this._renderer._pInst,arguments);var s=a._array;i.uniform4f(o.uMaterialColor,s[0],s[1],s[2],s[3]);o.uSpecular=i.getUniformLocation(o,"uSpecular");i.uniform1i(o.uSpecular,false);i.uniform1i(i.getUniformLocation(o,"isTexture"),false);return this};n.prototype.specularMaterial=function(e,t,r,n){var i=this._renderer.GL;var o=this._renderer._getShader("lightVert","lightTextureFrag");i.uniform1i(i.getUniformLocation(o,"isTexture"),false);i.useProgram(o);o.uMaterialColor=i.getUniformLocation(o,"uMaterialColor");var a=this._renderer._pInst.color.apply(this._renderer._pInst,arguments);var s=a._array;i.uniform4f(o.uMaterialColor,s[0],s[1],s[2],s[3]);o.uSpecular=i.getUniformLocation(o,"uSpecular");i.uniform1i(o.uSpecular,true);return this};t.exports=n},{"../core/core":48}],34:[function(e,t,r){"use strict";var n=e("../core/core");n.Geometry3D=function(){this.vertices=[];this.vertexNormals=[];this.faces=[];this.faceNormals=[];this.uvs=[]};n.Geometry3D.prototype.parametricGeometry=function(e,t,r,n){var i,o,a;var s,l;n=n||0;this.detailX=t;this.detailY=r;var u=t+1;for(i=0;i<=r;i++){l=i/r;for(o=0;o<=t;o++){s=o/t;a=e(s,l);this.vertices.push(a)}}var h,f,c,p;var d,m,g,v;for(i=0;i<r;i++){for(o=0;o<t;o++){h=i*u+o+n;f=i*u+o+1+n;c=(i+1)*u+o+1+n;p=(i+1)*u+o+n;d=[o/t,i/r];m=[(o+1)/t,i/r];g=[(o+1)/t,(i+1)/r];v=[o/t,(i+1)/r];this.faces.push([h,f,p]);this.uvs.push([d,m,v]);this.faces.push([f,c,p]);this.uvs.push([m,g,v])}}};n.Geometry3D.prototype.computeFaceNormals=function(){var e=new n.Vector;var t=new n.Vector;for(var r=0;r<this.faces.length;r++){var i=this.faces[r];var o=this.vertices[i[0]];var a=this.vertices[i[1]];var s=this.vertices[i[2]];n.Vector.sub(s,a,e);n.Vector.sub(o,a,t);var l=n.Vector.cross(t,e);l.normalize();l.mult(-1);this.faceNormals[r]=l}};n.Geometry3D.prototype.computeVertexNormals=function(){var e,t,r,i,o;var a=[];o=new Array(this.vertices.length);for(e=0;e<this.vertices.length;e++){o[e]=new n.Vector}for(t=0;t<this.faces.length;t++){r=this.faces[t];i=this.faceNormals[t];o[r[0]].add(i);o[r[1]].add(i);o[r[2]].add(i)}for(e=0;e<this.vertices.length;e++){o[e].normalize()}for(t=0;t<this.faces.length;t++){r=this.faces[t];a[t]=[];a[t][0]=o[r[0]].copy();a[t][1]=o[r[1]].copy();a[t][2]=o[r[2]].copy()}for(t=0;t<this.faces.length;t++){r=this.faces[t];i=this.faceNormals[t];this.vertexNormals[r[0]]=a[t][0];this.vertexNormals[r[1]]=a[t][1];this.vertexNormals[r[2]]=a[t][2]}};n.Geometry3D.prototype.averageNormals=function(){for(var e=0;e<=this.detailY;e++){var t=this.detailX+1;var r=n.Vector.add(this.vertexNormals[e*t],this.vertexNormals[e*t+this.detailX]);r=n.Vector.div(r,2);this.vertexNormals[e*t]=r;this.vertexNormals[e*t+this.detailX]=r}};n.Geometry3D.prototype.averagePoleNormals=function(){var e=new n.Vector(0,0,0);for(var t=0;t<this.detailX;t++){e.add(this.vertexNormals[t])}e=n.Vector.div(e,this.detailX);for(t=0;t<this.detailX;t++){this.vertexNormals[t]=e}e=new n.Vector(0,0,0);for(t=this.vertices.length-1;t>this.vertices.length-1-this.detailX;t--){e.add(this.vertexNormals[t])}e=n.Vector.div(e,this.detailX);for(t=this.vertices.length-1;t>this.vertices.length-1-this.detailX;t--){this.vertexNormals[t]=e}};n.Geometry3D.prototype.generateUV=function(e,t){e=i(e);t=i(t);var r=[];e.forEach(function(e,n){r[e]=t[n]});return i(r)};n.Geometry3D.prototype.generateObj=function(e,t){this.computeFaceNormals();this.computeVertexNormals();if(e){this.averageNormals()}if(t){this.averagePoleNormals()}var r={vertices:o(this.vertices),vertexNormals:o(this.vertexNormals),uvs:this.generateUV(this.faces,this.uvs),faces:i(this.faces),len:this.faces.length*3};return r};function i(e){return e.reduce(function(e,t){return e.concat(t)})}function o(e){return i(e.map(function(e){return[e.x,e.y,e.z]}))}t.exports=n.Geometry3D},{"../core/core":48}],35:[function(e,t,r){"use strict";var n=e("../core/core");var i=e("../math/polargeometry");var o=e("../core/constants");var a=typeof Float32Array!=="undefined"?Float32Array:Array;n.Matrix=function(){if(arguments[0]instanceof n){this.p5=arguments[0];this.mat4=arguments[1]||new a([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}else{this.mat4=arguments[0]||new a([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return this};n.Matrix.prototype.set=function(e){if(e instanceof n.Matrix){this.mat4=e.mat4;return this}else if(e instanceof a){this.mat4=e;return this}return this};n.Matrix.prototype.get=function(){return new n.Matrix(this.mat4)};n.Matrix.prototype.copy=function(){var e=new n.Matrix;e.mat4[0]=this.mat4[0];e.mat4[1]=this.mat4[1];e.mat4[2]=this.mat4[2];e.mat4[3]=this.mat4[3];e.mat4[4]=this.mat4[4];e.mat4[5]=this.mat4[5];e.mat4[6]=this.mat4[6];e.mat4[7]=this.mat4[7];e.mat4[8]=this.mat4[8];e.mat4[9]=this.mat4[9];e.mat4[10]=this.mat4[10];e.mat4[11]=this.mat4[11];e.mat4[12]=this.mat4[12];e.mat4[13]=this.mat4[13];e.mat4[14]=this.mat4[14];e.mat4[15]=this.mat4[15];return e};n.Matrix.identity=function(){return new n.Matrix};n.Matrix.prototype.transpose=function(e){var t,r,i,o,s,l;if(e instanceof n.Matrix){t=e.mat4[1];r=e.mat4[2];i=e.mat4[3];o=e.mat4[6];s=e.mat4[7];l=e.mat4[11];this.mat4[0]=e.mat4[0];this.mat4[1]=e.mat4[4];this.mat4[2]=e.mat4[8];this.mat4[3]=e.mat4[12];this.mat4[4]=t;this.mat4[5]=e.mat4[5];this.mat4[6]=e.mat4[9];this.mat4[7]=e.mat4[13];this.mat4[8]=r;this.mat4[9]=o;this.mat4[10]=e.mat4[10];this.mat4[11]=e.mat4[14];this.mat4[12]=i;this.mat4[13]=s;this.mat4[14]=l;this.mat4[15]=e.mat4[15]}else if(e instanceof a){t=e[1];r=e[2];i=e[3];o=e[6];s=e[7];l=e[11];this.mat4[0]=e[0];this.mat4[1]=e[4];this.mat4[2]=e[8];this.mat4[3]=e[12];this.mat4[4]=t;this.mat4[5]=e[5];this.mat4[6]=e[9];this.mat4[7]=e[13];this.mat4[8]=r;this.mat4[9]=o;this.mat4[10]=e[10];this.mat4[11]=e[14];this.mat4[12]=i;this.mat4[13]=s;this.mat4[14]=l;this.mat4[15]=e[15]}return this};n.Matrix.prototype.invert=function(e){var t,r,i,o,s,l,u,h,f,c,p,d,m,g,v,y;if(e instanceof n.Matrix){t=e.mat4[0];r=e.mat4[1];i=e.mat4[2];o=e.mat4[3];s=e.mat4[4];l=e.mat4[5];u=e.mat4[6];h=e.mat4[7];f=e.mat4[8];c=e.mat4[9];p=e.mat4[10];d=e.mat4[11];m=e.mat4[12];g=e.mat4[13];v=e.mat4[14];y=e.mat4[15]}else if(e instanceof a){t=e[0];r=e[1];i=e[2];o=e[3];s=e[4];l=e[5];u=e[6];h=e[7];f=e[8];c=e[9];p=e[10];d=e[11];m=e[12];g=e[13];v=e[14];y=e[15]}var _=t*l-r*s,b=t*u-i*s,x=t*h-o*s,w=r*u-i*l,S=r*h-o*l,C=i*h-o*u,T=f*g-c*m,E=f*v-p*m,R=f*y-d*m,A=c*v-p*g,M=c*y-d*g,N=p*y-d*v,D=_*N-b*M+x*A+w*R-S*E+C*T;if(!D){return null}D=1/D;this.mat4[0]=(l*N-u*M+h*A)*D;this.mat4[1]=(i*M-r*N-o*A)*D;this.mat4[2]=(g*C-v*S+y*w)*D;this.mat4[3]=(p*S-c*C-d*w)*D;this.mat4[4]=(u*R-s*N-h*E)*D;this.mat4[5]=(t*N-i*R+o*E)*D;this.mat4[6]=(v*x-m*C-y*b)*D;this.mat4[7]=(f*C-p*x+d*b)*D;this.mat4[8]=(s*M-l*R+h*T)*D;this.mat4[9]=(r*R-t*M-o*T)*D;this.mat4[10]=(m*S-g*x+y*_)*D;this.mat4[11]=(c*x-f*S-d*_)*D;this.mat4[12]=(l*E-s*A-u*T)*D;this.mat4[13]=(t*A-r*E+i*T)*D;this.mat4[14]=(g*b-m*w-v*_)*D;this.mat4[15]=(f*w-c*b+p*_)*D;return this};n.Matrix.prototype.determinant=function(){var e=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],t=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],r=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],n=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],i=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],o=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],a=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],s=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],l=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],u=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],h=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13],f=this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14];return e*f-t*h+r*u+n*l-i*s+o*a};n.Matrix.prototype.mult=function(e){var t=new a(16);var r=new a(16);if(e instanceof n.Matrix){r=e.mat4}else if(e instanceof a){r=e}var i=this.mat4[0],o=this.mat4[1],s=this.mat4[2],l=this.mat4[3];t[0]=i*r[0]+o*r[4]+s*r[8]+l*r[12];t[1]=i*r[1]+o*r[5]+s*r[9]+l*r[13];t[2]=i*r[2]+o*r[6]+s*r[10]+l*r[14];t[3]=i*r[3]+o*r[7]+s*r[11]+l*r[15];i=this.mat4[4];o=this.mat4[5];s=this.mat4[6];l=this.mat4[7];t[4]=i*r[0]+o*r[4]+s*r[8]+l*r[12];t[5]=i*r[1]+o*r[5]+s*r[9]+l*r[13];t[6]=i*r[2]+o*r[6]+s*r[10]+l*r[14];t[7]=i*r[3]+o*r[7]+s*r[11]+l*r[15];i=this.mat4[8];o=this.mat4[9];s=this.mat4[10];l=this.mat4[11];t[8]=i*r[0]+o*r[4]+s*r[8]+l*r[12];t[9]=i*r[1]+o*r[5]+s*r[9]+l*r[13];t[10]=i*r[2]+o*r[6]+s*r[10]+l*r[14];t[11]=i*r[3]+o*r[7]+s*r[11]+l*r[15];i=this.mat4[12];o=this.mat4[13];

s=this.mat4[14];l=this.mat4[15];t[12]=i*r[0]+o*r[4]+s*r[8]+l*r[12];t[13]=i*r[1]+o*r[5]+s*r[9]+l*r[13];t[14]=i*r[2]+o*r[6]+s*r[10]+l*r[14];t[15]=i*r[3]+o*r[7]+s*r[11]+l*r[15];this.mat4=t;return this};n.Matrix.prototype.scale=function(){var e,t,r;var i=new Array(arguments.length);for(var o=0;o<i.length;o++){i[o]=arguments[o]}if(i[0]instanceof n.Vector){e=i[0].x;t=i[0].y;r=i[0].z}else if(i[0]instanceof Array){e=i[0][0];t=i[0][1];r=i[0][2]}var s=new a(16);s[0]=this.mat4[0]*e;s[1]=this.mat4[1]*e;s[2]=this.mat4[2]*e;s[3]=this.mat4[3]*e;s[4]=this.mat4[4]*t;s[5]=this.mat4[5]*t;s[6]=this.mat4[6]*t;s[7]=this.mat4[7]*t;s[8]=this.mat4[8]*r;s[9]=this.mat4[9]*r;s[10]=this.mat4[10]*r;s[11]=this.mat4[11]*r;s[12]=this.mat4[12];s[13]=this.mat4[13];s[14]=this.mat4[14];s[15]=this.mat4[15];this.mat4=s;return this};n.Matrix.prototype.rotate=function(e,t){var r,a,s,l,u;if(this.p5){if(this.p5._angleMode===o.DEGREES){l=i.degreesToRadians(e)}}else{l=e}if(t instanceof n.Vector){r=t.x;a=t.y;s=t.z}else if(t instanceof Array){r=t[0];a=t[1];s=t[2]}u=Math.sqrt(r*r+a*a+s*s);r*=1/u;a*=1/u;s*=1/u;var h=this.mat4[0];var f=this.mat4[1];var c=this.mat4[2];var p=this.mat4[3];var d=this.mat4[4];var m=this.mat4[5];var g=this.mat4[6];var v=this.mat4[7];var y=this.mat4[8];var _=this.mat4[9];var b=this.mat4[10];var x=this.mat4[11];var w=Math.sin(l);var S=Math.cos(l);var C=1-S;var T=r*r*C+S;var E=a*r*C+s*w;var R=s*r*C-a*w;var A=r*a*C-s*w;var M=a*a*C+S;var N=s*a*C+r*w;var D=r*s*C+a*w;var k=a*s*C-r*w;var I=s*s*C+S;this.mat4[0]=h*T+d*E+y*R;this.mat4[1]=f*T+m*E+_*R;this.mat4[2]=c*T+g*E+b*R;this.mat4[3]=p*T+v*E+x*R;this.mat4[4]=h*A+d*M+y*N;this.mat4[5]=f*A+m*M+_*N;this.mat4[6]=c*A+g*M+b*N;this.mat4[7]=p*A+v*M+x*N;this.mat4[8]=h*D+d*k+y*I;this.mat4[9]=f*D+m*k+_*I;this.mat4[10]=c*D+g*k+b*I;this.mat4[11]=p*D+v*k+x*I;return this};n.Matrix.prototype.translate=function(e){var t=e[0],r=e[1],n=e[2]||0;this.mat4[12]=this.mat4[0]*t+this.mat4[4]*r+this.mat4[8]*n+this.mat4[12];this.mat4[13]=this.mat4[1]*t+this.mat4[5]*r+this.mat4[9]*n+this.mat4[13];this.mat4[14]=this.mat4[2]*t+this.mat4[6]*r+this.mat4[10]*n+this.mat4[14];this.mat4[15]=this.mat4[3]*t+this.mat4[7]*r+this.mat4[11]*n+this.mat4[15]};n.Matrix.prototype.rotateX=function(e){this.rotate(e,[1,0,0])};n.Matrix.prototype.rotateY=function(e){this.rotate(e,[0,1,0])};n.Matrix.prototype.rotateZ=function(e){this.rotate(e,[0,0,1])};n.Matrix.prototype.perspective=function(e,t,r,n){var i=1/Math.tan(e/2),o=1/(r-n);this.mat4[0]=i/t;this.mat4[1]=0;this.mat4[2]=0;this.mat4[3]=0;this.mat4[4]=0;this.mat4[5]=i;this.mat4[6]=0;this.mat4[7]=0;this.mat4[8]=0;this.mat4[9]=0;this.mat4[10]=(n+r)*o;this.mat4[11]=-1;this.mat4[12]=0;this.mat4[13]=0;this.mat4[14]=2*n*r*o;this.mat4[15]=0;return this};n.Matrix.prototype.ortho=function(e,t,r,n,i,o){var a=1/(e-t),s=1/(r-n),l=1/(i-o);this.mat4[0]=-2*a;this.mat4[1]=0;this.mat4[2]=0;this.mat4[3]=0;this.mat4[4]=0;this.mat4[5]=-2*s;this.mat4[6]=0;this.mat4[7]=0;this.mat4[8]=0;this.mat4[9]=0;this.mat4[10]=2*l;this.mat4[11]=0;this.mat4[12]=(e+t)*a;this.mat4[13]=(n+r)*s;this.mat4[14]=(o+i)*l;this.mat4[15]=1;return this};t.exports=n.Matrix},{"../core/constants":47,"../core/core":48,"../math/polargeometry":77}],36:[function(e,t,r){"use strict";var n=e("../core/core");var i=e("./shader");e("../core/p5.Renderer");e("./p5.Matrix");var o=[];var a=1e3;var s={alpha:true,depth:true,stencil:true,antialias:false,premultipliedAlpha:false,preserveDrawingBuffer:false};n.Renderer3D=function(e,t,r){n.Renderer.call(this,e,t,r);try{this.drawingContext=this.canvas.getContext("webgl",s)||this.canvas.getContext("experimental-webgl",s);if(this.drawingContext===null){throw new Error("Error creating webgl context")}else{console.log("p5.Renderer3D: enabled webgl context")}}catch(i){throw new Error(i)}this.isP3D=true;this.GL=this.drawingContext;var o=this.GL;o.clearColor(1,1,1,1);o.clearDepth(1);o.enable(o.DEPTH_TEST);o.depthFunc(o.LEQUAL);o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT);o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight);this._init();return this};n.Renderer3D.prototype=Object.create(n.Renderer.prototype);n.Renderer3D.prototype._applyDefaults=function(){return this};n.Renderer3D.prototype._init=function(e){var t=this.GL;this.initMatrix();this.initHash();this.verticeStack=[];this.verticeBuffer=t.createBuffer();this.colorBuffer=t.createBuffer();this._setCamera=false;this.ambientLightCount=0;this.directionalLightCount=0;this.pointLightCount=0};n.Renderer3D.prototype._update=function(){this.resetMatrix();this.translate(0,0,-800);this.ambientLightCount=0;this.directionalLightCount=0;this.pointLightCount=0;this.verticeStack=[]};n.Renderer3D.prototype.resize=function(e,t){var r=this.GL;n.Renderer.prototype.resize.call(this,e,t);r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight)};n.Renderer3D.prototype.background=function(){var e=this.GL;var t=this._pInst.color.apply(this._pInst,arguments);var r=t.levels[0]/255;var n=t.levels[1]/255;var i=t.levels[2]/255;var o=t.levels[3]/255;e.clearColor(r,n,i,o);e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)};n.Renderer3D.prototype.initShaders=function(e,t,r){var n=this.GL;var o=n.createShader(n.VERTEX_SHADER);n.shaderSource(o,i[e]);n.compileShader(o);if(!n.getShaderParameter(o,n.COMPILE_STATUS)){alert("Yikes! An error occurred compiling the shaders:"+n.getShaderInfoLog(o));return null}var a=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(a,i[t]);n.compileShader(a);if(!n.getShaderParameter(a,n.COMPILE_STATUS)){alert("Darn! An error occurred compiling the shaders:"+n.getShaderInfoLog(a));return null}var s=n.createProgram();n.attachShader(s,o);n.attachShader(s,a);n.linkProgram(s);if(!n.getProgramParameter(s,n.LINK_STATUS)){alert("Snap! Error linking shader program")}this._getLocation(s,r);return s};n.Renderer3D.prototype._getLocation=function(e,t){var r=this.GL;r.useProgram(e);e.uResolution=r.getUniformLocation(e,"uResolution");r.uniform1f(e.uResolution,a);e.vertexPositionAttribute=r.getAttribLocation(e,"aPosition");r.enableVertexAttribArray(e.vertexPositionAttribute);e.uPMatrixUniform=r.getUniformLocation(e,"uProjectionMatrix");e.uMVMatrixUniform=r.getUniformLocation(e,"uModelViewMatrix");if(t===undefined){e.vertexNormalAttribute=r.getAttribLocation(e,"aNormal");r.enableVertexAttribArray(e.vertexNormalAttribute);e.uNMatrixUniform=r.getUniformLocation(e,"uNormalMatrix");e.textureCoordAttribute=r.getAttribLocation(e,"aTexCoord");r.enableVertexAttribArray(e.textureCoordAttribute);e.samplerUniform=r.getUniformLocation(e,"uSampler")}};n.Renderer3D.prototype.setMatrixUniforms=function(e){var t=this.GL;var r=this.mHash[e];t.useProgram(r);t.uniformMatrix4fv(r.uPMatrixUniform,false,this.uPMatrix.mat4);t.uniformMatrix4fv(r.uMVMatrixUniform,false,this.uMVMatrix.mat4);this.uNMatrix=new n.Matrix;this.uNMatrix.invert(this.uMVMatrix);this.uNMatrix.transpose(this.uNMatrix);t.uniformMatrix4fv(r.uNMatrixUniform,false,this.uNMatrix.mat4)};n.Renderer3D.prototype._getShader=function(e,t,r){var n=e+"|"+t;if(!this.materialInHash(n)){var i=this.initShaders(e,t,r);this.mHash[n]=i}this.curShaderId=n;return this.mHash[this.curShaderId]};n.Renderer3D.prototype._getCurShaderId=function(){if(this.curShaderId===undefined){var e="normalVert|normalFrag";var t=this.initShaders("normalVert","normalFrag");this.mHash[e]=t;this.curShaderId=e}return this.curShaderId};n.Renderer3D.prototype._getCurColor=function(){if(this.curColor===undefined){this.curColor=[.5,.5,.5,1]}return this.curColor};n.Renderer3D.prototype.initHash=function(){this.gHash={};this.mHash={}};n.Renderer3D.prototype.geometryInHash=function(e){return this.gHash[e]!==undefined};n.Renderer3D.prototype.materialInHash=function(e){return this.mHash[e]!==undefined};n.Renderer3D.prototype.initMatrix=function(){this.uMVMatrix=new n.Matrix;this.uPMatrix=new n.Matrix;this.uNMatrix=new n.Matrix};n.Renderer3D.prototype.resetMatrix=function(){this.uMVMatrix=n.Matrix.identity()};n.Renderer3D.prototype._setDefaultCamera=function(){if(!this._setCamera){var e=this.width;var t=this.height;this.uPMatrix=n.Matrix.identity();this.uPMatrix.perspective(60/180*Math.PI,e/t,.1,100);this._setCamera=true}};n.Renderer3D.prototype.translate=function(e,t,r){e=e/a;t=-t/a;r=r/a;this.uMVMatrix.translate([e,t,r]);return this};n.Renderer3D.prototype.scale=function(e,t,r){this.uMVMatrix.scale([e,t,r]);return this};n.Renderer3D.prototype.rotate=function(e,t){this.uMVMatrix.rotate(e,t);return this};n.Renderer3D.prototype.rotateX=function(e){this.uMVMatrix.rotateX(e);return this};n.Renderer3D.prototype.rotateY=function(e){this.uMVMatrix.rotateY(e);return this};n.Renderer3D.prototype.rotateZ=function(e){this.uMVMatrix.rotateZ(e);return this};n.Renderer3D.prototype.push=function(){o.push(this.uMVMatrix.copy())};n.Renderer3D.prototype.pop=function(){if(o.length===0){throw new Error("Invalid popMatrix!")}this.uMVMatrix=o.pop()};t.exports=n.Renderer3D},{"../core/core":48,"../core/p5.Renderer":54,"./p5.Matrix":35,"./shader":38}],37:[function(e,t,r){"use strict";var n=e("../core/core");var i=0;n.Renderer3D.prototype.createBuffer=function(e,t){i++;if(i>1e3){var r=Object.keys(this.gHash)[0];delete this.gHash[r];i--}var n=this.GL;this.gHash[e]={};this.gHash[e].len=[];this.gHash[e].vertexBuffer=[];this.gHash[e].normalBuffer=[];this.gHash[e].uvBuffer=[];this.gHash[e].indexBuffer=[];t.forEach(function(t){this.gHash[e].len.push(t.len);this.gHash[e].vertexBuffer.push(n.createBuffer());this.gHash[e].normalBuffer.push(n.createBuffer());this.gHash[e].uvBuffer.push(n.createBuffer());this.gHash[e].indexBuffer.push(n.createBuffer())}.bind(this))};n.Renderer3D.prototype.initBuffer=function(e,t){this._setDefaultCamera();var r=this.GL;this.createBuffer(e,t);var n=this.mHash[this._getCurShaderId()];t.forEach(function(t,i){r.bindBuffer(r.ARRAY_BUFFER,this.gHash[e].vertexBuffer[i]);r.bufferData(r.ARRAY_BUFFER,new Float32Array(t.vertices),r.STATIC_DRAW);r.vertexAttribPointer(n.vertexPositionAttribute,3,r.FLOAT,false,0,0);r.bindBuffer(r.ARRAY_BUFFER,this.gHash[e].normalBuffer[i]);r.bufferData(r.ARRAY_BUFFER,new Float32Array(t.vertexNormals),r.STATIC_DRAW);r.vertexAttribPointer(n.vertexNormalAttribute,3,r.FLOAT,false,0,0);r.bindBuffer(r.ARRAY_BUFFER,this.gHash[e].uvBuffer[i]);r.bufferData(r.ARRAY_BUFFER,new Float32Array(t.uvs),r.STATIC_DRAW);r.vertexAttribPointer(n.textureCoordAttribute,2,r.FLOAT,false,0,0);r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.gHash[e].indexBuffer[i]);r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array(t.faces),r.STATIC_DRAW)}.bind(this))};n.Renderer3D.prototype.drawBuffer=function(e){this._setDefaultCamera();var t=this.GL;var r=this._getCurShaderId();var n=this.mHash[r];this.gHash[e].len.forEach(function(i,o){t.bindBuffer(t.ARRAY_BUFFER,this.gHash[e].vertexBuffer[o]);t.vertexAttribPointer(n.vertexPositionAttribute,3,t.FLOAT,false,0,0);t.bindBuffer(t.ARRAY_BUFFER,this.gHash[e].normalBuffer[o]);t.vertexAttribPointer(n.vertexNormalAttribute,3,t.FLOAT,false,0,0);t.bindBuffer(t.ARRAY_BUFFER,this.gHash[e].uvBuffer[o]);t.vertexAttribPointer(n.textureCoordAttribute,2,t.FLOAT,false,0,0);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.gHash[e].indexBuffer[o]);this.setMatrixUniforms(r);t.drawElements(t.TRIANGLES,this.gHash[e].len[o],t.UNSIGNED_SHORT,0)}.bind(this))};t.exports=n.Renderer3D},{"../core/core":48}],38:[function(e,t,r){t.exports={vertexColorVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition / uResolution * vec3(1.0, -1.0, 1.0), 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n}",vertexColorFrag:"precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n  gl_FragColor = vColor;\n}",normalVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat4 uNormalMatrix;\nuniform float uResolution;\n\nvarying vec3 vVertexNormal;\nvarying highp vec2 vVertTexCoord;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition / uResolution, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vVertexNormal = vec3( uNormalMatrix * vec4( aNormal, 1.0 ) );\n  vVertTexCoord = aTexCoord;\n}",normalFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nvoid main(void) {\n  gl_FragColor = vec4(vVertexNormal, 1.0);\n}",basicFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nuniform vec4 uMaterialColor;\nvoid main(void) {\n  gl_FragColor = uMaterialColor;\n}",lightVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat4 uNormalMatrix;\nuniform float uResolution;\nuniform int uAmbientLightCount;\nuniform int uDirectionalLightCount;\nuniform int uPointLightCount;\n\nuniform vec3 uAmbientColor[8];\nuniform vec3 uLightingDirection[8];\nuniform vec3 uDirectionalColor[8];\nuniform vec3 uPointLightLocation[8];\nuniform vec3 uPointLightColor[8];\nuniform bool uSpecular;\n\nvarying vec3 vVertexNormal;\nvarying vec2 vVertTexCoord;\nvarying vec3 vLightWeighting;\n\nvec3 ambientLightFactor = vec3(0.0, 0.0, 0.0);\nvec3 directionalLightFactor = vec3(0.0, 0.0, 0.0);\nvec3 pointLightFactor = vec3(0.0, 0.0, 0.0);\nvec3 pointLightFactor2 = vec3(0.0, 0.0, 0.0);\n\nvoid main(void){\n\n  vec4 positionVec4 = vec4(aPosition / uResolution, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n\n  vec3 vertexNormal = vec3( uNormalMatrix * vec4( aNormal, 1.0 ) );\n  vVertexNormal = vertexNormal;\n  vVertTexCoord = aTexCoord;\n\n  vec4 mvPosition = uModelViewMatrix * vec4(aPosition / uResolution, 1.0);\n  vec3 eyeDirection = normalize(-mvPosition.xyz);\n\n  float shininess = 32.0;\n  float specularFactor = 2.0;\n  float diffuseFactor = 0.3;\n\n  for(int i = 0; i < 8; i++){\n    if(uAmbientLightCount == i) break;\n    ambientLightFactor += uAmbientColor[i];\n  }\n\n  for(int j = 0; j < 8; j++){\n    if(uDirectionalLightCount == j) break;\n    vec3 dir = uLightingDirection[j];\n    float directionalLightWeighting = max(dot(vertexNormal, dir), 0.0);\n    directionalLightFactor += uDirectionalColor[j] * directionalLightWeighting;\n  }\n\n  for(int k = 0; k < 8; k++){\n    if(uPointLightCount == k) break;\n    vec3 loc = uPointLightLocation[k];\n    //loc = loc / uResolution;\n    vec3 lightDirection = normalize(loc - mvPosition.xyz);\n\n    float directionalLightWeighting = max(dot(vertexNormal, lightDirection), 0.0);\n    pointLightFactor += uPointLightColor[k] * directionalLightWeighting;\n\n    //factor2 for specular\n    vec3 reflectionDirection = reflect(-lightDirection, vertexNormal);\n    float specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n\n    pointLightFactor2 += uPointLightColor[k] * (specularFactor * specularLightWeighting\n      +  directionalLightWeighting * diffuseFactor);\n  }\n  \n  if(!uSpecular){\n    vLightWeighting =  ambientLightFactor + directionalLightFactor + pointLightFactor;\n  }else{\n    vLightWeighting = ambientLightFactor + directionalLightFactor + pointLightFactor2;\n  }\n\n}",lightTextureFrag:"precision mediump float;\n\nuniform vec4 uMaterialColor;\nuniform sampler2D uSampler;\nuniform bool isTexture;\n\nvarying vec3 vLightWeighting;\nvarying highp vec2 vVertTexCoord;\n\nvoid main(void) {\n  if(!isTexture){\n    gl_FragColor = vec4(vec3(uMaterialColor.rgb * vLightWeighting), uMaterialColor.a);\n  }else{\n    vec4 textureColor = texture2D(uSampler, vVertTexCoord);\n    if(vLightWeighting == vec3(0., 0., 0.)){\n      gl_FragColor = textureColor;\n    }else{\n      gl_FragColor = vec4(vec3(textureColor.rgb * vLightWeighting), textureColor.a); \n    }\n  }\n}"}},{}],39:[function(e,t,r){"use strict";var n=e("./core/core");e("./color/p5.Color");e("./core/p5.Element");e("./typography/p5.Font");e("./core/p5.Graphics");e("./core/p5.Renderer2D");e("./image/p5.Image");e("./math/p5.Vector");e("./io/p5.TableRow");e("./io/p5.Table");e("./color/creating_reading");e("./color/setting");e("./core/constants");e("./utilities/conversion");e("./utilities/array_functions");e("./utilities/string_functions");e("./core/environment");e("./image/image");e("./image/loading_displaying");e("./image/pixels");e("./io/files");e("./events/keyboard");e("./events/acceleration");e("./events/mouse");e("./utilities/time_date");e("./events/touch");e("./math/math");e("./math/calculation");e("./math/random");e("./math/noise");e("./math/trigonometry");e("./core/rendering");e("./core/2d_primitives");e("./core/attributes");e("./core/curves");e("./core/vertex");e("./core/structure");e("./core/transform");e("./typography/attributes");e("./typography/loading_displaying");e("./3d/p5.Renderer3D");e("./3d/p5.Geometry3D");e("./3d/retainedMode3D");e("./3d/immediateMode3D");e("./3d/3d_primitives");e("./3d/p5.Matrix");e("./3d/material");e("./3d/light");e("./3d/shader");e("./3d/camera");e("./3d/interaction");var i=function(){if(!window.PHANTOMJS&&!window.mocha){if(window.setup&&typeof window.setup==="function"||window.draw&&typeof window.draw==="function"){new n}}};if(document.readyState==="complete"){i()}else{window.addEventListener("load",i,false)}t.exports=n},{"./3d/3d_primitives":28,"./3d/camera":29,"./3d/immediateMode3D":30,"./3d/interaction":31,"./3d/light":32,"./3d/material":33,"./3d/p5.Geometry3D":34,"./3d/p5.Matrix":35,"./3d/p5.Renderer3D":36,"./3d/retainedMode3D":37,"./3d/shader":38,"./color/creating_reading":41,"./color/p5.Color":42,"./color/setting":43,"./core/2d_primitives":44,"./core/attributes":45,"./core/constants":47,"./core/core":48,"./core/curves":49,"./core/environment":50,"./core/p5.Element":52,"./core/p5.Graphics":53,"./core/p5.Renderer2D":55,"./core/rendering":56,"./core/structure":58,"./core/transform":59,"./core/vertex":60,"./events/acceleration":61,"./events/keyboard":62,"./events/mouse":63,"./events/touch":64,"./image/image":66,"./image/loading_displaying":67,"./image/p5.Image":68,"./image/pixels":69,"./io/files":70,"./io/p5.Table":71,"./io/p5.TableRow":72,"./math/calculation":73,"./math/math":74,"./math/noise":75,"./math/p5.Vector":76,"./math/random":78,"./math/trigonometry":79,"./typography/attributes":80,"./typography/loading_displaying":81,"./typography/p5.Font":82,"./utilities/array_functions":83,"./utilities/conversion":84,"./utilities/string_functions":85,"./utilities/time_date":86}],40:[function(e,t,r){"use strict";var n=e("../core/core");n.ColorConversion={};n.ColorConversion._hsbaToHSLA=function(e){var t=e[0];var r=e[1];var n=e[2];var i=(2-r)*n/2;if(i!==0){if(i===1){r=0}else if(i<.5){r=r/(2-r)}else{r=r*n/(2-i*2)}}return[t,r,i,e[3]]};n.ColorConversion._hsbaToRGBA=function(e){var t=e[0]*6;var r=e[1];var n=e[2];var i=[];if(r===0){i=[n,n,n,e[3]]}else{var o=Math.floor(t);var a=n*(1-r);var s=n*(1-r*(t-o));var l=n*(1-r*(1+o-t));var u,h,f;if(o===0){u=n;h=l;f=a}else if(o===1){u=s;h=n;f=a}else if(o===2){u=a;h=n;f=l}else if(o===3){u=a;h=s;f=n}else if(o===4){u=l;h=a;f=n}else{u=n;h=a;f=s}i=[u,h,f,e[3]]}return i};n.ColorConversion._hslaToHSBA=function(e){var t=e[0];var r=e[1];var n=e[2];var i;if(n<.5){i=(1+r)*n}else{i=n+r-n*r}r=2*(i-n)/i;return[t,r,i,e[3]]};n.ColorConversion._hslaToRGBA=function(e){var t=e[0]*6;var r=e[1];var n=e[2];var i=[];if(r===0){i=[n,n,n,e[3]]}else{var o;if(n<.5){o=(1+r)*n}else{o=n+r-n*r}var a=2*n-o;var s=function(e,t,r){if(e<0){e+=6}else if(e>=6){e-=6}if(e<1){return t+(r-t)*e}else if(e<3){return r}else if(e<4){return t+(r-t)*(4-e)}else{return t}};i=[s(t+2,a,o),s(t,a,o),s(t-2,a,o),e[3]]}return i};n.ColorConversion._rgbaToHSBA=function(e){var t=e[0];var r=e[1];var n=e[2];var i=Math.max(t,r,n);var o=i-Math.min(t,r,n);var a,s;if(o===0){a=0;s=0}else{s=o/i;if(t===i){a=(r-n)/o}else if(r===i){a=2+(n-t)/o}else if(n===i){a=4+(t-r)/o}if(a<0){a+=6}else if(a>=6){a-=6}}return[a/6,s,i,e[3]]};n.ColorConversion._rgbaToHSLA=function(e){var t=e[0];var r=e[1];var n=e[2];var i=Math.max(t,r,n);var o=Math.min(t,r,n);var a=i+o;var s=i-o;var l,u;if(s===0){l=0;u=0}else{if(a<1){u=s/a}else{u=s/(2-s)}if(t===i){l=(r-n)/s}else if(r===i){l=2+(n-t)/s}else if(n===i){l=4+(t-r)/s}if(l<0){l+=6}else if(l>=6){l-=6}}return[l/6,u,a/2,e[3]]};t.exports=n.ColorConversion},{"../core/core":48}],41:[function(e,t,r){"use strict";var n=e("../core/core");var i=e("../core/constants");e("./p5.Color");n.prototype.alpha=function(e){if(e instanceof n.Color||e instanceof Array){return this.color(e)._getAlpha()}else{throw new Error("Needs p5.Color or pixel array as argument.")}};n.prototype.blue=function(e){if(e instanceof n.Color||e instanceof Array){return this.color(e)._getBlue()}else{throw new Error("Needs p5.Color or pixel array as argument.")}};n.prototype.brightness=function(e){if(e instanceof n.Color||e instanceof Array){return this.color(e)._getBrightness()}else{throw new Error("Needs p5.Color or pixel array as argument.")}};n.prototype.color=function(){if(arguments[0]instanceof n.Color){return arguments[0]}else if(arguments[0]instanceof Array){return new n.Color(this,arguments[0])}else{return new n.Color(this,arguments)}};n.prototype.green=function(e){if(e instanceof n.Color||e instanceof Array){return this.color(e)._getGreen()}else{throw new Error("Needs p5.Color or pixel array as argument.")}};n.prototype.hue=function(e){if(e instanceof n.Color||e instanceof Array){return this.color(e)._getHue()}else{throw new Error("Needs p5.Color or pixel array as argument.")}};n.prototype.lerpColor=function(e,t,r){var n=this._renderer._colorMode;var o=this._renderer._colorMaxes;var a,s,l,u;var h,f;if(n===i.RGB){h=e.levels.map(function(e){return e/255});f=t.levels.map(function(e){return e/255})}else if(n===i.HSB){e._getBrightness();t._getBrightness();h=e.hsba;f=t.hsba}else if(n===i.HSL){e._getLightness();t._getLightness();h=e.hsla;f=t.hsla}else{throw new Error(n+"cannot be used for interpolation.")}r=Math.max(Math.min(r,1),0);a=this.lerp(h[0],f[0],r);s=this.lerp(h[1],f[1],r);l=this.lerp(h[2],f[2],r);u=this.lerp(h[3],f[3],r);a*=o[n][0];s*=o[n][1];l*=o[n][2];u*=o[n][3];return this.color(a,s,l,u)};n.prototype.lightness=function(e){if(e instanceof n.Color||e instanceof Array){return this.color(e)._getLightness()}else{throw new Error("Needs p5.Color or pixel array as argument.")}};n.prototype.red=function(e){if(e instanceof n.Color||e instanceof Array){return this.color(e)._getRed()}else{throw new Error("Needs p5.Color or pixel array as argument.")}};n.prototype.saturation=function(e){if(e instanceof n.Color||e instanceof Array){return this.color(e)._getSaturation()}else{throw new Error("Needs p5.Color or pixel array as argument.")}};t.exports=n},{"../core/constants":47,"../core/core":48,"./p5.Color":42}],42:[function(e,t,r){var n=e("../core/core");var i=e("../core/constants");var o=e("./color_conversion");n.Color=function(e,t){this.mode=e._renderer._colorMode;this.maxes=e._renderer._colorMaxes;if(this.mode!==i.RGB&&this.mode!==i.HSL&&this.mode!==i.HSB){throw new Error(this.mode+" is an invalid colorMode.")}else{this._array=n.Color._parseInputs.apply(e,t)}this.levels=this._array.map(function(e){return Math.round(e*255)});return this};n.Color.prototype.toString=function(){var e=this.levels;e[3]=this._array[3];return"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")"};n.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]};n.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[i.RGB][2]};n.Color.prototype._getBrightness=function(){if(!this.hsba){this.hsba=o._rgbaToHSBA(this._array)}return this.hsba[2]*this.maxes[i.HSB][2]};n.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[i.RGB][1]};n.Color.prototype._getHue=function(){if(this.mode===i.HSB){if(!this.hsba){this.hsba=o._rgbaToHSBA(this._array)}return this.hsba[0]*this.maxes[i.HSB][0]}else{if(!this.hsla){this.hsla=o._rgbaToHSLA(this._array)}return this.hsla[0]*this.maxes[i.HSL][0]}};n.Color.prototype._getLightness=function(){if(!this.hsla){this.hsla=o._rgbaToHSLA(this._array)}return this.hsla[2]*this.maxes[i.HSL][2]};n.Color.prototype._getRed=function(){return this._array[0]*this.maxes[i.RGB][0]};n.Color.prototype._getSaturation=function(){if(this.mode===i.HSB){if(!this.hsba){this.hsba=o._rgbaToHSBA(this._array)}return this.hsba[1]*this.maxes[i.HSB][1]}else{if(!this.hsla){this.hsla=o._rgbaToHSLA(this._array)}return this.hsla[1]*this.maxes[i.HSL][1]}};var a={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var s=/\s*/;var l=/(\d{1,3})/;var u=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/;var h=new RegExp(u.source+"%");var f={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",l.source,",",l.source,",",l.source,"\\)$"].join(s.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",h.source,",",h.source,",",h.source,"\\)$"].join(s.source),"i"),RGBA:new RegExp(["^rgba\\(",l.source,",",l.source,",",l.source,",",u.source,"\\)$"].join(s.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",h.source,",",h.source,",",h.source,",",u.source,"\\)$"].join(s.source),"i"),HSL:new RegExp(["^hsl\\(",l.source,",",h.source,",",h.source,"\\)$"].join(s.source),"i"),HSLA:new RegExp(["^hsla\\(",l.source,",",h.source,",",h.source,",",u.source,"\\)$"].join(s.source),"i"),HSB:new RegExp(["^hsb\\(",l.source,",",h.source,",",h.source,"\\)$"].join(s.source),"i"),HSBA:new RegExp(["^hsba\\(",l.source,",",h.source,",",h.source,",",u.source,"\\)$"].join(s.source),"i")};n.Color._parseInputs=function(){var e=arguments.length;var t=this._renderer._colorMode;var r=this._renderer._colorMaxes;var s=[];if(e>=3){s[0]=arguments[0]/r[t][0];s[1]=arguments[1]/r[t][1];s[2]=arguments[2]/r[t][2];if(typeof arguments[3]==="number"){s[3]=arguments[3]/r[t][3]}else{s[3]=1}s=s.map(function(e){return Math.max(Math.min(e,1),0)});if(t===i.HSL){return o._hslaToRGBA(s)}else if(t===i.HSB){return o._hsbaToRGBA(s)}else{return s}}else if(e===1&&typeof arguments[0]==="string"){var l=arguments[0].trim().toLowerCase();if(a[l]){return n.Color._parseInputs.apply(this,[a[l]])}if(f.HEX3.test(l)){s=f.HEX3.exec(l).slice(1).map(function(e){return parseInt(e+e,16)/255});s[3]=1;return s}else if(f.HEX6.test(l)){s=f.HEX6.exec(l).slice(1).map(function(e){return parseInt(e,16)/255});s[3]=1;return s}else if(f.RGB.test(l)){s=f.RGB.exec(l).slice(1).map(function(e){return e/255});s[3]=1;return s}else if(f.RGB_PERCENT.test(l)){s=f.RGB_PERCENT.exec(l).slice(1).map(function(e){return parseFloat(e)/100});s[3]=1;return s}else if(f.RGBA.test(l)){s=f.RGBA.exec(l).slice(1).map(function(e,t){if(t===3){return parseFloat(e)}return e/255});return s}else if(f.RGBA_PERCENT.test(l)){s=f.RGBA_PERCENT.exec(l).slice(1).map(function(e,t){if(t===3){return parseFloat(e)}return parseFloat(e)/100});return s}if(f.HSL.test(l)){s=f.HSL.exec(l).slice(1).map(function(e,t){if(t===0){return parseInt(e,10)/360}return parseInt(e,10)/100});s[3]=1}else if(f.HSLA.test(l)){s=f.HSLA.exec(l).slice(1).map(function(e,t){if(t===0){return parseInt(e,10)/360}else if(t===3){return parseFloat(e)}return parseInt(e,10)/100})}if(s.length){return o._hslaToRGBA(s)}if(f.HSB.test(l)){s=f.HSB.exec(l).slice(1).map(function(e,t){if(t===0){return parseInt(e,10)/360}return parseInt(e,10)/100});s[3]=1}else if(f.HSBA.test(l)){s=f.HSBA.exec(l).slice(1).map(function(e,t){if(t===0){return parseInt(e,10)/360}else if(t===3){return parseFloat(e)}return parseInt(e,10)/100})}if(s.length){return o._hsbaToRGBA(s)}s=[1,1,1,1]}else if((e===1||e===2)&&typeof arguments[0]==="number"){s[0]=arguments[0]/r[t][2];s[1]=arguments[0]/r[t][2];s[2]=arguments[0]/r[t][2];if(typeof arguments[1]==="number"){s[3]=arguments[1]/r[t][3]}else{s[3]=1}s=s.map(function(e){return Math.max(Math.min(e,1),0)})}else{throw new Error(arguments+"is not a valid color representation.")}return s};t.exports=n.Color},{"../core/constants":47,"../core/core":48,"./color_conversion":40}],43:[function(e,t,r){"use strict";var n=e("../core/core");var i=e("../core/constants");e("./p5.Color");n.prototype.background=function(){if(arguments[0]instanceof n.Image){this.image(arguments[0],0,0,this.width,this.height)}else{this._renderer.background.apply(this._renderer,arguments)}return this};n.prototype.clear=function(){this._renderer.clear();return this};n.prototype.colorMode=function(){if(arguments[0]===i.RGB||arguments[0]===i.HSB||arguments[0]===i.HSL){this._renderer._colorMode=arguments[0];var e=this._renderer._colorMaxes[this._renderer._colorMode];if(arguments.length===2){e[0]=arguments[1];e[1]=arguments[1];e[2]=arguments[1];e[3]=arguments[1]}else if(arguments.length===4){e[0]=arguments[1];e[1]=arguments[2];e[2]=arguments[3]}else if(arguments.length===5){e[0]=arguments[1];e[1]=arguments[2];e[2]=arguments[3];e[3]=arguments[4]}}return this};n.prototype.fill=function(){this._renderer._setProperty("_fillSet",true);this._renderer._setProperty("_doFill",true);this._renderer.fill.apply(this._renderer,arguments);return this};n.prototype.noFill=function(){this._renderer._setProperty("_doFill",false);return this};n.prototype.noStroke=function(){this._renderer._setProperty("_doStroke",false);return this};n.prototype.stroke=function(){this._renderer._setProperty("_strokeSet",true);

this._renderer._setProperty("_doStroke",true);this._renderer.stroke.apply(this._renderer,arguments);return this};t.exports=n},{"../core/constants":47,"../core/core":48,"./p5.Color":42}],44:[function(e,t,r){"use strict";var n=e("./core");var i=e("./constants");e("./error_helpers");n.prototype.arc=function(e,t,r,n,o,a,s){var l=new Array(arguments.length);for(var u=0;u<l.length;++u){l[u]=arguments[u]}this._validateParameters("arc",l,[["Number","Number","Number","Number","Number","Number"],["Number","Number","Number","Number","Number","Number","String"]]);if(!this._renderer._doStroke&&!this._renderer._doFill){return this}if(this._angleMode===i.DEGREES){o=this.radians(o);a=this.radians(a)}while(o<0){o+=i.TWO_PI}while(a<0){a+=i.TWO_PI}o%=i.TWO_PI;a%=i.TWO_PI;if(o<=i.HALF_PI){o=Math.atan(r/n*Math.tan(o))}else if(o>i.HALF_PI&&o<=3*i.HALF_PI){o=Math.atan(r/n*Math.tan(o))+i.PI}else{o=Math.atan(r/n*Math.tan(o))+i.TWO_PI}if(a<=i.HALF_PI){a=Math.atan(r/n*Math.tan(a))}else if(a>i.HALF_PI&&a<=3*i.HALF_PI){a=Math.atan(r/n*Math.tan(a))+i.PI}else{a=Math.atan(r/n*Math.tan(a))+i.TWO_PI}if(o>a){a+=i.TWO_PI}r=Math.abs(r);n=Math.abs(n);this._renderer.arc(e,t,r,n,o,a,s);return this};n.prototype.ellipse=function(e,t,r,n){var i=new Array(arguments.length);for(var o=0;o<i.length;++o){i[o]=arguments[o]}this._validateParameters("ellipse",i,["Number","Number","Number","Number"]);if(!this._renderer._doStroke&&!this._renderer._doFill){return this}r=Math.abs(r);n=Math.abs(n);this._renderer.ellipse(e,t,r,n);return this};n.prototype.line=function(){if(!this._renderer._doStroke){return this}var e=new Array(arguments.length);for(var t=0;t<e.length;++t){e[t]=arguments[t]}if(this._renderer.isP3D){this._validateParameters("line",e,[["Number","Number","Number","Number","Number","Number"]]);this._renderer.line(e[0],e[1],e[2],e[3],e[4],e[5])}else{this._validateParameters("line",e,[["Number","Number","Number","Number"]]);this._renderer.line(e[0],e[1],e[2],e[3])}return this};n.prototype.point=function(){if(!this._renderer._doStroke){return this}var e=new Array(arguments.length);for(var t=0;t<e.length;++t){e[t]=arguments[t]}if(this._renderer.isP3D){this._validateParameters("point",e,[["Number","Number","Number"]]);this._renderer.point(e[0],e[1],e[2])}else{this._validateParameters("point",e,[["Number","Number"]]);this._renderer.point(e[0],e[1])}return this};n.prototype.quad=function(){if(!this._renderer._doStroke&&!this._renderer._doFill){return this}var e=new Array(arguments.length);for(var t=0;t<e.length;++t){e[t]=arguments[t]}if(this._renderer.isP3D){this._validateParameters("quad",e,[["Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number"]]);this._renderer.quad(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11])}else{this._validateParameters("quad",e,[["Number","Number","Number","Number","Number","Number","Number","Number"]]);this._renderer.quad(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7])}return this};n.prototype.rect=function(e,t,r,n,i,o,a,s){var l=new Array(arguments.length);for(var u=0;u<l.length;++u){l[u]=arguments[u]}this._validateParameters("rect",l,[["Number","Number","Number","Number"],["Number","Number","Number","Number","Number"],["Number","Number","Number","Number","Number","Number","Number","Number"]]);if(!this._renderer._doStroke&&!this._renderer._doFill){return}this._renderer.rect(e,t,r,n,i,o,a,s);return this};n.prototype.triangle=function(){if(!this._renderer._doStroke&&!this._renderer._doFill){return this}var e=new Array(arguments.length);for(var t=0;t<e.length;++t){e[t]=arguments[t]}if(this._renderer.isP3D){this._validateParameters("triangle",e,[["Number","Number","Number","Number","Number","Number","Number","Number","Number"]]);this._renderer.triangle(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}else{this._validateParameters("triangle",e,[["Number","Number","Number","Number","Number","Number"]]);this._renderer.triangle(e[0],e[1],e[2],e[3],e[4],e[5])}return this};t.exports=n},{"./constants":47,"./core":48,"./error_helpers":51}],45:[function(e,t,r){"use strict";var n=e("./core");var i=e("./constants");n.prototype.ellipseMode=function(e){if(e===i.CORNER||e===i.CORNERS||e===i.RADIUS||e===i.CENTER){this._renderer._ellipseMode=e}return this};n.prototype.noSmooth=function(){this._renderer.noSmooth();return this};n.prototype.rectMode=function(e){if(e===i.CORNER||e===i.CORNERS||e===i.RADIUS||e===i.CENTER){this._renderer._rectMode=e}return this};n.prototype.smooth=function(){this._renderer.smooth();return this};n.prototype.strokeCap=function(e){if(e===i.ROUND||e===i.SQUARE||e===i.PROJECT){this._renderer.strokeCap(e)}return this};n.prototype.strokeJoin=function(e){if(e===i.ROUND||e===i.BEVEL||e===i.MITER){this._renderer.strokeJoin(e)}return this};n.prototype.strokeWeight=function(e){this._renderer.strokeWeight(e);return this};t.exports=n},{"./constants":47,"./core":48}],46:[function(e,t,r){var n=e("./constants");t.exports={modeAdjust:function(e,t,r,i,o){if(o===n.CORNER){return{x:e,y:t,w:r,h:i}}else if(o===n.CORNERS){return{x:e,y:t,w:r-e,h:i-t}}else if(o===n.RADIUS){return{x:e-r,y:t-i,w:2*r,h:2*i}}else if(o===n.CENTER){return{x:e-r*.5,y:t-i*.5,w:r,h:i}}},arcModeAdjust:function(e,t,r,i,o){if(o===n.CORNER){return{x:e+r*.5,y:t+i*.5,w:r,h:i}}else if(o===n.CORNERS){return{x:e,y:t,w:r+e,h:i+t}}else if(o===n.RADIUS){return{x:e,y:t,w:2*r,h:2*i}}else if(o===n.CENTER){return{x:e,y:t,w:r,h:i}}}}},{"./constants":47}],47:[function(e,t,r){var n=Math.PI;t.exports={P2D:"p2d",WEBGL:"webgl",ARROW:"default",CROSS:"crosshair",HAND:"pointer",MOVE:"move",TEXT:"text",WAIT:"wait",HALF_PI:n/2,PI:n,QUARTER_PI:n/4,TAU:n*2,TWO_PI:n*2,DEGREES:"degrees",RADIANS:"radians",CORNER:"corner",CORNERS:"corners",RADIUS:"radius",RIGHT:"right",LEFT:"left",CENTER:"center",TOP:"top",BOTTOM:"bottom",BASELINE:"alphabetic",POINTS:"points",LINES:"lines",TRIANGLES:"triangles",TRIANGLE_FAN:"triangles_fan",TRIANGLE_STRIP:"triangles_strip",QUADS:"quads",QUAD_STRIP:"quad_strip",CLOSE:"close",OPEN:"open",CHORD:"chord",PIE:"pie",PROJECT:"square",SQUARE:"butt",ROUND:"round",BEVEL:"bevel",MITER:"miter",RGB:"rgb",HSB:"hsb",HSL:"hsl",AUTO:"auto",ALT:18,BACKSPACE:8,CONTROL:17,DELETE:46,DOWN_ARROW:40,ENTER:13,ESCAPE:27,LEFT_ARROW:37,OPTION:18,RETURN:13,RIGHT_ARROW:39,SHIFT:16,TAB:9,UP_ARROW:38,BLEND:"normal",ADD:"lighter",DARKEST:"darken",LIGHTEST:"lighten",DIFFERENCE:"difference",EXCLUSION:"exclusion",MULTIPLY:"multiply",SCREEN:"screen",REPLACE:"source-over",OVERLAY:"overlay",HARD_LIGHT:"hard-light",SOFT_LIGHT:"soft-light",DODGE:"color-dodge",BURN:"color-burn",THRESHOLD:"threshold",GRAY:"gray",OPAQUE:"opaque",INVERT:"invert",POSTERIZE:"posterize",DILATE:"dilate",ERODE:"erode",BLUR:"blur",NORMAL:"normal",ITALIC:"italic",BOLD:"bold",_DEFAULT_TEXT_FILL:"#000000",_DEFAULT_LEADMULT:1.25,_CTX_MIDDLE:"middle",LINEAR:"linear",QUADRATIC:"quadratic",BEZIER:"bezier",CURVE:"curve",_DEFAULT_STROKE:"#000000",_DEFAULT_FILL:"#FFFFFF"}},{}],48:[function(e,t,r){"use strict";e("./shim");var n=e("./constants");var i=function(e,t,r){if(arguments.length===2&&typeof t==="boolean"){r=t;t=undefined}this._setupDone=false;this._pixelDensity=Math.ceil(window.devicePixelRatio)||1;this._userNode=t;this._curElement=null;this._elements=[];this._requestAnimId=0;this._preloadCount=0;this._isGlobal=false;this._loop=true;this._styles=[];this._defaultCanvasSize={width:100,height:100};this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null};if(window.DeviceOrientationEvent){this._events.deviceorientation=null}if(window.DeviceMotionEvent&&!window._isNodeWebkit){this._events.devicemotion=null}this._events.wheel=null;this._loadingScreenId="p5_loading";this._start=function(){if(this._userNode){if(typeof this._userNode==="string"){this._userNode=document.getElementById(this._userNode)}}this.createCanvas(this._defaultCanvasSize.width,this._defaultCanvasSize.height,"p2d",true);var e=this.preload||window.preload;if(e){var t=document.getElementById(this._loadingScreenId);if(!t){t=document.createElement("div");t.innerHTML="Loading...";t.style.position="absolute";t.id=this._loadingScreenId;var r=this._userNode||document.body;r.appendChild(t)}for(var n in this._preloadMethods){this._preloadMethods[n]=this._preloadMethods[n]||i;var o=this._preloadMethods[n];if(o===i.prototype||o===i){o=this._isGlobal?window:this}this._registeredPreloadMethods[n]=o[n];o[n]=this._wrapPreload(o,n)}e();this._runIfPreloadsAreDone()}else{this._setup();this._runFrames();this._draw()}}.bind(this);this._runIfPreloadsAreDone=function(){var e=this._isGlobal?window:this;if(e._preloadCount===0){var t=document.getElementById(e._loadingScreenId);if(t){t.parentNode.removeChild(t)}e._setup();e._runFrames();e._draw()}};this._decrementPreload=function(){var e=this._isGlobal?window:this;e._setProperty("_preloadCount",e._preloadCount-1);e._runIfPreloadsAreDone()};this._wrapPreload=function(e,t){return function(){this._incrementPreload();var r=Array.prototype.slice.call(arguments);r.push(this._decrementPreload.bind(this));return this._registeredPreloadMethods[t].apply(e,r)}.bind(this)};this._incrementPreload=function(){var e=this._isGlobal?window:this;e._setProperty("_preloadCount",e._preloadCount+1)};this._setup=function(){var e=this._isGlobal?window:this;if(typeof e.preload==="function"){for(var t in this._preloadMethods){e[t]=this._preloadMethods[t][t];if(e[t]&&this){e[t]=e[t].bind(this)}}}if(typeof e.setup==="function"){e.setup()}var r=new RegExp(/(^|\s)p5_hidden(?!\S)/g);var n=document.getElementsByClassName("p5_hidden");for(var i=0;i<n.length;i++){var o=n[i];o.style.visibility="";o.className=o.className.replace(r,"")}this._setupDone=true}.bind(this);this._draw=function(){var e=window.performance.now();var t=e-this._lastFrameTime;var r=1e3/this._targetFrameRate;var n=5;if(!this._loop||t>=r-n){if(this._renderer.isP3D){this._renderer._update()}this._setProperty("frameCount",this.frameCount+1);this._updateMouseCoords();this._updateTouchCoords();this.redraw();this._frameRate=1e3/(e-this._lastFrameTime);this._lastFrameTime=e}if(this._loop){this._requestAnimId=window.requestAnimationFrame(this._draw)}}.bind(this);this._runFrames=function(){if(this._updateInterval){clearInterval(this._updateInterval)}}.bind(this);this._setProperty=function(e,t){this[e]=t;if(this._isGlobal){window[e]=t}}.bind(this);this.remove=function(){if(this._curElement){this._loop=false;if(this._requestAnimId){window.cancelAnimationFrame(this._requestAnimId)}for(var e in this._events){window.removeEventListener(e,this._events[e])}for(var t=0;t<this._elements.length;t++){var r=this._elements[t];if(r.elt.parentNode){r.elt.parentNode.removeChild(r.elt)}for(var n in r._events){r.elt.removeEventListener(n,r._events[n])}}var o=this;this._registeredMethods.remove.forEach(function(e){if(typeof e!=="undefined"){e.call(o)}});if(this._isGlobal){for(var a in i.prototype){try{delete window[a]}catch(s){window[a]=undefined}}for(var l in this){if(this.hasOwnProperty(l)){try{delete window[l]}catch(s){window[l]=undefined}}}}}}.bind(this);for(var o in n){i.prototype[o]=n[o]}if(!e){this._isGlobal=true;for(var a in i.prototype){if(typeof i.prototype[a]==="function"){var s=a.substring(2);if(!this._events.hasOwnProperty(s)){window[a]=i.prototype[a].bind(this)}}else{window[a]=i.prototype[a]}}for(var l in this){if(this.hasOwnProperty(l)){window[l]=this[l]}}}else{e(this)}for(var u in this._events){var h=this["_on"+u];if(h){var f=h.bind(this);window.addEventListener(u,f);this._events[u]=f}}var c=function(){this._setProperty("focused",true)}.bind(this);var p=function(){this._setProperty("focused",false)}.bind(this);window.addEventListener("focus",c);window.addEventListener("blur",p);this.registerMethod("remove",function(){window.removeEventListener("focus",c);window.removeEventListener("blur",p)});if(r){this._start()}else{if(document.readyState==="complete"){this._start()}else{window.addEventListener("load",this._start.bind(this),false)}}};i.prototype._preloadMethods={loadJSON:i.prototype,loadImage:i.prototype,loadStrings:i.prototype,loadXML:i.prototype,loadShape:i.prototype,loadTable:i.prototype,loadFont:i.prototype};i.prototype._registeredMethods={pre:[],post:[],remove:[]};i.prototype._registeredPreloadMethods={};i.prototype.registerPreloadMethod=function(e,t){if(!i.prototype._preloadMethods.hasOwnProperty(e)){i.prototype._preloadMethods[e]=t}};i.prototype.registerMethod=function(e,t){if(!i.prototype._registeredMethods.hasOwnProperty(e)){i.prototype._registeredMethods[e]=[]}i.prototype._registeredMethods[e].push(t)};t.exports=i},{"./constants":47,"./shim":57}],49:[function(e,t,r){"use strict";var n=e("./core");e("./error_helpers");var i=20;var o=20;n.prototype.bezier=function(e,t,r,n,i,o,a,s){var l=new Array(arguments.length);for(var u=0;u<l.length;++u){l[u]=arguments[u]}this._validateParameters("bezier",l,["Number","Number","Number","Number","Number","Number","Number","Number"]);if(!this._renderer._doStroke){return this}this._renderer.bezier(e,t,r,n,i,o,a,s);return this};n.prototype.bezierDetail=function(e){i=e;return this};n.prototype.bezierPoint=function(e,t,r,n,i){var o=1-i;return Math.pow(o,3)*e+3*Math.pow(o,2)*i*t+3*o*Math.pow(i,2)*r+Math.pow(i,3)*n};n.prototype.bezierTangent=function(e,t,r,n,i){var o=1-i;return 3*n*Math.pow(i,2)-3*r*Math.pow(i,2)+6*r*o*i-6*t*o*i+3*t*Math.pow(o,2)-3*e*Math.pow(o,2)};n.prototype.curve=function(e,t,r,n,i,o,a,s){var l=new Array(arguments.length);for(var u=0;u<l.length;++u){l[u]=arguments[u]}this._validateParameters("curve",l,["Number","Number","Number","Number","Number","Number","Number","Number"]);if(!this._renderer._doStroke){return}this._renderer.curve(e,t,r,n,i,o,a,s);return this};n.prototype.curveDetail=function(e){o=e;return this};n.prototype.curveTightness=function(e){this._renderer._curveTightness=e};n.prototype.curvePoint=function(e,t,r,n,i){var o=i*i*i,a=i*i,s=-.5*o+a-.5*i,l=1.5*o-2.5*a+1,u=-1.5*o+2*a+.5*i,h=.5*o-.5*a;return e*s+t*l+r*u+n*h};n.prototype.curveTangent=function(e,t,r,n,i){var o=i*i,a=-3*o/2+2*i-.5,s=9*o/2-5*i,l=-9*o/2+4*i+.5,u=3*o/2-i;return e*a+t*s+r*l+n*u};t.exports=n},{"./core":48,"./error_helpers":51}],50:[function(e,t,r){"use strict";var n=e("./core");var i=e("./constants");var o=[i.ARROW,i.CROSS,i.HAND,i.MOVE,i.TEXT,i.WAIT];n.prototype._frameRate=0;n.prototype._lastFrameTime=window.performance.now();n.prototype._targetFrameRate=60;if(window.console&&console.log){n.prototype.print=function(e){try{var t=JSON.parse(JSON.stringify(e));console.log(t)}catch(r){console.log(e)}}}else{n.prototype.print=function(){}}n.prototype.println=n.prototype.print;n.prototype.frameCount=0;n.prototype.focused=document.hasFocus();n.prototype.cursor=function(e,t,r){var n="auto";var i=this._curElement.elt;if(o.indexOf(e)>-1){n=e}else if(typeof e==="string"){var a="";if(t&&r&&(typeof t==="number"&&typeof r==="number")){a=t+" "+r}if(e.substring(0,6)!=="http://"){n="url("+e+") "+a+", auto"}else if(/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(e)){n="url("+e+") "+a+", auto"}else{n=e}}i.style.cursor=n};n.prototype.frameRate=function(e){if(typeof e!=="number"||e<=0){return this._frameRate}else{this._setProperty("_targetFrameRate",e);this._runFrames();return this}};n.prototype.getFrameRate=function(){return this.frameRate()};n.prototype.setFrameRate=function(e){return this.frameRate(e)};n.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"};n.prototype.displayWidth=screen.width;n.prototype.displayHeight=screen.height;n.prototype.windowWidth=window.innerWidth;n.prototype.windowHeight=window.innerHeight;n.prototype._onresize=function(e){this._setProperty("windowWidth",window.innerWidth);this._setProperty("windowHeight",window.innerHeight);var t=this._isGlobal?window:this;var r;if(typeof t.windowResized==="function"){r=t.windowResized(e);if(r!==undefined&&!r){e.preventDefault()}}};n.prototype.width=0;n.prototype.height=0;n.prototype.fullScreen=function(e){if(typeof e==="undefined"){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement}else{if(e){a(document.documentElement)}else{s()}}};n.prototype.pixelDensity=function(e){if(typeof e==="number"){this._pixelDensity=e}else{return this._pixelDensity}this.resizeCanvas(this.width,this.height,true)};n.prototype.displayDensity=function(){return window.devicePixelRatio};function a(e){var t=document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled;if(!t){throw new Error("Fullscreen not enabled in this browser.")}if(e.requestFullscreen){e.requestFullscreen()}else if(e.mozRequestFullScreen){e.mozRequestFullScreen()}else if(e.webkitRequestFullscreen){e.webkitRequestFullscreen()}else if(e.msRequestFullscreen){e.msRequestFullscreen()}}function s(){if(document.exitFullscreen){document.exitFullscreen()}else if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else if(document.webkitExitFullscreen){document.webkitExitFullscreen()}else if(document.msExitFullscreen){document.msExitFullscreen()}}n.prototype.getURL=function(){return location.href};n.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(e){return e!==""})};n.prototype.getURLParams=function(){var e=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim;var t;var r={};while((t=e.exec(location.search))!=null){if(t.index===e.lastIndex){e.lastIndex++}r[t[1]]=t[2]}return r};t.exports=n},{"./constants":47,"./core":48}],51:[function(e,t,r){"use strict";var n=e("./core");var i=false;var o={};var a=o.toString;var s=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"];for(var l=0;l<s.length;l++){o["[object "+s[l]+"]"]=s[l].toLowerCase()}var u=function(e){if(e==null){return e+""}return typeof e==="object"||typeof e==="function"?o[a.call(e)]||"object":typeof e};var h=Array.isArray||function(e){return u(e)==="array"};var f=function(e){return!h(e)&&e-parseFloat(e)+1>=0};var c=["Number","Integer","Number/Constant"];function p(e,t,r){if(e.match(/^p5\./)){var i=e.split(".");return r instanceof n[i[1]]}return e==="Boolean"||e.toLowerCase()===t||c.indexOf(e)>-1&&f(r)}var d=0;var m=1;var g=2;var v=3;var y=["#2D7BB6","#EE9900","#4DB200","#C83C00"];function _(e,t,r){if(i){x();i=false}if("undefined"===u(r)){r="#B40033"}else if(u(r)==="number"){r=y[r]}}n.prototype._validateParameters=function(e,t,r){if(!h(r[0])){r=[r]}var n=Math.abs(t.length-r[0].length);var i,o=0;for(var a=1,s=r.length;a<s;a++){var l=Math.abs(t.length-r[a].length);if(l<=n){o=a;n=l}}var f="X";if(n>0){i="You wrote "+e+"(";if(t.length>0){i+=f+Array(t.length).join(","+f)}i+="). "+e+" was expecting "+r[o].length+" parameters. Try "+e+"(";if(r[o].length>0){i+=f+Array(r[o].length).join(","+f)}i+=").";if(r.length>1){i+=" "+e+" takes different numbers of parameters "+"depending on what you want to do. Click this link to learn more: "}_(i,e,d)}for(var c=0;c<r.length;c++){for(var v=0;v<r[c].length&&v<t.length;v++){var y=r[c][v];var b=u(t[v]);if("undefined"===b||null===b){_("It looks like "+e+" received an empty variable in spot #"+(v+1)+". If not intentional, this is often a problem with scope: "+"[link to scope].",e,m)}else if(y!=="*"&&!p(y,b,t[v])){i=e+" was expecting a "+y.toLowerCase()+" for parameter #"+(v+1)+", received ";i+="string"===b?'"'+t[v]+'"':t[v];i+=" instead.";if(r.length>1){i+=" "+e+" takes different numbers of parameters "+"depending on what you want to do. "+"Click this link to learn more:"}_(i,e,g)}}}};n.prototype._validateParameters=function(){return true};var b={0:{fileType:"image",method:"loadImage",message:" hosting the image online,"},1:{fileType:"XML file",method:"loadXML"},2:{fileType:"table file",method:"loadTable"},3:{fileType:"text file",method:"loadStrings"}};n._friendlyFileLoadError=function(e,t){var r=b[e];var n="It looks like there was a problem"+" loading your "+r.fileType+"."+" Try checking if the file path%c ["+t+"] %cis correct,"+(r.message||"")+" or running a local server.";_(n,r.method,v)};function x(){var e="transparent";var t="#ED225D";var r="#ED225D";var n="white";console.log("%c    _ \n"+" /\\| |/\\ \n"+" \\ ` ' /  \n"+" / , . \\  \n"+" \\/|_|\\/ "+"\n\n%c> p5.js says: Welcome! "+"This is your friendly debugger. "+"To turn me off switch to using p5.min.js.","background-color:"+e+";color:"+t+";","background-color:"+r+";color:"+n+";")}var w=["color","random"];function S(e){w.forEach(function(t){if(e.message&&e.message.indexOf(t)!==-1){console.log("%c Did you just try to use p5.js's '"+t+"' "+"function or variable? If so, you may want to "+"move it into your sketch's setup() function.","color: #B40033")}})}if(document.readyState!=="complete"){window.addEventListener("error",S,false);window.addEventListener("load",function(){window.removeEventListener("error",S,false)})}t.exports=n},{"./core":48}],52:[function(e,t,r){var n=e("./core");n.Element=function(e,t){this.elt=e;this._pInst=t;this._events={};this.width=this.elt.offsetWidth;this.height=this.elt.offsetHeight};n.Element.prototype.parent=function(e){if(arguments.length===0){return this.elt.parentNode}else{if(typeof e==="string"){if(e[0]==="#"){e=e.substring(1)}e=document.getElementById(e)}else if(e instanceof n.Element){e=e.elt}e.appendChild(this.elt);return this}};n.Element.prototype.id=function(e){if(arguments.length===0){return this.elt.id}else{this.elt.id=e;this.width=this.elt.offsetWidth;this.height=this.elt.offsetHeight;return this}};n.Element.prototype.class=function(e){if(arguments.length===0){return this.elt.className}else{this.elt.className=e;this.width=this.elt.offsetWidth;this.height=this.elt.offsetHeight;return this}};n.Element.prototype.mousePressed=function(e){i("mousedown",e,this);i("touchstart",e,this);return this};n.Element.prototype.mouseWheel=function(e){i("wheel",e,this);return this};n.Element.prototype.mouseReleased=function(e){i("mouseup",e,this);i("touchend",e,this);return this};n.Element.prototype.mouseClicked=function(e){i("click",e,this);return this};n.Element.prototype.mouseMoved=function(e){i("mousemove",e,this);i("touchmove",e,this);return this};n.Element.prototype.mouseOver=function(e){i("mouseover",e,this);return this};n.Element.prototype.changed=function(e){i("change",e,this);return this};n.Element.prototype.input=function(e){i("input",e,this);return this};n.Element.prototype.mouseOut=function(e){i("mouseout",e,this);return this};n.Element.prototype.touchStarted=function(e){i("touchstart",e,this);i("mousedown",e,this);return this};n.Element.prototype.touchMoved=function(e){i("touchmove",e,this);i("mousemove",e,this);return this};n.Element.prototype.touchEnded=function(e){i("touchend",e,this);i("mouseup",e,this);return this};n.Element.prototype.dragOver=function(e){i("dragover",e,this);return this};n.Element.prototype.dragLeave=function(e){i("dragleave",e,this);return this};n.Element.prototype.drop=function(e,t){function r(t){var r=new n.File(t);return function(t){r.data=t.target.result;e(r)}}if(window.File&&window.FileReader&&window.FileList&&window.Blob){i("dragover",function(e){e.stopPropagation();e.preventDefault()},this);i("dragleave",function(e){e.stopPropagation();e.preventDefault()},this);if(arguments.length>1){i("drop",t,this)}i("drop",function(e){e.stopPropagation();e.preventDefault();var t=e.dataTransfer.files;for(var n=0;n<t.length;n++){var i=t[n];var o=new FileReader;o.onload=r(i);if(i.type.indexOf("text")>-1){o.readAsText(i)}else{o.readAsDataURL(i)}}},this)}else{console.log("The File APIs are not fully supported in this browser.")}return this};function i(e,t,r){var n=t.bind(r);r.elt.addEventListener(e,n,false);r._events[e]=n}n.Element.prototype._setProperty=function(e,t){this[e]=t};t.exports=n.Element},{"./core":48}],53:[function(e,t,r){var n=e("./core");var i=e("./constants");n.Graphics=function(e,t,r,o){var a=r||i.P2D;var s=document.createElement("canvas");var l=this._userNode||document.body;l.appendChild(s);n.Element.call(this,s,o,false);this._styles=[];this.width=e;this.height=t;this._pixelDensity=o._pixelDensity;if(a===i.WEBGL){this._renderer=new n.Renderer3D(s,o,false)}else{this._renderer=new n.Renderer2D(s,o,false)}this._renderer.resize(e,t);this._renderer._applyDefaults();o._elements.push(this);for(var u in n.prototype){if(!this[u]){if(typeof n.prototype[u]==="function"){this[u]=n.prototype[u].bind(this)}else{this[u]=n.prototype[u]}}}return this};n.Graphics.prototype=Object.create(n.Element.prototype);t.exports=n.Graphics},{"./constants":47,"./core":48}],54:[function(e,t,r){var n=e("./core");var i=e("../core/constants");n.Renderer=function(e,t,r){n.Element.call(this,e,t);this.canvas=e;this._pInst=t;if(r){this._isMainCanvas=true;this._pInst._setProperty("_curElement",this);this._pInst._setProperty("canvas",this.canvas);this._pInst._setProperty("width",this.width);this._pInst._setProperty("height",this.height)}else{this.canvas.style.display="none";this._styles=[]}this._textSize=12;this._textLeading=15;this._textFont="sans-serif";this._textStyle=i.NORMAL;this._textAscent=null;this._textDescent=null;this._rectMode=i.CORNER;this._ellipseMode=i.CENTER;this._curveTightness=0;this._imageMode=i.CORNER;this._tint=null;this._doStroke=true;this._doFill=true;this._strokeSet=false;this._fillSet=false;this._colorMode=i.RGB;this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]}};n.Renderer.prototype=Object.create(n.Element.prototype);n.Renderer.prototype.resize=function(e,t){this.width=e;this.height=t;this.elt.width=e*this._pInst._pixelDensity;this.elt.height=t*this._pInst._pixelDensity;this.elt.style.width=e+"px";this.elt.style.height=t+"px";if(this._isMainCanvas){this._pInst._setProperty("width",this.width);this._pInst._setProperty("height",this.height)}};n.Renderer.prototype.textLeading=function(e){if(arguments.length&&arguments[0]){this._setProperty("_textLeading",e);return this}return this._textLeading};n.Renderer.prototype.textSize=function(e){if(arguments.length&&arguments[0]){this._setProperty("_textSize",e);this._setProperty("_textLeading",e*i._DEFAULT_LEADMULT);return this._applyTextProperties()}return this._textSize};n.Renderer.prototype.textStyle=function(e){if(arguments.length&&arguments[0]){if(e===i.NORMAL||e===i.ITALIC||e===i.BOLD){this._setProperty("_textStyle",e)}return this._applyTextProperties()}return this._textStyle};n.Renderer.prototype.textAscent=function(){if(this._textAscent===null){this._updateTextMetrics()}return this._textAscent};n.Renderer.prototype.textDescent=function(){if(this._textDescent===null){this._updateTextMetrics()}return this._textDescent};n.Renderer.prototype._isOpenType=function(e){e=e||this._textFont;return typeof e==="object"&&e.font&&e.font.supported};n.Renderer.prototype._updateTextMetrics=function(){if(this._isOpenType()){this._setProperty("_textAscent",this._textFont._textAscent());this._setProperty("_textDescent",this._textFont._textDescent());return this}var e=document.createElement("span");e.style.fontFamily=this._textFont;e.style.fontSize=this._textSize+"px";e.innerHTML="ABCjgq|";var t=document.createElement("div");t.style.display="inline-block";t.style.width="1px";t.style.height="0px";var r=document.createElement("div");r.appendChild(e);r.appendChild(t);r.style.height="0px";r.style.overflow="hidden";document.body.appendChild(r);t.style.verticalAlign="baseline";var n=o(t);var i=o(e);var a=n[1]-i[1];t.style.verticalAlign="bottom";n=o(t);i=o(e);var s=n[1]-i[1];var l=s-a;document.body.removeChild(r);this._setProperty("_textAscent",a);this._setProperty("_textDescent",l);return this};function o(e){var t=0,r=0;if(e.offsetParent){do{t+=e.offsetLeft;r+=e.offsetTop}while(e=e.offsetParent)}else{t+=e.offsetLeft;r+=e.offsetTop}return[t,r]}t.exports=n.Renderer},{"../core/constants":47,"./core":48}],55:[function(e,t,r){var n=e("./core");var i=e("./canvas");var o=e("./constants");var a=e("../image/filters");e("./p5.Renderer");var s="rgba(0,0,0,0)";n.Renderer2D=function(e,t,r){n.Renderer.call(this,e,t,r);this.drawingContext=this.canvas.getContext("2d");this._pInst._setProperty("drawingContext",this.drawingContext);return this};n.Renderer2D.prototype=Object.create(n.Renderer.prototype);n.Renderer2D.prototype._applyDefaults=function(){this.drawingContext.fillStyle=o._DEFAULT_FILL;this.drawingContext.strokeStyle=o._DEFAULT_STROKE;this.drawingContext.lineCap=o.ROUND;this.drawingContext.font="normal 12px sans-serif"};n.Renderer2D.prototype.resize=function(e,t){n.Renderer.prototype.resize.call(this,e,t);this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)};n.Renderer2D.prototype.background=function(){this.drawingContext.save();this.drawingContext.setTransform(1,0,0,1,0,0);this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity);if(arguments[0]instanceof n.Image){this._pInst.image(arguments[0],0,0,this.width,this.height)}else{var e=this.drawingContext.fillStyle;var t=this._pInst.color.apply(this._pInst,arguments);var r=t.toString();this.drawingContext.fillStyle=r;this.drawingContext.fillRect(0,0,this.width,this.height);this.drawingContext.fillStyle=e}this.drawingContext.restore()};n.Renderer2D.prototype.clear=function(){this.drawingContext.clearRect(0,0,this.width,this.height)};n.Renderer2D.prototype.fill=function(){var e=this.drawingContext;var t=this._pInst.color.apply(this._pInst,arguments);e.fillStyle=t.toString()};n.Renderer2D.prototype.stroke=function(){var e=this.drawingContext;var t=this._pInst.color.apply(this._pInst,arguments);e.strokeStyle=t.toString()};n.Renderer2D.prototype.image=function(e,t,r,i,o,a,s,l,u){var h;try{if(this._tint){if(n.MediaElement&&e instanceof n.MediaElement){e.loadPixels()}if(e.canvas){h=this._getTintedImageCanvas(e)}}if(!h){h=e.canvas||e.elt}this.drawingContext.drawImage(h,t,r,i,o,a,s,l,u)}catch(f){if(f.name!=="NS_ERROR_NOT_AVAILABLE"){throw f}}};n.Renderer2D.prototype._getTintedImageCanvas=function(e){if(!e.canvas){return e}var t=a._toPixels(e.canvas);var r=document.createElement("canvas");r.width=e.canvas.width;r.height=e.canvas.height;var n=r.getContext("2d");var i=n.createImageData(e.canvas.width,e.canvas.height);var o=i.data;for(var s=0;s<t.length;s+=4){var l=t[s];var u=t[s+1];var h=t[s+2];var f=t[s+3];o[s]=l*this._tint[0]/255;o[s+1]=u*this._tint[1]/255;o[s+2]=h*this._tint[2]/255;o[s+3]=f*this._tint[3]/255}n.putImageData(i,0,0);return r};n.Renderer2D.prototype.blendMode=function(e){this.drawingContext.globalCompositeOperation=e};n.Renderer2D.prototype.blend=function(){var e=this.drawingContext.globalCompositeOperation;var t=arguments[arguments.length-1];var r=Array.prototype.slice.call(arguments,0,arguments.length-1);this.drawingContext.globalCompositeOperation=t;this._pInst.copy.apply(this._pInst,r);this.drawingContext.globalCompositeOperation=e};n.Renderer2D.prototype.copy=function(){var e,t,r,i,o,a,s,l,u;if(arguments.length===9){e=arguments[0];t=arguments[1];r=arguments[2];i=arguments[3];o=arguments[4];a=arguments[5];s=arguments[6];l=arguments[7];u=arguments[8]}else if(arguments.length===8){e=this._pInst;t=arguments[0];r=arguments[1];i=arguments[2];o=arguments[3];a=arguments[4];s=arguments[5];l=arguments[6];u=arguments[7]}else{throw new Error("Signature not supported")}n.Renderer2D._copyHelper(e,t,r,i,o,a,s,l,u)};n.Renderer2D._copyHelper=function(e,t,r,n,i,o,a,s,l){var u=e.canvas.width/e.width;this.drawingContext.drawImage(e.canvas,u*t,u*r,u*n,u*i,o,a,s,l)};n.Renderer2D.prototype.get=function(e,t,r,i){if(e===undefined&&t===undefined&&r===undefined&&i===undefined){e=0;t=0;r=this.width;i=this.height}else if(r===undefined&&i===undefined){r=1;i=1}if(e+r<0||t+i<0||e>this.width||t>this.height){return[0,0,0,255]}var o=this._pInst||this;var a=o._pixelDensity;this.loadPixels.call(o);e=Math.floor(e);t=Math.floor(t);if(r===1&&i===1){return[o.pixels[a*4*(t*this.width+e)],o.pixels[a*(4*(t*this.width+e)+1)],o.pixels[a*(4*(t*this.width+e)+2)],o.pixels[a*(4*(t*this.width+e)+3)]]}else{var s=e*a;var l=t*a;var u=Math.min(r,o.width);var h=Math.min(i,o.height);var f=u*a;

var c=h*a;var p=new n.Image(u,h);p.canvas.getContext("2d").drawImage(this.canvas,s,l,f,c,0,0,u,h);return p}};n.Renderer2D.prototype.loadPixels=function(){var e=this._pixelDensity||this._pInst._pixelDensity;var t=this.width*e;var r=this.height*e;var n=this.drawingContext.getImageData(0,0,t,r);if(this._pInst){this._pInst._setProperty("imageData",n);this._pInst._setProperty("pixels",n.data)}else{this._setProperty("imageData",n);this._setProperty("pixels",n.data)}};n.Renderer2D.prototype.set=function(e,t,r){e=Math.floor(e);t=Math.floor(t);if(r instanceof n.Image){this.drawingContext.save();this.drawingContext.setTransform(1,0,0,1,0,0);this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity);this.drawingContext.drawImage(r.canvas,e,t);this.loadPixels.call(this._pInst);this.drawingContext.restore()}else{var i=this._pInst||this;var o=0,a=0,s=0,l=0;var u=4*(t*i._pixelDensity*(this.width*i._pixelDensity)+e*i._pixelDensity);if(!i.imageData){i.loadPixels.call(i)}if(typeof r==="number"){if(u<i.pixels.length){o=r;a=r;s=r;l=255}}else if(r instanceof Array){if(r.length<4){throw new Error("pixel array must be of the form [R, G, B, A]")}if(u<i.pixels.length){o=r[0];a=r[1];s=r[2];l=r[3]}}else if(r instanceof n.Color){if(u<i.pixels.length){o=r.levels[0];a=r.levels[1];s=r.levels[2];l=r.levels[3]}}for(var h=0;h<i._pixelDensity;h++){for(var f=0;f<i._pixelDensity;f++){u=4*((t*i._pixelDensity+f)*this.width*i._pixelDensity+(e*i._pixelDensity+h));i.pixels[u]=o;i.pixels[u+1]=a;i.pixels[u+2]=s;i.pixels[u+3]=l}}}};n.Renderer2D.prototype.updatePixels=function(e,t,r,n){var i=this._pixelDensity||this._pInst._pixelDensity;if(e===undefined&&t===undefined&&r===undefined&&n===undefined){e=0;t=0;r=this.width;n=this.height}r*=i;n*=i;if(this._pInst){this.drawingContext.putImageData(this._pInst.imageData,e,t,0,0,r,n)}else{this.drawingContext.putImageData(this.imageData,e,t,0,0,r,n)}};n.Renderer2D.prototype._acuteArcToBezier=function l(e,t){var r=t/2,n=Math.cos(r),i=Math.sin(r),o=1/Math.tan(r),a=e+r,s=Math.cos(a),l=Math.sin(a),u=(4-n)/3,h=i+(n-u)*o;return{ax:Math.cos(e),ay:Math.sin(e),bx:u*s+h*l,by:u*l-h*s,cx:u*s-h*l,cy:u*l+h*s,dx:Math.cos(e+t),dy:Math.sin(e+t)}};n.Renderer2D.prototype.arc=function(e,t,r,n,a,s,l){var u=this.drawingContext;var h=i.arcModeAdjust(e,t,r,n,this._ellipseMode);var f=h.w/2;var c=h.h/2;var p=1e-5;var d=0;var m=[];while(s-a>p){d=Math.min(s-a,o.HALF_PI);m.push(this._acuteArcToBezier(a,d));a+=d}if(this._doFill){u.beginPath();m.forEach(function(e,t){if(t===0){u.moveTo(h.x+e.ax*f,h.y+e.ay*c)}u.bezierCurveTo(h.x+e.bx*f,h.y+e.by*c,h.x+e.cx*f,h.y+e.cy*c,h.x+e.dx*f,h.y+e.dy*c)});if(l===o.PIE||l==null){u.lineTo(h.x,h.y)}u.closePath();u.fill()}if(this._doStroke){u.beginPath();m.forEach(function(e,t){if(t===0){u.moveTo(h.x+e.ax*f,h.y+e.ay*c)}u.bezierCurveTo(h.x+e.bx*f,h.y+e.by*c,h.x+e.cx*f,h.y+e.cy*c,h.x+e.dx*f,h.y+e.dy*c)});if(l===o.PIE){u.lineTo(h.x,h.y);u.closePath()}else if(l===o.CHORD){u.closePath()}u.stroke()}return this};n.Renderer2D.prototype.ellipse=function(e,t,r,n){var o=this.drawingContext;var a=this._doFill,l=this._doStroke;if(a&&!l){if(o.fillStyle===s){return this}}else if(!a&&l){if(o.strokeStyle===s){return this}}var u=i.modeAdjust(e,t,r,n,this._ellipseMode);var h=.5522847498,f=u.w/2*h,c=u.h/2*h,p=u.x+u.w,d=u.y+u.h,m=u.x+u.w/2,g=u.y+u.h/2;o.beginPath();o.moveTo(u.x,g);o.bezierCurveTo(u.x,g-c,m-f,u.y,m,u.y);o.bezierCurveTo(m+f,u.y,p,g-c,p,g);o.bezierCurveTo(p,g+c,m+f,d,m,d);o.bezierCurveTo(m-f,d,u.x,g+c,u.x,g);o.closePath();if(a){o.fill()}if(l){o.stroke()}};n.Renderer2D.prototype.line=function(e,t,r,n){var i=this.drawingContext;if(!this._doStroke){return this}else if(i.strokeStyle===s){return this}if(i.lineWidth%2===1){i.translate(.5,.5)}i.beginPath();i.moveTo(e,t);i.lineTo(r,n);i.stroke();if(i.lineWidth%2===1){i.translate(-.5,-.5)}return this};n.Renderer2D.prototype.point=function(e,t){var r=this.drawingContext;var n=r.strokeStyle;var i=r.fillStyle;if(!this._doStroke){return this}else if(r.strokeStyle===s){return this}e=Math.round(e);t=Math.round(t);r.fillStyle=n;if(r.lineWidth>1){r.beginPath();r.arc(e,t,r.lineWidth/2,0,o.TWO_PI,false);r.fill()}else{r.fillRect(e,t,1,1)}r.fillStyle=i};n.Renderer2D.prototype.quad=function(e,t,r,n,i,o,a,l){var u=this.drawingContext;var h=this._doFill,f=this._doStroke;if(h&&!f){if(u.fillStyle===s){return this}}else if(!h&&f){if(u.strokeStyle===s){return this}}u.beginPath();u.moveTo(e,t);u.lineTo(r,n);u.lineTo(i,o);u.lineTo(a,l);u.closePath();if(h){u.fill()}if(f){u.stroke()}return this};n.Renderer2D.prototype.rect=function(e,t,r,n,o,a,l,u){var h=this.drawingContext;var f=this._doFill,c=this._doStroke;if(f&&!c){if(h.fillStyle===s){return this}}else if(!f&&c){if(h.strokeStyle===s){return this}}var p=i.modeAdjust(e,t,r,n,this._rectMode);if(this._doStroke&&h.lineWidth%2===1){h.translate(.5,.5)}h.beginPath();if(typeof o==="undefined"){h.rect(p.x,p.y,p.w,p.h)}else{if(typeof a==="undefined"){a=o}if(typeof l==="undefined"){l=a}if(typeof u==="undefined"){u=l}var d=p.x;var m=p.y;var g=p.w;var v=p.h;var y=g/2;var _=v/2;if(g<2*o){o=y}if(v<2*o){o=_}if(g<2*a){a=y}if(v<2*a){a=_}if(g<2*l){l=y}if(v<2*l){l=_}if(g<2*u){u=y}if(v<2*u){u=_}h.beginPath();h.moveTo(d+o,m);h.arcTo(d+g,m,d+g,m+v,a);h.arcTo(d+g,m+v,d,m+v,l);h.arcTo(d,m+v,d,m,u);h.arcTo(d,m,d+g,m,o);h.closePath()}if(this._doFill){h.fill()}if(this._doStroke){h.stroke()}if(this._doStroke&&h.lineWidth%2===1){h.translate(-.5,-.5)}return this};n.Renderer2D.prototype.triangle=function(e,t,r,n,i,o){var a=this.drawingContext;var l=this._doFill,u=this._doStroke;if(l&&!u){if(a.fillStyle===s){return this}}else if(!l&&u){if(a.strokeStyle===s){return this}}a.beginPath();a.moveTo(e,t);a.lineTo(r,n);a.lineTo(i,o);a.closePath();if(l){a.fill()}if(u){a.stroke()}};n.Renderer2D.prototype.endShape=function(e,t,r,n,i,a,s){if(t.length===0){return this}if(!this._doStroke&&!this._doFill){return this}var l=e===o.CLOSE;var u;if(l&&!a){t.push(t[0])}var h,f;var c=t.length;if(r&&(s===o.POLYGON||s===null)){if(c>3){var p=[],d=1-this._curveTightness;this.drawingContext.beginPath();this.drawingContext.moveTo(t[1][0],t[1][1]);for(h=1;h+2<c;h++){u=t[h];p[0]=[u[0],u[1]];p[1]=[u[0]+(d*t[h+1][0]-d*t[h-1][0])/6,u[1]+(d*t[h+1][1]-d*t[h-1][1])/6];p[2]=[t[h+1][0]+(d*t[h][0]-d*t[h+2][0])/6,t[h+1][1]+(d*t[h][1]-d*t[h+2][1])/6];p[3]=[t[h+1][0],t[h+1][1]];this.drawingContext.bezierCurveTo(p[1][0],p[1][1],p[2][0],p[2][1],p[3][0],p[3][1])}if(l){this.drawingContext.lineTo(t[h+1][0],t[h+1][1])}this._doFillStrokeClose()}}else if(n&&(s===o.POLYGON||s===null)){this.drawingContext.beginPath();for(h=0;h<c;h++){if(t[h].isVert){if(t[h].moveTo){this.drawingContext.moveTo(t[h][0],t[h][1])}else{this.drawingContext.lineTo(t[h][0],t[h][1])}}else{this.drawingContext.bezierCurveTo(t[h][0],t[h][1],t[h][2],t[h][3],t[h][4],t[h][5])}}this._doFillStrokeClose()}else if(i&&(s===o.POLYGON||s===null)){this.drawingContext.beginPath();for(h=0;h<c;h++){if(t[h].isVert){if(t[h].moveTo){this.drawingContext.moveTo([0],t[h][1])}else{this.drawingContext.lineTo(t[h][0],t[h][1])}}else{this.drawingContext.quadraticCurveTo(t[h][0],t[h][1],t[h][2],t[h][3])}}this._doFillStrokeClose()}else{if(s===o.POINTS){for(h=0;h<c;h++){u=t[h];if(this._doStroke){this._pInst.stroke(u[6])}this._pInst.point(u[0],u[1])}}else if(s===o.LINES){for(h=0;h+1<c;h+=2){u=t[h];if(this._doStroke){this._pInst.stroke(t[h+1][6])}this._pInst.line(u[0],u[1],t[h+1][0],t[h+1][1])}}else if(s===o.TRIANGLES){for(h=0;h+2<c;h+=3){u=t[h];this.drawingContext.beginPath();this.drawingContext.moveTo(u[0],u[1]);this.drawingContext.lineTo(t[h+1][0],t[h+1][1]);this.drawingContext.lineTo(t[h+2][0],t[h+2][1]);this.drawingContext.lineTo(u[0],u[1]);if(this._doFill){this._pInst.fill(t[h+2][5]);this.drawingContext.fill()}if(this._doStroke){this._pInst.stroke(t[h+2][6]);this.drawingContext.stroke()}this.drawingContext.closePath()}}else if(s===o.TRIANGLE_STRIP){for(h=0;h+1<c;h++){u=t[h];this.drawingContext.beginPath();this.drawingContext.moveTo(t[h+1][0],t[h+1][1]);this.drawingContext.lineTo(u[0],u[1]);if(this._doStroke){this._pInst.stroke(t[h+1][6])}if(this._doFill){this._pInst.fill(t[h+1][5])}if(h+2<c){this.drawingContext.lineTo(t[h+2][0],t[h+2][1]);if(this._doStroke){this._pInst.stroke(t[h+2][6])}if(this._doFill){this._pInst.fill(t[h+2][5])}}this._doFillStrokeClose()}}else if(s===o.TRIANGLE_FAN){if(c>2){this.drawingContext.beginPath();this.drawingContext.moveTo(t[0][0],t[0][1]);this.drawingContext.lineTo(t[1][0],t[1][1]);this.drawingContext.lineTo(t[2][0],t[2][1]);if(this._doFill){this._pInst.fill(t[2][5])}if(this._doStroke){this._pInst.stroke(t[2][6])}this._doFillStrokeClose();for(h=3;h<c;h++){u=t[h];this.drawingContext.beginPath();this.drawingContext.moveTo(t[0][0],t[0][1]);this.drawingContext.lineTo(t[h-1][0],t[h-1][1]);this.drawingContext.lineTo(u[0],u[1]);if(this._doFill){this._pInst.fill(u[5])}if(this._doStroke){this._pInst.stroke(u[6])}this._doFillStrokeClose()}}}else if(s===o.QUADS){for(h=0;h+3<c;h+=4){u=t[h];this.drawingContext.beginPath();this.drawingContext.moveTo(u[0],u[1]);for(f=1;f<4;f++){this.drawingContext.lineTo(t[h+f][0],t[h+f][1])}this.drawingContext.lineTo(u[0],u[1]);if(this._doFill){this._pInst.fill(t[h+3][5])}if(this._doStroke){this._pInst.stroke(t[h+3][6])}this._doFillStrokeClose()}}else if(s===o.QUAD_STRIP){if(c>3){for(h=0;h+1<c;h+=2){u=t[h];this.drawingContext.beginPath();if(h+3<c){this.drawingContext.moveTo(t[h+2][0],t[h+2][1]);this.drawingContext.lineTo(u[0],u[1]);this.drawingContext.lineTo(t[h+1][0],t[h+1][1]);this.drawingContext.lineTo(t[h+3][0],t[h+3][1]);if(this._doFill){this._pInst.fill(t[h+3][5])}if(this._doStroke){this._pInst.stroke(t[h+3][6])}}else{this.drawingContext.moveTo(u[0],u[1]);this.drawingContext.lineTo(t[h+1][0],t[h+1][1])}this._doFillStrokeClose()}}}else{this.drawingContext.beginPath();this.drawingContext.moveTo(t[0][0],t[0][1]);for(h=1;h<c;h++){u=t[h];if(u.isVert){if(u.moveTo){this.drawingContext.moveTo(u[0],u[1])}else{this.drawingContext.lineTo(u[0],u[1])}}}this._doFillStrokeClose()}}r=false;n=false;i=false;a=false;if(l){t.pop()}return this};n.Renderer2D.prototype.noSmooth=function(){if("imageSmoothingEnabled"in this.drawingContext){this.drawingContext.imageSmoothingEnabled=false}else if("mozImageSmoothingEnabled"in this.drawingContext){this.drawingContext.mozImageSmoothingEnabled=false}else if("webkitImageSmoothingEnabled"in this.drawingContext){this.drawingContext.webkitImageSmoothingEnabled=false}else if("msImageSmoothingEnabled"in this.drawingContext){this.drawingContext.msImageSmoothingEnabled=false}return this};n.Renderer2D.prototype.smooth=function(){if("imageSmoothingEnabled"in this.drawingContext){this.drawingContext.imageSmoothingEnabled=true}else if("mozImageSmoothingEnabled"in this.drawingContext){this.drawingContext.mozImageSmoothingEnabled=true}else if("webkitImageSmoothingEnabled"in this.drawingContext){this.drawingContext.webkitImageSmoothingEnabled=true}else if("msImageSmoothingEnabled"in this.drawingContext){this.drawingContext.msImageSmoothingEnabled=true}return this};n.Renderer2D.prototype.strokeCap=function(e){if(e===o.ROUND||e===o.SQUARE||e===o.PROJECT){this.drawingContext.lineCap=e}return this};n.Renderer2D.prototype.strokeJoin=function(e){if(e===o.ROUND||e===o.BEVEL||e===o.MITER){this.drawingContext.lineJoin=e}return this};n.Renderer2D.prototype.strokeWeight=function(e){if(typeof e==="undefined"||e===0){this.drawingContext.lineWidth=1e-4}else{this.drawingContext.lineWidth=e}return this};n.Renderer2D.prototype._getFill=function(){return this.drawingContext.fillStyle};n.Renderer2D.prototype._getStroke=function(){return this.drawingContext.strokeStyle};n.Renderer2D.prototype.bezier=function(e,t,r,n,i,o,a,s){this._pInst.beginShape();this._pInst.vertex(e,t);this._pInst.bezierVertex(r,n,i,o,a,s);this._pInst.endShape();return this};n.Renderer2D.prototype.curve=function(e,t,r,n,i,o,a,s){this._pInst.beginShape();this._pInst.curveVertex(e,t);this._pInst.curveVertex(r,n);this._pInst.curveVertex(i,o);this._pInst.curveVertex(a,s);this._pInst.endShape();return this};n.Renderer2D.prototype._doFillStrokeClose=function(){if(this._doFill){this.drawingContext.fill()}if(this._doStroke){this.drawingContext.stroke()}this.drawingContext.closePath()};n.Renderer2D.prototype.applyMatrix=function(e,t,r,n,i,o){this.drawingContext.transform(e,t,r,n,i,o)};n.Renderer2D.prototype.resetMatrix=function(){this.drawingContext.setTransform(1,0,0,1,0,0);this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity);return this};n.Renderer2D.prototype.rotate=function(e){this.drawingContext.rotate(e)};n.Renderer2D.prototype.scale=function(e,t){this.drawingContext.scale(e,t);return this};n.Renderer2D.prototype.shearX=function(e){if(this._pInst._angleMode===o.DEGREES){e=this._pInst.radians(e)}this.drawingContext.transform(1,0,this._pInst.tan(e),1,0,0);return this};n.Renderer2D.prototype.shearY=function(e){if(this._pInst._angleMode===o.DEGREES){e=this._pInst.radians(e)}this.drawingContext.transform(1,this._pInst.tan(e),0,1,0,0);return this};n.Renderer2D.prototype.translate=function(e,t){console.log(e,t);this.drawingContext.translate(e,t);return this};n.Renderer2D.prototype.text=function(e,t,r,n,i){var a=this._pInst,s,l,u,h,f,c,p,d,m,g,v=Number.MAX_VALUE;if(!(this._doFill||this._doStroke)){return}if(typeof e!=="string"){e=e.toString()}e=e.replace(/(\t)/g,"  ");s=e.split("\n");if(typeof n!=="undefined"){m=0;for(u=0;u<s.length;u++){f="";d=s[u].split(" ");for(l=0;l<d.length;l++){c=f+d[l]+" ";p=this.textWidth(c);if(p>n){f=d[l]+" ";m+=a.textLeading()}else{f=c}}}if(this._rectMode===o.CENTER){t-=n/2;r-=i/2}switch(this.drawingContext.textAlign){case o.CENTER:t+=n/2;break;case o.RIGHT:t+=n;break}if(typeof i!=="undefined"){switch(this.drawingContext.textBaseline){case o.BOTTOM:r+=i-m;break;case o._CTX_MIDDLE:r+=(i-m)/2;break;case o.BASELINE:g=true;this.drawingContext.textBaseline=o.TOP;break}v=r+i-a.textAscent()}for(u=0;u<s.length;u++){f="";d=s[u].split(" ");for(l=0;l<d.length;l++){c=f+d[l]+" ";p=this.textWidth(c);if(p>n&&f.length>0){this._renderText(a,f,t,r,v);f=d[l]+" ";r+=a.textLeading()}else{f=c}}this._renderText(a,f,t,r,v);r+=a.textLeading()}}else{for(h=0;h<s.length;h++){this._renderText(a,s[h],t,r,v);r+=a.textLeading()}}if(g){this.drawingContext.textBaseline=o.BASELINE}return a};n.Renderer2D.prototype._renderText=function(e,t,r,n,i){if(n>=i){return}e.push();if(!this._isOpenType()){if(this._doStroke&&this._strokeSet){this.drawingContext.strokeText(t,r,n)}if(this._doFill){this.drawingContext.fillStyle=this._fillSet?this.drawingContext.fillStyle:o._DEFAULT_TEXT_FILL;this.drawingContext.fillText(t,r,n)}}else{this._textFont._renderPath(t,r,n,{renderer:this})}e.pop();return e};n.Renderer2D.prototype.textWidth=function(e){if(this._isOpenType()){return this._textFont._textWidth(e)}return this.drawingContext.measureText(e).width};n.Renderer2D.prototype.textAlign=function(e,t){if(arguments.length){if(e===o.LEFT||e===o.RIGHT||e===o.CENTER){this.drawingContext.textAlign=e}if(t===o.TOP||t===o.BOTTOM||t===o.CENTER||t===o.BASELINE){if(t===o.CENTER){this.drawingContext.textBaseline=o._CTX_MIDDLE}else{this.drawingContext.textBaseline=t}}return this._pInst}else{var r=this.drawingContext.textBaseline;if(r===o._CTX_MIDDLE){r=o.CENTER}return{horizontal:this.drawingContext.textAlign,vertical:r}}};n.Renderer2D.prototype._applyTextProperties=function(){var e,t=this._pInst;this._setProperty("_textAscent",null);this._setProperty("_textDescent",null);e=this._textFont;if(this._isOpenType()){e=this._textFont.font.familyName;this._setProperty("_textStyle",this._textFont.font.styleName)}this.drawingContext.font=this._textStyle+" "+this._textSize+"px "+e;return t};n.Renderer2D.prototype.push=function(){this.drawingContext.save()};n.Renderer2D.prototype.pop=function(){this.drawingContext.restore()};t.exports=n.Renderer2D},{"../image/filters":65,"./canvas":46,"./constants":47,"./core":48,"./p5.Renderer":54}],56:[function(e,t,r){var n=e("./core");var i=e("./constants");e("./p5.Graphics");e("./p5.Renderer2D");e("../3d/p5.Renderer3D");var o="defaultCanvas0";n.prototype.createCanvas=function(e,t,r){var a=r||i.P2D;var s,l;if(arguments[3]){s=typeof arguments[3]==="boolean"?arguments[3]:false}if(a===i.WEBGL){l=document.getElementById(o);if(l){l.parentNode.removeChild(l)}l=document.createElement("canvas");l.id=o}else{if(s){l=document.createElement("canvas");var u=0;while(document.getElementById("defaultCanvas"+u)){u++}o="defaultCanvas"+u;l.id=o}else{l=this.canvas}}if(!this._setupDone){l.className+=" p5_hidden";l.style.visibility="hidden"}if(this._userNode){this._userNode.appendChild(l)}else{document.body.appendChild(l)}if(a===i.WEBGL){this._setProperty("_renderer",new n.Renderer3D(l,this,true));this._isdefaultGraphics=true}else{if(!this._isdefaultGraphics){this._setProperty("_renderer",new n.Renderer2D(l,this,true));this._isdefaultGraphics=true}}this._renderer.resize(e,t);this._renderer._applyDefaults();if(s){this._elements.push(this._renderer)}return this._renderer};n.prototype.resizeCanvas=function(e,t,r){if(this._renderer){var n={};for(var i in this.drawingContext){var o=this.drawingContext[i];if(typeof o!=="object"&&typeof o!=="function"){n[i]=o}}this._renderer.resize(e,t);for(var a in n){this.drawingContext[a]=n[a]}if(!r){this.redraw()}}};n.prototype.noCanvas=function(){if(this.canvas){this.canvas.parentNode.removeChild(this.canvas)}};n.prototype.createGraphics=function(e,t,r){return new n.Graphics(e,t,r,this)};n.prototype.blendMode=function(e){if(e===i.BLEND||e===i.DARKEST||e===i.LIGHTEST||e===i.DIFFERENCE||e===i.MULTIPLY||e===i.EXCLUSION||e===i.SCREEN||e===i.REPLACE||e===i.OVERLAY||e===i.HARD_LIGHT||e===i.SOFT_LIGHT||e===i.DODGE||e===i.BURN||e===i.ADD||e===i.NORMAL){this._renderer.blendMode(e)}else{throw new Error("Mode "+e+" not recognized.")}};t.exports=n},{"../3d/p5.Renderer3D":36,"./constants":47,"./core":48,"./p5.Graphics":53,"./p5.Renderer2D":55}],57:[function(e,t,r){window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}();window.performance=window.performance||{};window.performance.now=function(){var e=Date.now();return window.performance.now||window.performance.mozNow||window.performance.msNow||window.performance.oNow||window.performance.webkitNow||function(){return Date.now()-e}}();(function(){"use strict";if(typeof Uint8ClampedArray!=="undefined"){Uint8ClampedArray.prototype.slice=Array.prototype.slice}})()},{}],58:[function(e,t,r){"use strict";var n=e("./core");n.prototype.exit=function(){throw"exit() not implemented, see remove()"};n.prototype.noLoop=function(){this._loop=false};n.prototype.loop=function(){this._loop=true;this._draw()};n.prototype.push=function(){this._renderer.push();this._styles.push({_doStroke:this._renderer._doStroke,_doFill:this._renderer._doFill,_tint:this._renderer._tint,_imageMode:this._renderer._imageMode,_rectMode:this._renderer._rectMode,_ellipseMode:this._renderer._ellipseMode,_colorMode:this._renderer._colorMode,_textFont:this._renderer._textFont,_textLeading:this._renderer._textLeading,_textSize:this._renderer._textSize,_textStyle:this._renderer._textStyle})};n.prototype.pop=function(){this._renderer.pop();var e=this._styles.pop();for(var t in e){this._renderer[t]=e[t]}};n.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")};n.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")};n.prototype.redraw=function(){var e=this.setup||window.setup;var t=this.draw||window.draw;if(typeof t==="function"){this.push();if(typeof e==="undefined"){this.scale(this._pixelDensity,this._pixelDensity)}var r=this;this._registeredMethods.pre.forEach(function(e){e.call(r)});t();this._registeredMethods.post.forEach(function(e){e.call(r)});this.pop()}};n.prototype.size=function(){var e="size() is not a valid p5 function, to set the size of the ";e+="drawing canvas, please use createCanvas() instead";throw e};t.exports=n},{"./core":48}],59:[function(e,t,r){"use strict";var n=e("./core");var i=e("./constants");n.prototype.applyMatrix=function(e,t,r,n,i,o){this._renderer.applyMatrix(e,t,r,n,i,o);return this};n.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")};n.prototype.printMatrix=function(){throw new Error("printMatrix() not implemented")};n.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")};n.prototype.resetMatrix=function(){this._renderer.resetMatrix();return this};n.prototype.rotate=function(){var e=arguments[0];if(this._angleMode===i.DEGREES){e=this.radians(e)}if(arguments.length>1){this._renderer.rotate(e,arguments[1])}else{this._renderer.rotate(e)}return this};n.prototype.rotateX=function(e){var t=new Array(arguments.length);for(var r=0;r<t.length;++r){t[r]=arguments[r]}if(this._renderer.isP3D){this._validateParameters("rotateX",t,[["Number"]]);this._renderer.rotateX(e)}else{throw"not supported in p2d. Please use webgl mode"}return this};n.prototype.rotateY=function(e){if(this._renderer.isP3D){var t=new Array(arguments.length);for(var r=0;r<t.length;++r){t[r]=arguments[r]}this._validateParameters("rotateY",t,[["Number"]]);this._renderer.rotateY(e)}else{throw"not supported in p2d. Please use webgl mode"}return this};n.prototype.rotateZ=function(e){if(this._renderer.isP3D){var t=new Array(arguments.length);for(var r=0;r<t.length;++r){t[r]=arguments[r]}this._validateParameters("rotateZ",t,[["Number"]]);this._renderer.rotateZ(e)}else{throw"not supported in p2d. Please use webgl mode"}return this};n.prototype.scale=function(){var e,t,r;var i=new Array(arguments.length);for(var o=0;o<i.length;o++){i[o]=arguments[o]}if(i[0]instanceof n.Vector){e=i[0].x;t=i[0].y;r=i[0].z}else if(i[0]instanceof Array){e=i[0][0];t=i[0][1];r=i[0][2]||1}else{if(i.length===1){e=t=r=i[0]}else{e=i[0];t=i[1];r=i[2]||1}}if(this._renderer.isP3D){this._renderer.scale.call(this._renderer,e,t,r)}else{this._renderer.scale.call(this._renderer,e,t)}return this};n.prototype.shearX=function(e){if(this._angleMode===i.DEGREES){e=this.radians(e)}this._renderer.shearX(e);return this};n.prototype.shearY=function(e){if(this._angleMode===i.DEGREES){e=this.radians(e)}this._renderer.shearY(e);return this};n.prototype.translate=function(e,t,r){var n=new Array(arguments.length);for(var i=0;i<n.length;++i){n[i]=arguments[i]}console.log(e,t);if(this._renderer.isP3D){this._validateParameters("translate",n,[["Number","Number","Number"]]);this._renderer.translate(e,t,r)}else{this._validateParameters("translate",n,[["Number","Number"]]);this._renderer.translate(e,t)}return this};t.exports=n},{"./constants":47,"./core":48}],60:[function(e,t,r){"use strict";var n=e("./core");var i=e("./constants");var o=null;var a=[];var s=[];var l=false;var u=false;var h=false;var f=false;n.prototype.beginContour=function(){s=[];f=true;return this};n.prototype.beginShape=function(e){if(e===i.POINTS||e===i.LINES||e===i.TRIANGLES||e===i.TRIANGLE_FAN||e===i.TRIANGLE_STRIP||e===i.QUADS||e===i.QUAD_STRIP){o=e}else{o=null}if(this._renderer.isP3D){this._renderer.beginShape(e)}else{a=[];s=[]}return this};n.prototype.bezierVertex=function(e,t,r,n,i,o){if(a.length===0){throw"vertex() must be used once before calling bezierVertex()"}else{l=true;var u=[];for(var h=0;h<arguments.length;h++){u[h]=arguments[h]}u.isVert=false;if(f){s.push(u)}else{a.push(u)}}return this};n.prototype.curveVertex=function(e,t){u=true;this.vertex(e,t);return this};n.prototype.endContour=function(){var e=s[0].slice();e.isVert=s[0].isVert;e.moveTo=false;s.push(e);a.push(a[0]);for(var t=0;t<s.length;t++){a.push(s[t])}return this};n.prototype.endShape=function(e){if(this._renderer.isP3D){this._renderer.endShape()}else{if(a.length===0){return this}if(!this._renderer._doStroke&&!this._renderer._doFill){return this}var t=e===i.CLOSE;if(t&&!f){a.push(a[0])}this._renderer.endShape(e,a,u,l,h,f,o);u=false;l=false;h=false;f=false;if(t){a.pop()}}return this};n.prototype.quadraticVertex=function(e,t,r,n){if(this._contourInited){var o={};o.x=e;o.y=t;o.x3=r;o.y3=n;o.type=i.QUADRATIC;this._contourVertices.push(o);return this}if(a.length>0){h=true;var l=[];for(var u=0;u<arguments.length;u++){l[u]=arguments[u]}l.isVert=false;if(f){s.push(l)}else{a.push(l)}}else{throw"vertex() must be used once before calling quadraticVertex()"}return this};n.prototype.vertex=function(e,t,r){var n=new Array(arguments.length);for(var i=0;i<n.length;++i){n[i]=arguments[i]}if(this._renderer.isP3D){this._validateParameters("vertex",n,[["Number","Number","Number"]]);this._renderer.vertex(arguments[0],arguments[1],arguments[2])}else{this._validateParameters("vertex",n,[["Number","Number"],["Number","Number","Number"]]);var o=[];o.isVert=true;o[0]=e;o[1]=t;o[2]=0;o[3]=0;o[4]=0;o[5]=this._renderer._getFill();o[6]=this._renderer._getStroke();if(r){o.moveTo=r}if(f){if(s.length===0){o.moveTo=true}s.push(o)}else{a.push(o)}}return this};t.exports=n},{"./constants":47,"./core":48}],61:[function(e,t,r){"use strict";var n=e("../core/core");n.prototype.deviceOrientation=undefined;n.prototype.accelerationX=0;n.prototype.accelerationY=0;n.prototype.accelerationZ=0;n.prototype.pAccelerationX=0;n.prototype.pAccelerationY=0;n.prototype.pAccelerationZ=0;n.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX);this._setProperty("pAccelerationY",this.accelerationY);this._setProperty("pAccelerationZ",this.accelerationZ)};n.prototype.rotationX=0;n.prototype.rotationY=0;n.prototype.rotationZ=0;n.prototype.pRotationX=0;n.prototype.pRotationY=0;n.prototype.pRotationZ=0;var i=0;var o=0;var a=0;var s="clockwise";var l="clockwise";var u="clockwise";var h;var f;var c;n.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX);this._setProperty("pRotationY",this.rotationY);this._setProperty("pRotationZ",this.rotationZ)};n.prototype.turnAxis=undefined;var p=.5;var d=30;n.prototype.setMoveThreshold=function(e){if(typeof e==="number"){p=e}};n.prototype.setShakeThreshold=function(e){if(typeof e==="number"){d=e}};n.prototype._ondeviceorientation=function(e){this._updatePRotations();this._setProperty("rotationX",e.beta);this._setProperty("rotationY",e.gamma);this._setProperty("rotationZ",e.alpha);this._handleMotion()};n.prototype._ondevicemotion=function(e){this._updatePAccelerations();this._setProperty("accelerationX",e.acceleration.x*2);this._setProperty("accelerationY",e.acceleration.y*2);this._setProperty("accelerationZ",e.acceleration.z*2);this._handleMotion()};n.prototype._handleMotion=function(){if(window.orientation===90||window.orientation===-90){this._setProperty("deviceOrientation","landscape")}else if(window.orientation===0){this._setProperty("deviceOrientation","portrait")}else if(window.orientation===undefined){this._setProperty("deviceOrientation","undefined")}var e=this.deviceMoved||window.deviceMoved;if(typeof e==="function"){if(Math.abs(this.accelerationX-this.pAccelerationX)>p||Math.abs(this.accelerationY-this.pAccelerationY)>p||Math.abs(this.accelerationZ-this.pAccelerationZ)>p){e()}}var t=this.deviceTurned||window.deviceTurned;if(typeof t==="function"){var r=this.rotationX+180;var n=this.pRotationX+180;var m=i+180;if(r-n>0&&r-n<270||r-n<-270){s="clockwise"}else if(r-n<0||r-n>270){s="counter-clockwise"}if(s!==h){m=r}if(Math.abs(r-m)>90&&Math.abs(r-m)<270){m=r;this._setProperty("turnAxis","X");t()}h=s;i=m-180;var g=this.rotationY+180;var v=this.pRotationY+180;var y=o+180;if(g-v>0&&g-v<270||g-v<-270){l="clockwise"}else if(g-v<0||g-this.pRotationY>270){l="counter-clockwise"}if(l!==f){y=g}if(Math.abs(g-y)>90&&Math.abs(g-y)<270){y=g;this._setProperty("turnAxis","Y");t()}f=l;o=y-180;if(this.rotationZ-this.pRotationZ>0&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270){u="clockwise"}else if(this.rotationZ-this.pRotationZ<0||this.rotationZ-this.pRotationZ>270){u="counter-clockwise"}if(u!==c){a=this.rotationZ}if(Math.abs(this.rotationZ-a)>90&&Math.abs(this.rotationZ-a)<270){a=this.rotationZ;this._setProperty("turnAxis","Z");t()}c=u;this._setProperty("turnAxis",undefined)}var _=this.deviceShaken||window.deviceShaken;if(typeof _==="function"){var b;var x;if(this.pAccelerationX!==null){b=Math.abs(this.accelerationX-this.pAccelerationX);x=Math.abs(this.accelerationY-this.pAccelerationY)}if(b+x>d){_()}}};t.exports=n},{"../core/core":48}],62:[function(e,t,r){"use strict";var n=e("../core/core");var i={};n.prototype.isKeyPressed=false;n.prototype.keyIsPressed=false;n.prototype.key="";n.prototype.keyCode=0;n.prototype._onkeydown=function(e){if(i[e.which]){return}this._setProperty("isKeyPressed",true);this._setProperty("keyIsPressed",true);this._setProperty("keyCode",e.which);i[e.which]=true;var t=String.fromCharCode(e.which);if(!t){t=e.which}this._setProperty("key",t);var r=this.keyPressed||window.keyPressed;if(typeof r==="function"&&!e.charCode){var n=r(e);if(n===false){e.preventDefault()}}};n.prototype._onkeyup=function(e){var t=this.keyReleased||window.keyReleased;this._setProperty("isKeyPressed",false);this._setProperty("keyIsPressed",false);this._setProperty("_lastKeyCodeTyped",null);i[e.which]=false;var r=String.fromCharCode(e.which);if(!r){r=e.which}this._setProperty("key",r);this._setProperty("keyCode",e.which);if(typeof t==="function"){var n=t(e);if(n===false){e.preventDefault()}}};n.prototype._onkeypress=function(e){if(e.which===this._lastKeyCodeTyped){return}this._setProperty("keyCode",e.which);this._setProperty("_lastKeyCodeTyped",e.which);this._setProperty("key",String.fromCharCode(e.which));var t=this.keyTyped||window.keyTyped;if(typeof t==="function"){var r=t(e);if(r===false){e.preventDefault()}}};n.prototype._onblur=function(e){i={}};n.prototype.keyIsDown=function(e){return i[e]};t.exports=n},{"../core/core":48}],63:[function(e,t,r){"use strict";var n=e("../core/core");var i=e("../core/constants");n.prototype._nextMouseX=0;n.prototype._nextMouseY=0;n.prototype.mouseX=0;n.prototype.mouseY=0;n.prototype.pmouseX=0;n.prototype.pmouseY=0;n.prototype.winMouseX=0;n.prototype.winMouseY=0;n.prototype.pwinMouseX=0;n.prototype.pwinMouseY=0;n.prototype.mouseButton=0;n.prototype.mouseIsPressed=false;n.prototype.isMousePressed=false;n.prototype._updateNextMouseCoords=function(e){if(e.type==="touchstart"||e.type==="touchmove"||e.type==="touchend"){this._setProperty("_nextMouseX",this._nextTouchX);this._setProperty("_nextMouseY",this._nextTouchY)}else{if(this._curElement!==null){var t=o(this._curElement.elt,e);this._setProperty("_nextMouseX",t.x);this._setProperty("_nextMouseY",t.y)}}this._setProperty("winMouseX",e.pageX);this._setProperty("winMouseY",e.pageY)};n.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX);this._setProperty("pmouseY",this.mouseY);this._setProperty("mouseX",this._nextMouseX);this._setProperty("mouseY",this._nextMouseY);this._setProperty("pwinMouseX",this.winMouseX);this._setProperty("pwinMouseY",this.winMouseY)};function o(e,t){var r=e.getBoundingClientRect();return{x:t.clientX-r.left,y:t.clientY-r.top}}n.prototype._setMouseButton=function(e){if(e.button===1){this._setProperty("mouseButton",i.CENTER)}else if(e.button===2){this._setProperty("mouseButton",i.RIGHT)}else{this._setProperty("mouseButton",i.LEFT)}};n.prototype._onmousemove=function(e){var t=this._isGlobal?window:this;var r;this._updateNextMouseCoords(e);this._updateNextTouchCoords(e);if(!this.isMousePressed){if(typeof t.mouseMoved==="function"){r=t.mouseMoved(e);if(r===false){e.preventDefault()}}}else{if(typeof t.mouseDragged==="function"){r=t.mouseDragged(e);if(r===false){e.preventDefault()}}else if(typeof t.touchMoved==="function"){r=t.touchMoved(e);if(r===false){e.preventDefault()}}}};n.prototype._onmousedown=function(e){var t=this._isGlobal?window:this;var r;this._setProperty("isMousePressed",true);this._setProperty("mouseIsPressed",true);this._setMouseButton(e);this._updateNextMouseCoords(e);this._updateNextTouchCoords(e);if(typeof t.mousePressed==="function"){r=t.mousePressed(e);

if(r===false){e.preventDefault()}}else if(typeof t.touchStarted==="function"){r=t.touchStarted(e);if(r===false){e.preventDefault()}}};n.prototype._onmouseup=function(e){var t=this._isGlobal?window:this;var r;this._setProperty("isMousePressed",false);this._setProperty("mouseIsPressed",false);if(typeof t.mouseReleased==="function"){r=t.mouseReleased(e);if(r===false){e.preventDefault()}}else if(typeof t.touchEnded==="function"){r=t.touchEnded(e);if(r===false){e.preventDefault()}}};n.prototype._ondragend=n.prototype._onmouseup;n.prototype._ondragover=n.prototype._onmousemove;n.prototype._onclick=function(e){var t=this._isGlobal?window:this;if(typeof t.mouseClicked==="function"){var r=t.mouseClicked(e);if(r===false){e.preventDefault()}}};n.prototype._onwheel=function(e){var t=this._isGlobal?window:this;if(typeof t.mouseWheel==="function"){e.delta=e.deltaY;var r=t.mouseWheel(e);if(r===false){e.preventDefault()}}};t.exports=n},{"../core/constants":47,"../core/core":48}],64:[function(e,t,r){"use strict";var n=e("../core/core");n.prototype._nextTouchX=0;n.prototype._nextTouchY=0;n.prototype.touchX=0;n.prototype.touchY=0;n.prototype.ptouchX=0;n.prototype.ptouchY=0;n.prototype.touches=[];n.prototype.touchIsDown=false;n.prototype._updateNextTouchCoords=function(e){if(e.type==="mousedown"||e.type==="mousemove"||e.type==="mouseup"){this._setProperty("_nextTouchX",this._nextMouseX);this._setProperty("_nextTouchY",this._nextMouseY)}else{if(this._curElement!==null){var t=i(this._curElement.elt,e,0);this._setProperty("_nextTouchX",t.x);this._setProperty("_nextTouchY",t.y);var r=[];for(var n=0;n<e.touches.length;n++){r[n]=i(this._curElement.elt,e,n)}this._setProperty("touches",r)}}};n.prototype._updateTouchCoords=function(){this._setProperty("ptouchX",this.touchX);this._setProperty("ptouchY",this.touchY);this._setProperty("touchX",this._nextTouchX);this._setProperty("touchY",this._nextTouchY)};function i(e,t,r){r=r||0;var n=e.getBoundingClientRect();var i=t.touches[r]||t.changedTouches[r];return{x:i.clientX-n.left,y:i.clientY-n.top,id:i.identifier}}n.prototype._ontouchstart=function(e){var t=this._isGlobal?window:this;var r;this._updateNextTouchCoords(e);this._updateNextMouseCoords(e);this._setProperty("touchIsDown",true);if(typeof t.touchStarted==="function"){r=t.touchStarted(e);if(r===false){e.preventDefault()}}else if(typeof t.mousePressed==="function"){r=t.mousePressed(e);if(r===false){e.preventDefault()}}};n.prototype._ontouchmove=function(e){var t=this._isGlobal?window:this;var r;this._updateNextTouchCoords(e);this._updateNextMouseCoords(e);if(typeof t.touchMoved==="function"){r=t.touchMoved(e);if(r===false){e.preventDefault()}}else if(typeof t.mouseDragged==="function"){r=t.mouseDragged(e);if(r===false){e.preventDefault()}}};n.prototype._ontouchend=function(e){this._updateNextTouchCoords(e);this._updateNextMouseCoords(e);if(this.touches.length===0){this._setProperty("touchIsDown",false)}var t=this._isGlobal?window:this;var r;if(typeof t.touchEnded==="function"){r=t.touchEnded(e);if(r===false){e.preventDefault()}}else if(typeof t.mouseReleased==="function"){r=t.mouseReleased(e);if(r===false){e.preventDefault()}}};t.exports=n},{"../core/core":48}],65:[function(e,t,r){"use strict";var n={};n._toPixels=function(e){if(e instanceof ImageData){return e.data}else{return e.getContext("2d").getImageData(0,0,e.width,e.height).data}};n._getARGB=function(e,t){var r=t*4;return e[r+3]<<24&4278190080|e[r]<<16&16711680|e[r+1]<<8&65280|e[r+2]&255};n._setPixels=function(e,t){var r=0;for(var n=0,i=e.length;n<i;n++){r=n*4;e[r+0]=(t[n]&16711680)>>>16;e[r+1]=(t[n]&65280)>>>8;e[r+2]=t[n]&255;e[r+3]=(t[n]&4278190080)>>>24}};n._toImageData=function(e){if(e instanceof ImageData){return e}else{return e.getContext("2d").getImageData(0,0,e.width,e.height)}};n._createImageData=function(e,t){n._tmpCanvas=document.createElement("canvas");n._tmpCtx=n._tmpCanvas.getContext("2d");return this._tmpCtx.createImageData(e,t)};n.apply=function(e,t,r){var n=e.getContext("2d");var i=n.getImageData(0,0,e.width,e.height);var o=t(i,r);if(o instanceof ImageData){n.putImageData(o,0,0,0,0,e.width,e.height)}else{n.putImageData(i,0,0,0,0,e.width,e.height)}};n.threshold=function(e,t){var r=n._toPixels(e);if(t===undefined){t=.5}var i=Math.floor(t*255);for(var o=0;o<r.length;o+=4){var a=r[o];var s=r[o+1];var l=r[o+2];var u=.2126*a+.7152*s+.0722*l;var h;if(u>=i){h=255}else{h=0}r[o]=r[o+1]=r[o+2]=h}};n.gray=function(e){var t=n._toPixels(e);for(var r=0;r<t.length;r+=4){var i=t[r];var o=t[r+1];var a=t[r+2];var s=.2126*i+.7152*o+.0722*a;t[r]=t[r+1]=t[r+2]=s}};n.opaque=function(e){var t=n._toPixels(e);for(var r=0;r<t.length;r+=4){t[r+3]=255}return t};n.invert=function(e){var t=n._toPixels(e);for(var r=0;r<t.length;r+=4){t[r]=255-t[r];t[r+1]=255-t[r+1];t[r+2]=255-t[r+2]}};n.posterize=function(e,t){var r=n._toPixels(e);if(t<2||t>255){throw new Error("Level must be greater than 2 and less than 255 for posterize")}var i=t-1;for(var o=0;o<r.length;o+=4){var a=r[o];var s=r[o+1];var l=r[o+2];r[o]=(a*t>>8)*255/i;r[o+1]=(s*t>>8)*255/i;r[o+2]=(l*t>>8)*255/i}};n.dilate=function(e){var t=n._toPixels(e);var r=0;var i=t.length?t.length/4:0;var o=new Int32Array(i);var a,s,l,u,h;var f,c,p,d,m,g,v,y,_,b,x,w;while(r<i){a=r;s=r+e.width;while(r<s){l=u=n._getARGB(t,r);c=r-1;f=r+1;p=r-e.width;d=r+e.width;if(c<a){c=r}if(f>=s){f=r}if(p<0){p=0}if(d>=i){d=r}v=n._getARGB(t,p);g=n._getARGB(t,c);y=n._getARGB(t,d);m=n._getARGB(t,f);h=77*(l>>16&255)+151*(l>>8&255)+28*(l&255);b=77*(g>>16&255)+151*(g>>8&255)+28*(g&255);_=77*(m>>16&255)+151*(m>>8&255)+28*(m&255);x=77*(v>>16&255)+151*(v>>8&255)+28*(v&255);w=77*(y>>16&255)+151*(y>>8&255)+28*(y&255);if(b>h){u=g;h=b}if(_>h){u=m;h=_}if(x>h){u=v;h=x}if(w>h){u=y;h=w}o[r++]=u}}n._setPixels(t,o)};n.erode=function(e){var t=n._toPixels(e);var r=0;var i=t.length?t.length/4:0;var o=new Int32Array(i);var a,s,l,u,h;var f,c,p,d,m,g,v,y,_,b,x,w;while(r<i){a=r;s=r+e.width;while(r<s){l=u=n._getARGB(t,r);c=r-1;f=r+1;p=r-e.width;d=r+e.width;if(c<a){c=r}if(f>=s){f=r}if(p<0){p=0}if(d>=i){d=r}v=n._getARGB(t,p);g=n._getARGB(t,c);y=n._getARGB(t,d);m=n._getARGB(t,f);h=77*(l>>16&255)+151*(l>>8&255)+28*(l&255);b=77*(g>>16&255)+151*(g>>8&255)+28*(g&255);_=77*(m>>16&255)+151*(m>>8&255)+28*(m&255);x=77*(v>>16&255)+151*(v>>8&255)+28*(v&255);w=77*(y>>16&255)+151*(y>>8&255)+28*(y&255);if(b<h){u=g;h=b}if(_<h){u=m;h=_}if(x<h){u=v;h=x}if(w<h){u=y;h=w}o[r++]=u}}n._setPixels(t,o)};var i;var o;var a;var s;function l(e){var t=e*3.5|0;t=t<1?1:t<248?t:248;if(i!==t){i=t;o=1+i<<1;a=new Int32Array(o);s=new Array(o);for(var r=0;r<o;r++){s[r]=new Int32Array(256)}var n,l;var u,h;for(var f=1,c=t-1;f<t;f++){a[t+f]=a[c]=l=c*c;u=s[t+f];h=s[c--];for(var p=0;p<256;p++){u[p]=h[p]=l*p}}n=a[t]=t*t;u=s[t];for(var d=0;d<256;d++){u[d]=n*d}}}function u(e,t){var r=n._toPixels(e);var u=e.width;var h=e.height;var f=u*h;var c=new Int32Array(f);for(var p=0;p<f;p++){c[p]=n._getARGB(r,p)}var d,m,g,v,y;var _,b,x,w,S;var C=new Int32Array(f);var T=new Int32Array(f);var E=new Int32Array(f);var R=new Int32Array(f);var A=0;l(t);var M,N,D;var k;for(N=0;N<h;N++){for(M=0;M<u;M++){v=g=m=y=d=0;_=M-i;if(_<0){S=-_;_=0}else{if(_>=u){break}S=0}for(D=S;D<o;D++){if(_>=u){break}var I=c[_+A];k=s[D];y+=k[(I&-16777216)>>>24];m+=k[(I&16711680)>>16];g+=k[(I&65280)>>8];v+=k[I&255];d+=a[D];_++}b=A+M;C[b]=y/d;T[b]=m/d;E[b]=g/d;R[b]=v/d}A+=u}A=0;x=-i;w=x*u;for(N=0;N<h;N++){for(M=0;M<u;M++){v=g=m=y=d=0;if(x<0){S=b=-x;_=M}else{if(x>=h){break}S=0;b=x;_=M+w}for(D=S;D<o;D++){if(b>=h){break}k=s[D];y+=k[C[_]];m+=k[T[_]];g+=k[E[_]];v+=k[R[_]];d+=a[D];b++;_+=u}c[M+A]=y/d<<24|m/d<<16|g/d<<8|v/d}A+=u;w+=u;x++}n._setPixels(r,c)}n.blur=function(e,t){u(e,t)};t.exports=n},{}],66:[function(e,t,r){"use strict";var n=e("../core/core");var i=[];n.prototype.createImage=function(e,t){return new n.Image(e,t)};n.prototype.saveCanvas=function(){var e,t,r;if(arguments.length===3){e=arguments[0];t=arguments[1];r=arguments[2]}else if(arguments.length===2){if(typeof arguments[0]==="object"){e=arguments[0];t=arguments[1]}else{t=arguments[0];r=arguments[1]}}else if(arguments.length===1){if(typeof arguments[0]==="object"){e=arguments[0]}else{t=arguments[0]}}if(e instanceof n.Element){e=e.elt}if(!(e instanceof HTMLCanvasElement)){e=null}if(!r){r=n.prototype._checkFileExtension(t,r)[1];if(r===""){r="png"}}if(!e){if(this._curElement&&this._curElement.elt){e=this._curElement.elt}}if(n.prototype._isSafari()){var i="Hello, Safari user!\n";i+="Now capturing a screenshot...\n";i+="To save this image,\n";i+="go to File --> Save As.\n";alert(i);window.location.href=e.toDataURL()}else{var o;if(typeof r==="undefined"){r="png";o="image/png"}else{switch(r){case"png":o="image/png";break;case"jpeg":o="image/jpeg";break;case"jpg":o="image/jpeg";break;default:o="image/png";break}}var a="image/octet-stream";var s=e.toDataURL(o);s=s.replace(o,a);n.prototype.downloadFile(s,t,r)}};n.prototype.saveFrames=function(e,t,r,o,a){var s=r||3;s=n.prototype.constrain(s,0,15);s=s*1e3;var l=o||15;l=n.prototype.constrain(l,0,22);var u=0;var h=n.prototype._makeFrame;var f=this._curElement.elt;var c=setInterval(function(){h(e+u,t,f);u++},1e3/l);setTimeout(function(){clearInterval(c);if(a){a(i)}else{for(var e=0;e<i.length;e++){var t=i[e];n.prototype.downloadFile(t.imageData,t.filename,t.ext)}}i=[]},s+.01)};n.prototype._makeFrame=function(e,t,r){var n;if(this){n=this._curElement.elt}else{n=r}var o;if(!t){t="png";o="image/png"}else{switch(t.toLowerCase()){case"png":o="image/png";break;case"jpeg":o="image/jpeg";break;case"jpg":o="image/jpeg";break;default:o="image/png";break}}var a="image/octet-stream";var s=n.toDataURL(o);s=s.replace(o,a);var l={};l.imageData=s;l.filename=e;l.ext=t;i.push(l)};t.exports=n},{"../core/core":48}],67:[function(e,t,r){"use strict";var n=e("../core/core");var i=e("./filters");var o=e("../core/canvas");var a=e("../core/constants");e("../core/error_helpers");n.prototype.loadImage=function(e,t,r){var i=new Image;var o=new n.Image(1,1,this);var a=n._getDecrementPreload.apply(this,arguments);i.onload=function(){o.width=o.canvas.width=i.width;o.height=o.canvas.height=i.height;o.drawingContext.drawImage(i,0,0);if(typeof t==="function"){t(o)}if(a&&t!==a){a()}};i.onerror=function(e){n._friendlyFileLoadError(0,i.src);if(typeof r==="function"&&r!==a){r(e)}};if(e.indexOf("data:image/")!==0){i.crossOrigin="Anonymous"}i.src=e;return o};function s(e,t){if(e>0&&e<t){return e}else{return t}}n.prototype.image=function(e,t,r,n,i,a,l,u,h){if(arguments.length<=5){a=t||0;l=r||0;t=0;r=0;if(e.elt&&e.elt.videoWidth&&!e.canvas){var f=e.elt.videoWidth;var c=e.elt.videoHeight;u=n||e.width;h=i||e.width*c/f;n=f;i=c}else{u=n||e.width;h=i||e.height;n=e.width;i=e.height}}else if(arguments.length===9){t=t||0;r=r||0;n=s(n,e.width);i=s(i,e.height);a=a||0;l=l||0;u=u||e.width;h=h||e.height}else{throw"Wrong number of arguments to image()"}var p=o.modeAdjust(a,l,u,h,this._renderer._imageMode);this._renderer.image(e,t,r,n,i,p.x,p.y,p.w,p.h)};n.prototype.tint=function(){var e=this.color.apply(this,arguments);this._renderer._tint=e.levels};n.prototype.noTint=function(){this._renderer._tint=null};n.prototype._getTintedImageCanvas=function(e){if(!e.canvas){return e}var t=i._toPixels(e.canvas);var r=document.createElement("canvas");r.width=e.canvas.width;r.height=e.canvas.height;var n=r.getContext("2d");var o=n.createImageData(e.canvas.width,e.canvas.height);var a=o.data;for(var s=0;s<t.length;s+=4){var l=t[s];var u=t[s+1];var h=t[s+2];var f=t[s+3];a[s]=l*this._renderer._tint[0]/255;a[s+1]=u*this._renderer._tint[1]/255;a[s+2]=h*this._renderer._tint[2]/255;a[s+3]=f*this._renderer._tint[3]/255}n.putImageData(o,0,0);return r};n.prototype.imageMode=function(e){if(e===a.CORNER||e===a.CORNERS||e===a.CENTER){this._renderer._imageMode=e}};t.exports=n},{"../core/canvas":46,"../core/constants":47,"../core/core":48,"../core/error_helpers":51,"./filters":65}],68:[function(e,t,r){"use strict";var n=e("../core/core");var i=e("./filters");n.Image=function(e,t){this.width=e;this.height=t;this.canvas=document.createElement("canvas");this.canvas.width=this.width;this.canvas.height=this.height;this.drawingContext=this.canvas.getContext("2d");this._pixelDensity=1;this.isTexture=false;this.pixels=[]};n.Image.prototype._setProperty=function(e,t){this[e]=t};n.Image.prototype.loadPixels=function(){n.Renderer2D.prototype.loadPixels.call(this)};n.Image.prototype.updatePixels=function(e,t,r,i){n.Renderer2D.prototype.updatePixels.call(this,e,t,r,i)};n.Image.prototype.get=function(e,t,r,i){return n.Renderer2D.prototype.get.call(this,e,t,r,i)};n.Image.prototype.set=function(e,t,r){n.Renderer2D.prototype.set.call(this,e,t,r)};n.Image.prototype.resize=function(e,t){if(e===0&&t===0){e=this.canvas.width;t=this.canvas.height}else if(e===0){e=this.canvas.width*t/this.canvas.height}else if(t===0){t=this.canvas.height*e/this.canvas.width}var r=document.createElement("canvas");r.width=e;r.height=t;r.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,r.width,r.height);this.canvas.width=this.width=e;this.canvas.height=this.height=t;this.drawingContext.drawImage(r,0,0,e,t,0,0,e,t);if(this.pixels.length>0){this.loadPixels()}};n.Image.prototype.copy=function(){n.prototype.copy.apply(this,arguments)};n.Image.prototype.mask=function(e){if(e===undefined){e=this}var t=this.drawingContext.globalCompositeOperation;var r=1;if(e instanceof n.Renderer){r=e._pInst._pixelDensity}var i=[e,0,0,r*e.width,r*e.height,0,0,this.width,this.height];this.drawingContext.globalCompositeOperation="destination-in";this.copy.apply(this,i);this.drawingContext.globalCompositeOperation=t};n.Image.prototype.filter=function(e,t){i.apply(this.canvas,i[e.toLowerCase()],t)};n.Image.prototype.blend=function(){n.prototype.blend.apply(this,arguments)};n.Image.prototype.save=function(e,t){var r;if(!t){t="png";r="image/png"}else{switch(t.toLowerCase()){case"png":r="image/png";break;case"jpeg":r="image/jpeg";break;case"jpg":r="image/jpeg";break;default:r="image/png";break}}var i="image/octet-stream";var o=this.canvas.toDataURL(r);o=o.replace(r,i);n.prototype.downloadFile(o,e,t)};n.Image.prototype.createTexture=function(e){return this};t.exports=n.Image},{"../core/core":48,"./filters":65}],69:[function(e,t,r){"use strict";var n=e("../core/core");var i=e("./filters");e("../color/p5.Color");n.prototype.pixels=[];n.prototype.blend=function(){this._renderer.blend.apply(this._renderer,arguments)};n.prototype.copy=function(){n.Renderer2D._copyHelper.apply(this,arguments)};n.prototype.filter=function(e,t){i.apply(this.canvas,i[e.toLowerCase()],t)};n.prototype.get=function(e,t,r,n){return this._renderer.get(e,t,r,n)};n.prototype.loadPixels=function(){this._renderer.loadPixels()};n.prototype.set=function(e,t,r){this._renderer.set(e,t,r)};n.prototype.updatePixels=function(e,t,r,n){if(this.pixels.length===0){return}this._renderer.updatePixels(e,t,r,n)};t.exports=n},{"../color/p5.Color":42,"../core/core":48,"./filters":65}],70:[function(e,t,r){"use strict";var n=e("../core/core");var i=e("reqwest");var o=e("opentype.js");e("../core/error_helpers");n._getDecrementPreload=function(){var e=arguments[arguments.length-1];if((window.preload||this&&this.preload)&&typeof e==="function"){return e}else{return null}};n.prototype.loadFont=function(e,t,r){var i=new n.Font(this);var a=n._getDecrementPreload.apply(this,arguments);o.load(e,function(n,o){if(n){if(typeof r!=="undefined"&&r!==a){return r(n)}throw n}i.font=o;if(typeof t!=="undefined"){t(i)}if(a&&t!==a){a()}var s=["ttf","otf","woff","woff2"],l=e.split("\\").pop().split("/").pop(),u=l.lastIndexOf("."),h,f,c=u<1?null:l.substr(u+1);if(s.indexOf(c)>-1){h=l.substr(0,u);f=document.createElement("style");f.appendChild(document.createTextNode("\n@font-face {"+"\nfont-family: "+h+";\nsrc: url("+e+");\n}\n"));document.head.appendChild(f)}});return i};n.prototype.createInput=function(){throw"not yet implemented"};n.prototype.createReader=function(){throw"not yet implemented"};n.prototype.loadBytes=function(){throw"not yet implemented"};n.prototype.loadJSON=function(){var e=arguments[0];var t=arguments[1];var r;var o=n._getDecrementPreload.apply(this,arguments);var a=[];var s="json";for(var l=2;l<arguments.length;l++){var u=arguments[l];if(typeof u==="string"){if(u==="jsonp"||u==="json"){s=u}}else if(typeof u==="function"){r=u}}i({url:e,type:s,crossOrigin:true,error:function(e){if(r){r(e)}else{console.log(e.statusText)}},success:function(e){for(var r in e){a[r]=e[r]}if(typeof t!=="undefined"){t(e)}if(o&&t!==o){o()}}});return a};n.prototype.loadStrings=function(e,t,r){var i=[];var o=new XMLHttpRequest;var a=n._getDecrementPreload.apply(this,arguments);o.addEventListener("error",function(e){if(r){r(e)}else{console.log(e.responseText)}});o.open("GET",e,true);o.onreadystatechange=function(){if(o.readyState===4){if(o.status===200){var e=o.responseText.match(/[^\r\n]+/g);for(var n in e){i[n]=e[n]}if(typeof t!=="undefined"){t(i)}if(a&&t!==a){a()}}else{if(r){r(o)}else{console.log(o.statusText)}}}};o.send(null);return i};n.prototype.loadTable=function(e){var t=null;var r=[];var o=false;var s=",";var l=false;var u=n._getDecrementPreload.apply(this,arguments);for(var h=1;h<arguments.length;h++){if(typeof arguments[h]==="function"&&arguments[h]!==u){t=arguments[h]}else if(typeof arguments[h]==="string"){r.push(arguments[h]);if(arguments[h]==="header"){o=true}if(arguments[h]==="csv"){if(l){throw new Error("Cannot set multiple separator types.")}else{s=",";l=true}}else if(arguments[h]==="tsv"){if(l){throw new Error("Cannot set multiple separator types.")}else{s="	";l=true}}}}var f=new n.Table;i({url:e,crossOrigin:true,type:"csv"}).then(function(e){e=e.responseText;var r={};var i=0,l=1,c=2,p=4;var d='"',m="\r",g="\n";var v=[];var y=0;var _=null;var b;var x=function(){r.escaped=false;_=[];S()};var w=function(){r.currentState=p;v.push(_);_=null};var S=function(){r.currentState=i;r.token=""};var C=function(){_.push(r.token);S()};while(true){b=e[y++];if(b==null){if(r.escaped){throw new Error("Unclosed quote in file.")}if(_){C();w();break}}if(_===null){x()}if(r.currentState===i){if(b===d){r.escaped=true;r.currentState=l;continue}r.currentState=l}if(r.currentState===l&&r.escaped){if(b===d){if(e[y]===d){r.token+=d;y++}else{r.escaped=false;r.currentState=c}}else{r.token+=b}continue}if(b===m){if(e[y]===g){y++}C();w()}else if(b===g){C();w()}else if(b===s){C()}else if(r.currentState===l){r.token+=b}}if(o){f.columns=v.shift()}else{for(h=0;h<v.length;h++){f.columns[h]=h.toString()}}var T;for(h=0;h<v.length;h++){if(h===v.length-1&&v[h].length===1){if(v[h][0]==="undefined"){break}}T=new n.TableRow;T.arr=v[h];T.obj=a(v[h],f.columns);f.addRow(T)}if(t!==null){t(f)}if(u&&t!==u){u()}}).fail(function(r,i){n._friendlyFileLoadError(2,e);if(typeof t!=="undefined"&&t!==u){t(false)}});return f};function a(e,t){var r={};t=t||[];if(typeof t==="undefined"){for(var n=0;n<e.length;n++){t[n.toString()]=n}}for(var i=0;i<t.length;i++){var o=t[i];var a=e[i];r[o]=a}return r}n.prototype.loadXML=function(e,t,r){var o=document.implementation.createDocument(null,null);var a=n._getDecrementPreload.apply(this,arguments);i({url:e,type:"xml",crossOrigin:true,error:function(e){if(r){r(e)}else{console.log(e.statusText)}}}).then(function(e){var r=e.documentElement;o.appendChild(r);if(typeof t!=="undefined"){t(o)}if(a&&t!==a){a()}});return o};n.prototype.parseXML=function(){throw"not yet implemented"};n.prototype.selectFolder=function(){throw"not yet implemented"};n.prototype.selectInput=function(){throw"not yet implemented"};n.prototype.httpGet=function(){var e=Array.prototype.slice.call(arguments);e.push("GET");n.prototype.httpDo.apply(this,e)};n.prototype.httpPost=function(){var e=Array.prototype.slice.call(arguments);e.push("POST");n.prototype.httpDo.apply(this,e)};n.prototype.httpDo=function(){if(typeof arguments[0]==="object"){i(arguments[0])}else{var e="GET";var t=arguments[0];var r={};var n="";var o;var a;for(var s=1;s<arguments.length;s++){var l=arguments[s];if(typeof l==="string"){if(l==="GET"||l==="POST"||l==="PUT"){e=l}else{n=l}}else if(typeof l==="object"){r=l}else if(typeof l==="function"){if(!o){o=l}else{a=l}}}if(n===""){if(t.indexOf("json")!==-1){n="json"}else if(t.indexOf("xml")!==-1){n="xml"}else{n="text"}}i({url:t,method:e,data:r,type:n,crossOrigin:true,success:function(e){if(typeof o!=="undefined"){if(n==="text"){o(e.response)}else{o(e)}}},error:function(e){if(a){a(e)}else{console.log(e.statusText)}}})}};window.URL=window.URL||window.webkitURL;n.prototype._pWriters=[];n.prototype.beginRaw=function(){throw"not yet implemented"};n.prototype.beginRecord=function(){throw"not yet implemented"};n.prototype.createOutput=function(){throw"not yet implemented"};n.prototype.createWriter=function(e,t){var r;for(var i in n.prototype._pWriters){if(n.prototype._pWriters[i].name===e){r=new n.PrintWriter(e+window.millis(),t);n.prototype._pWriters.push(r);return r}}r=new n.PrintWriter(e,t);n.prototype._pWriters.push(r);return r};n.prototype.endRaw=function(){throw"not yet implemented"};n.prototype.endRecord=function(){throw"not yet implemented"};n.PrintWriter=function(e,t){var r=this;this.name=e;this.content="";this.print=function(e){this.content+=e};this.println=function(e){this.content+=e+"\n"};this.flush=function(){this.content=""};this.close=function(){var i=[];i.push(this.content);n.prototype.writeFile(i,e,t);for(var o in n.prototype._pWriters){if(n.prototype._pWriters[o].name===this.name){n.prototype._pWriters.splice(o,1)}}r.flush();r={}}};n.prototype.saveBytes=function(){throw"not yet implemented"};n.prototype.save=function(e,t,r){var i=arguments;var o=this._curElement.elt;if(i.length===0){n.prototype.saveCanvas(o);return}else if(i[0]instanceof n.Renderer||i[0]instanceof n.Graphics){n.prototype.saveCanvas(i[0].elt,i[1],i[2]);return}else if(i.length===1&&typeof i[0]==="string"){n.prototype.saveCanvas(o,i[0])}else{var a=l(i[1],i[2])[1];switch(a){case"json":n.prototype.saveJSON(i[0],i[1],i[2]);return;case"txt":n.prototype.saveStrings(i[0],i[1],i[2]);return;default:if(i[0]instanceof Array){n.prototype.saveStrings(i[0],i[1],i[2])}else if(i[0]instanceof n.Table){n.prototype.saveTable(i[0],i[1],i[2],i[3])}else if(i[0]instanceof n.Image){n.prototype.saveCanvas(i[0].canvas,i[1])}else if(i[0]instanceof n.SoundFile){n.prototype.saveSound(i[0],i[1],i[2],i[3])}}}};n.prototype.saveJSON=function(e,t,r){var n;if(r){n=JSON.stringify(e)}else{n=JSON.stringify(e,undefined,2)}console.log(n);this.saveStrings(n.split("\n"),t,"json")};n.prototype.saveJSONObject=n.prototype.saveJSON;n.prototype.saveJSONArray=n.prototype.saveJSON;n.prototype.saveStream=function(){throw"not yet implemented"};n.prototype.saveStrings=function(e,t,r){var n=r||"txt";var i=this.createWriter(t,n);for(var o=0;o<e.length;o++){if(o<e.length-1){i.println(e[o])}else{i.print(e[o])}}i.close();i.flush()};n.prototype.saveXML=function(){throw"not yet implemented"};n.prototype.selectOutput=function(){throw"not yet implemented"};function s(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}n.prototype.saveTable=function(e,t,r){var n=this.createWriter(t,r);var i=e.columns;var o=",";if(r==="tsv"){o="	"}if(r!=="html"){if(i[0]!=="0"){for(var a=0;a<i.length;a++){if(a<i.length-1){n.print(i[a]+o)}else{n.println(i[a])}}}for(var l=0;l<e.rows.length;l++){var u;for(u=0;u<e.rows[l].arr.length;u++){if(u<e.rows[l].arr.length-1){n.print(e.rows[l].arr[u]+o)}else if(l<e.rows.length-1){n.println(e.rows[l].arr[u])}else{n.print(e.rows[l].arr[u])}}}}else{n.println("<html>");n.println("<head>");var h='  <meta http-equiv="content-type" content';h+='="text/html;charset=utf-8" />';n.println(h);n.println("</head>");n.println("<body>");n.println("  <table>");if(i[0]!=="0"){n.println("    <tr>");for(var f=0;f<i.length;f++){var c=s(i[f]);n.println("      <td>"+c);n.println("      </td>")}n.println("    </tr>")}for(var p=0;p<e.rows.length;p++){n.println("    <tr>");for(var d=0;d<e.columns.length;d++){var m=e.rows[p].getString(d);var g=s(m);n.println("      <td>"+g);n.println("      </td>")}n.println("    </tr>")}n.println("  </table>");n.println("</body>");n.print("</html>")}n.close();n.flush()};n.prototype.writeFile=function(e,t,r){var i="application/octet-stream";if(n.prototype._isSafari()){i="text/plain"}var o=new Blob(e,{type:i});var a=window.URL.createObjectURL(o);n.prototype.downloadFile(a,t,r)};n.prototype.downloadFile=function(e,t,r){var i=l(t,r);var o=i[0];var a=i[1];var s=document.createElement("a");s.href=e;s.download=o;s.onclick=u;s.style.display="none";document.body.appendChild(s);if(n.prototype._isSafari()){var h="Hello, Safari user! To download this file...\n";h+="1. Go to File --> Save As.\n";h+='2. Choose "Page Source" as the Format.\n';h+='3. Name it with this extension: ."'+a+'"';alert(h)}s.click();e=null};function l(e,t){if(!t||t===true||t==="true"){t=""}if(!e){e="untitled"}var r="";if(e&&e.indexOf(".")>-1){r=e.split(".").pop()}if(t){if(r!==t){r=t;e=e+"."+r}}return[e,r]}n.prototype._checkFileExtension=l;n.prototype._isSafari=function(){var e=Object.prototype.toString.call(window.HTMLElement);return e.indexOf("Constructor")>0};function u(e){document.body.removeChild(e.target)}t.exports=n},{"../core/core":48,"../core/error_helpers":51,"opentype.js":8,reqwest:27}],71:[function(e,t,r){"use strict";var n=e("../core/core");n.Table=function(e){this.columns=[];this.rows=[]};n.Table.prototype.addRow=function(e){var t=e||new n.TableRow;if(typeof t.arr==="undefined"||typeof t.obj==="undefined"){throw"invalid TableRow: "+t}t.table=this;this.rows.push(t);return t};n.Table.prototype.removeRow=function(e){this.rows[e].table=null;var t=this.rows.splice(e+1,this.rows.length);this.rows.pop();this.rows=this.rows.concat(t)};n.Table.prototype.getRow=function(e){return this.rows[e]};n.Table.prototype.getRows=function(){return this.rows};n.Table.prototype.findRow=function(e,t){if(typeof t==="string"){for(var r=0;r<this.rows.length;r++){if(this.rows[r].obj[t]===e){return this.rows[r]}}}else{for(var n=0;n<this.rows.length;n++){if(this.rows[n].arr[t]===e){return this.rows[n]}}}return null};n.Table.prototype.findRows=function(e,t){var r=[];if(typeof t==="string"){for(var n=0;n<this.rows.length;n++){if(this.rows[n].obj[t]===e){r.push(this.rows[n])}}}else{for(var i=0;i<this.rows.length;i++){if(this.rows[i].arr[t]===e){r.push(this.rows[i])}}}return r};n.Table.prototype.matchRow=function(e,t){if(typeof t==="number"){for(var r=0;r<this.rows.length;r++){if(this.rows[r].arr[t].match(e)){return this.rows[r]}}}else{for(var n=0;n<this.rows.length;n++){if(this.rows[n].obj[t].match(e)){return this.rows[n]}}}return null};n.Table.prototype.matchRows=function(e,t){var r=[];if(typeof t==="number"){for(var n=0;n<this.rows.length;n++){if(this.rows[n].arr[t].match(e)){r.push(this.rows[n])}}}else{for(var i=0;i<this.rows.length;i++){if(this.rows[i].obj[t].match(e)){r.push(this.rows[i])}}}return r};n.Table.prototype.getColumn=function(e){var t=[];if(typeof e==="string"){for(var r=0;r<this.rows.length;r++){t.push(this.rows[r].obj[e])}}else{for(var n=0;n<this.rows.length;n++){t.push(this.rows[n].arr[e])}}return t};n.Table.prototype.clearRows=function(){delete this.rows;this.rows=[]};n.Table.prototype.addColumn=function(e){var t=e||null;this.columns.push(t)};n.Table.prototype.getColumnCount=function(){return this.columns.length};n.Table.prototype.getRowCount=function(){return this.rows.length};n.Table.prototype.removeTokens=function(e,t){var r=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")};var n=[];for(var i=0;i<e.length;i++){n.push(r(e.charAt(i)))}var o=new RegExp(n.join("|"),"g");if(typeof t==="undefined"){for(var a=0;a<this.columns.length;a++){for(var s=0;s<this.rows.length;s++){var l=this.rows[s].arr[a];l=l.replace(o,"");this.rows[s].arr[a]=l;this.rows[s].obj[this.columns[a]]=l}}}else if(typeof t==="string"){for(var u=0;u<this.rows.length;u++){var h=this.rows[u].obj[t];h=h.replace(o,"");this.rows[u].obj[t]=h;var f=this.columns.indexOf(t);this.rows[u].arr[f]=h}}else{for(var c=0;c<this.rows.length;c++){var p=this.rows[c].arr[t];p=p.replace(o,"");this.rows[c].arr[t]=p;this.rows[c].obj[this.columns[t]]=p}}};n.Table.prototype.trim=function(e){var t=new RegExp(" ","g");if(typeof e==="undefined"){for(var r=0;r<this.columns.length;r++){for(var n=0;n<this.rows.length;n++){var i=this.rows[n].arr[r];i=i.replace(t,"");this.rows[n].arr[r]=i;this.rows[n].obj[this.columns[r]]=i}}}else if(typeof e==="string"){for(var o=0;o<this.rows.length;o++){var a=this.rows[o].obj[e];a=a.replace(t,"");this.rows[o].obj[e]=a;var s=this.columns.indexOf(e);this.rows[o].arr[s]=a}}else{for(var l=0;l<this.rows.length;l++){var u=this.rows[l].arr[e];u=u.replace(t,"");this.rows[l].arr[e]=u;this.rows[l].obj[this.columns[e]]=u}}};n.Table.prototype.removeColumn=function(e){var t;var r;if(typeof e==="string"){t=e;r=this.columns.indexOf(e);console.log("string")}else{r=e;t=this.columns[e]}var n=this.columns.splice(r+1,this.columns.length);this.columns.pop();this.columns=this.columns.concat(n);for(var i=0;i<this.rows.length;i++){var o=this.rows[i].arr;var a=o.splice(r+1,o.length);o.pop();this.rows[i].arr=o.concat(a);delete this.rows[i].obj[t]}};n.Table.prototype.set=function(e,t,r){this.rows[e].set(t,r)};n.Table.prototype.setNum=function(e,t,r){this.rows[e].setNum(t,r)};n.Table.prototype.setString=function(e,t,r){this.rows[e].setString(t,r)};n.Table.prototype.get=function(e,t){return this.rows[e].get(t)};n.Table.prototype.getNum=function(e,t){return this.rows[e].getNum(t)};n.Table.prototype.getString=function(e,t){return this.rows[e].getString(t)};n.Table.prototype.getObject=function(e){var t={};var r,n,i;for(var o=0;o<this.rows.length;o++){r=this.rows[o].obj;if(typeof e==="string"){n=this.columns.indexOf(e);if(n>=0){i=r[e];t[i]=r}else{throw'This table has no column named "'+e+'"'}}else{t[o]=this.rows[o].obj}}return t};n.Table.prototype.getArray=function(){var e=[];for(var t=0;t<this.rows.length;t++){e.push(this.rows[t].arr)}return e};t.exports=n.Table},{"../core/core":48}],72:[function(e,t,r){"use strict";var n=e("../core/core");n.TableRow=function(e,t){var r=[];var n={};if(e){t=t||",";r=e.split(t)}for(var i=0;i<r.length;i++){var o=i;var a=r[i];n[o]=a}this.arr=r;this.obj=n;this.table=null};n.TableRow.prototype.set=function(e,t){if(typeof e==="string"){var r=this.table.columns.indexOf(e);if(r>=0){this.obj[e]=t;this.arr[r]=t}else{throw'This table has no column named "'+e+'"'}}else{if(e<this.table.columns.length){this.arr[e]=t;var n=this.table.columns[e];this.obj[n]=t}else{throw"Column #"+e+" is out of the range of this table"}}};n.TableRow.prototype.setNum=function(e,t){var r=parseFloat(t,10);this.set(e,r)};n.TableRow.prototype.setString=function(e,t){var r=t.toString();this.set(e,r)};n.TableRow.prototype.get=function(e){if(typeof e==="string"){return this.obj[e]}else{return this.arr[e]}};n.TableRow.prototype.getNum=function(e){var t;if(typeof e==="string"){t=parseFloat(this.obj[e],10)}else{t=parseFloat(this.arr[e],10)}if(t.toString()==="NaN"){throw"Error: "+this.obj[e]+" is NaN (Not a Number)"}return t};n.TableRow.prototype.getString=function(e){if(typeof e==="string"){return this.obj[e].toString()}else{return this.arr[e].toString()}};t.exports=n.TableRow},{"../core/core":48}],73:[function(e,t,r){"use strict";var n=e("../core/core");n.prototype.abs=Math.abs;n.prototype.ceil=Math.ceil;n.prototype.constrain=function(e,t,r){return Math.max(Math.min(e,r),t)};n.prototype.dist=function(e,t,r,n,i,o){if(arguments.length===4){return Math.sqrt((r-e)*(r-e)+(n-t)*(n-t))}else if(arguments.length===6){return Math.sqrt((n-e)*(n-e)+(i-t)*(i-t)+(o-r)*(o-r))}};n.prototype.exp=Math.exp;n.prototype.floor=Math.floor;n.prototype.lerp=function(e,t,r){return r*(t-e)+e};n.prototype.log=Math.log;n.prototype.mag=function(e,t){return Math.sqrt(e*e+t*t)};n.prototype.map=function(e,t,r,n,i){return(e-t)/(r-t)*(i-n)+n};n.prototype.max=function(){if(arguments[0]instanceof Array){return Math.max.apply(null,arguments[0])}else{return Math.max.apply(null,arguments)}};n.prototype.min=function(){if(arguments[0]instanceof Array){
return Math.min.apply(null,arguments[0])}else{return Math.min.apply(null,arguments)}};n.prototype.norm=function(e,t,r){return this.map(e,t,r,0,1)};n.prototype.pow=Math.pow;n.prototype.round=Math.round;n.prototype.sq=function(e){return e*e};n.prototype.sqrt=Math.sqrt;t.exports=n},{"../core/core":48}],74:[function(e,t,r){"use strict";var n=e("../core/core");n.prototype.createVector=function(e,t,r){if(this instanceof n){return new n.Vector(this,arguments)}else{return new n.Vector(e,t,r)}};t.exports=n},{"../core/core":48}],75:[function(e,t,r){"use strict";var n=e("../core/core");var i=4;var o=1<<i;var a=8;var s=1<<a;var l=4095;var u=4;var h=.5;var f=function(e){return.5*(1-Math.cos(e*Math.PI))};var c;n.prototype.noise=function(e,t,r){t=t||0;r=r||0;if(c==null){c=new Array(l+1);for(var n=0;n<l+1;n++){c[n]=Math.random()}}if(e<0){e=-e}if(t<0){t=-t}if(r<0){r=-r}var p=Math.floor(e),d=Math.floor(t),m=Math.floor(r);var g=e-p;var v=t-d;var y=r-m;var _,b;var x=0;var w=.5;var S,C,T;for(var E=0;E<u;E++){var R=p+(d<<i)+(m<<a);_=f(g);b=f(v);S=c[R&l];S+=_*(c[R+1&l]-S);C=c[R+o&l];C+=_*(c[R+o+1&l]-C);S+=b*(C-S);R+=s;C=c[R&l];C+=_*(c[R+1&l]-C);T=c[R+o&l];T+=_*(c[R+o+1&l]-T);C+=b*(T-C);S+=f(y)*(C-S);x+=S*w;w*=h;p<<=1;g*=2;d<<=1;v*=2;m<<=1;y*=2;if(g>=1){p++;g--}if(v>=1){d++;v--}if(y>=1){m++;y--}}return x};n.prototype.noiseDetail=function(e,t){if(e>0){u=e}if(t>0){h=t}};n.prototype.noiseSeed=function(e){var t=function(){var e=4294967296,t=1664525,r=1013904223,n,i;return{setSeed:function(t){i=n=(t==null?Math.random()*e:t)>>>0},getSeed:function(){return n},rand:function(){i=(t*i+r)%e;return i/e}}}();t.setSeed(e);c=new Array(l+1);for(var r=0;r<l+1;r++){c[r]=t.rand()}};t.exports=n},{"../core/core":48}],76:[function(e,t,r){"use strict";var n=e("../core/core");var i=e("./polargeometry");var o=e("../core/constants");n.Vector=function(){var e,t,r;if(arguments[0]instanceof n){this.p5=arguments[0];e=arguments[1][0]||0;t=arguments[1][1]||0;r=arguments[1][2]||0}else{e=arguments[0]||0;t=arguments[1]||0;r=arguments[2]||0}this.x=e;this.y=t;this.z=r};n.Vector.prototype.toString=function a(){return"p5.Vector Object : ["+this.x+", "+this.y+", "+this.z+"]"};n.Vector.prototype.set=function(e,t,r){if(e instanceof n.Vector){this.x=e.x||0;this.y=e.y||0;this.z=e.z||0;return this}if(e instanceof Array){this.x=e[0]||0;this.y=e[1]||0;this.z=e[2]||0;return this}this.x=e||0;this.y=t||0;this.z=r||0;return this};n.Vector.prototype.copy=function(){if(this.p5){return new n.Vector(this.p5,[this.x,this.y,this.z])}else{return new n.Vector(this.x,this.y,this.z)}};n.Vector.prototype.add=function(e,t,r){if(e instanceof n.Vector){this.x+=e.x||0;this.y+=e.y||0;this.z+=e.z||0;return this}if(e instanceof Array){this.x+=e[0]||0;this.y+=e[1]||0;this.z+=e[2]||0;return this}this.x+=e||0;this.y+=t||0;this.z+=r||0;return this};n.Vector.prototype.sub=function(e,t,r){if(e instanceof n.Vector){this.x-=e.x||0;this.y-=e.y||0;this.z-=e.z||0;return this}if(e instanceof Array){this.x-=e[0]||0;this.y-=e[1]||0;this.z-=e[2]||0;return this}this.x-=e||0;this.y-=t||0;this.z-=r||0;return this};n.Vector.prototype.mult=function(e){this.x*=e||0;this.y*=e||0;this.z*=e||0;return this};n.Vector.prototype.div=function(e){this.x/=e;this.y/=e;this.z/=e;return this};n.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())};n.Vector.prototype.magSq=function(){var e=this.x,t=this.y,r=this.z;return e*e+t*t+r*r};n.Vector.prototype.dot=function(e,t,r){if(e instanceof n.Vector){return this.dot(e.x,e.y,e.z)}return this.x*(e||0)+this.y*(t||0)+this.z*(r||0)};n.Vector.prototype.cross=function(e){var t=this.y*e.z-this.z*e.y;var r=this.z*e.x-this.x*e.z;var i=this.x*e.y-this.y*e.x;if(this.p5){return new n.Vector(this.p5,[t,r,i])}else{return new n.Vector(t,r,i)}};n.Vector.prototype.dist=function(e){var t=e.copy().sub(this);return t.mag()};n.Vector.prototype.normalize=function(){return this.div(this.mag())};n.Vector.prototype.limit=function(e){var t=this.magSq();if(t>e*e){this.div(Math.sqrt(t));this.mult(e)}return this};n.Vector.prototype.setMag=function(e){return this.normalize().mult(e)};n.Vector.prototype.heading=function(){var e=Math.atan2(this.y,this.x);if(this.p5){if(this.p5._angleMode===o.RADIANS){return e}else{return i.radiansToDegrees(e)}}else{return e}};n.Vector.prototype.rotate=function(e){if(this.p5){if(this.p5._angleMode===o.DEGREES){e=i.degreesToRadians(e)}}var t=this.heading()+e;var r=this.mag();this.x=Math.cos(t)*r;this.y=Math.sin(t)*r;return this};n.Vector.prototype.lerp=function(e,t,r,i){if(e instanceof n.Vector){return this.lerp(e.x,e.y,e.z,t)}this.x+=(e-this.x)*i||0;this.y+=(t-this.y)*i||0;this.z+=(r-this.z)*i||0;return this};n.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]};n.Vector.prototype.equals=function(e,t,r){var i,o,a;if(e instanceof n.Vector){i=e.x||0;o=e.y||0;a=e.z||0}else if(e instanceof Array){i=e[0]||0;o=e[1]||0;a=e[2]||0}else{i=e||0;o=t||0;a=r||0}return this.x===i&&this.y===o&&this.z===a};n.Vector.fromAngle=function(e){if(this.p5){if(this.p5._angleMode===o.DEGREES){e=i.degreesToRadians(e)}}if(this.p5){return new n.Vector(this.p5,[Math.cos(e),Math.sin(e),0])}else{return new n.Vector(Math.cos(e),Math.sin(e),0)}};n.Vector.random2D=function(){var e;if(this.p5){if(this.p5._angleMode===o.DEGREES){e=this.p5.random(360)}else{e=this.p5.random(o.TWO_PI)}}else{e=Math.random()*Math.PI*2}return this.fromAngle(e)};n.Vector.random3D=function(){var e,t;if(this.p5){e=this.p5.random(0,o.TWO_PI);t=this.p5.random(-1,1)}else{e=Math.random()*Math.PI*2;t=Math.random()*2-1}var r=Math.sqrt(1-t*t)*Math.cos(e);var i=Math.sqrt(1-t*t)*Math.sin(e);if(this.p5){return new n.Vector(this.p5,[r,i,t])}else{return new n.Vector(r,i,t)}};n.Vector.add=function(e,t,r){if(!r){r=e.copy()}else{r.set(e)}r.add(t);return r};n.Vector.sub=function(e,t,r){if(!r){r=e.copy()}else{r.set(e)}r.sub(t);return r};n.Vector.mult=function(e,t,r){if(!r){r=e.copy()}else{r.set(e)}r.mult(t);return r};n.Vector.div=function(e,t,r){if(!r){r=e.copy()}else{r.set(e)}r.div(t);return r};n.Vector.dot=function(e,t){return e.dot(t)};n.Vector.cross=function(e,t){return e.cross(t)};n.Vector.dist=function(e,t){return e.dist(t)};n.Vector.lerp=function(e,t,r,n){if(!n){n=e.copy()}else{n.set(e)}n.lerp(t,r);return n};n.Vector.angleBetween=function(e,t){var r=Math.acos(e.dot(t)/(e.mag()*t.mag()));if(this.p5){if(this.p5._angleMode===o.DEGREES){r=i.radiansToDegrees(r)}}return r};t.exports=n.Vector},{"../core/constants":47,"../core/core":48,"./polargeometry":77}],77:[function(e,t,r){t.exports={degreesToRadians:function(e){return 2*Math.PI*e/360},radiansToDegrees:function(e){return 360*e/(2*Math.PI)}}},{}],78:[function(e,t,r){"use strict";var n=e("../core/core");var i=false;var o=function(){var e=4294967296,t=1664525,r=1013904223,n,i;return{setSeed:function(t){i=n=(t==null?Math.random()*e:t)>>>0},getSeed:function(){return n},rand:function(){i=(t*i+r)%e;return i/e}}}();n.prototype.randomSeed=function(e){o.setSeed(e);i=true};n.prototype.random=function(e,t){var r;if(i){r=o.rand()}else{r=Math.random()}if(arguments.length===0){return r}else if(arguments.length===1){return r*e}else{if(e>t){var n=e;e=t;t=n}return r*(t-e)+e}};var a;var s=false;n.prototype.randomGaussian=function(e,t){var r,n,i,o;if(s){r=a;s=false}else{do{n=this.random(2)-1;i=this.random(2)-1;o=n*n+i*i}while(o>=1);o=Math.sqrt(-2*Math.log(o)/o);r=n*o;a=i*o;s=true}var l=e||0;var u=t||1;return r*u+l};t.exports=n},{"../core/core":48}],79:[function(e,t,r){"use strict";var n=e("../core/core");var i=e("./polargeometry");var o=e("../core/constants");n.prototype._angleMode=o.RADIANS;n.prototype.acos=function(e){if(this._angleMode===o.RADIANS){return Math.acos(e)}else{return i.radiansToDegrees(Math.acos(e))}};n.prototype.asin=function(e){if(this._angleMode===o.RADIANS){return Math.asin(e)}else{return i.radiansToDegrees(Math.asin(e))}};n.prototype.atan=function(e){if(this._angleMode===o.RADIANS){return Math.atan(e)}else{return i.radiansToDegrees(Math.atan(e))}};n.prototype.atan2=function(e,t){if(this._angleMode===o.RADIANS){return Math.atan2(e,t)}else{return i.radiansToDegrees(Math.atan2(e,t))}};n.prototype.cos=function(e){if(this._angleMode===o.RADIANS){return Math.cos(e)}else{return Math.cos(this.radians(e))}};n.prototype.sin=function(e){if(this._angleMode===o.RADIANS){return Math.sin(e)}else{return Math.sin(this.radians(e))}};n.prototype.tan=function(e){if(this._angleMode===o.RADIANS){return Math.tan(e)}else{return Math.tan(this.radians(e))}};n.prototype.degrees=function(e){return i.radiansToDegrees(e)};n.prototype.radians=function(e){return i.degreesToRadians(e)};n.prototype.angleMode=function(e){if(e===o.DEGREES||e===o.RADIANS){this._angleMode=e}};t.exports=n},{"../core/constants":47,"../core/core":48,"./polargeometry":77}],80:[function(e,t,r){"use strict";var n=e("../core/core");n.prototype.textAlign=function(e,t){return this._renderer.textAlign.apply(this._renderer,arguments)};n.prototype.textLeading=function(e){return this._renderer.textLeading.apply(this._renderer,arguments)};n.prototype.textSize=function(e){return this._renderer.textSize.apply(this._renderer,arguments)};n.prototype.textStyle=function(e){return this._renderer.textStyle.apply(this._renderer,arguments)};n.prototype.textWidth=function(e){return this._renderer.textWidth.apply(this._renderer,arguments)};n.prototype.textAscent=function(){return this._renderer.textAscent()};n.prototype.textDescent=function(){return this._renderer.textDescent()};n.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()};t.exports=n},{"../core/core":48}],81:[function(e,t,r){"use strict";var n=e("../core/core");var i=e("../core/constants");e("../core/error_helpers");n.prototype.text=function(e,t,r,n,i){var o=new Array(arguments.length);for(var a=0;a<o.length;++a){o[a]=arguments[a]}this._validateParameters("text",o,[["*","Number","Number"],["*","Number","Number","Number","Number"]]);return!(this._renderer._doFill||this._renderer._doStroke)?this:this._renderer.text.apply(this._renderer,arguments)};n.prototype.textFont=function(e,t){if(arguments.length){if(!e){throw Error("null font passed to textFont")}this._renderer._setProperty("_textFont",e);if(t){this._renderer._setProperty("_textSize",t);this._renderer._setProperty("_textLeading",t*i._DEFAULT_LEADMULT)}return this._renderer._applyTextProperties()}return this};t.exports=n},{"../core/constants":47,"../core/core":48,"../core/error_helpers":51}],82:[function(e,t,r){"use strict";var n=e("../core/core");var i=e("../core/constants");n.Font=function(e){this.parent=e;this.cache={};this.font=undefined};n.Font.prototype.list=function(){throw"not yet implemented"};n.Font.prototype.textBounds=function(e,t,r,n,i){t=t!==undefined?t:0;r=r!==undefined?r:0;n=n||this.parent._renderer._textSize;var o=this.cache[T("textBounds",e,t,r,n)];if(!o){var a=[],s=[],l=this,u=this._scale(n),h,f,c,p;this.font.forEachGlyph(e,t,r,n,i,function(e,t,r,i){a.push(t);s.push(r);var o=e.getMetrics();if(e.name!=="space"){a.push(t+o.xMax*u);s.push(r+-o.yMin*u);s.push(r+-o.yMax*u)}else{a.push(t+l.font.charToGlyph(" ").advanceWidth*l._scale(n))}});h=Math.max(0,Math.min.apply(null,a));f=Math.max(0,Math.min.apply(null,s));c=Math.max(0,Math.max.apply(null,a));p=Math.max(0,Math.max.apply(null,s));o={x:h,y:f,h:p-f,w:c-h,advance:h-t};this.cache[T("textBounds",e,t,r,n)]=o}return o};n.Font.prototype.textToPoints=function(e,t,r,n,i){var a=0,l=[],u=this._getGlyphs(e);n=n||this.parent._renderer._textSize;for(var h=0;h<u.length;h++){var f=u[h].getPath(t,r,n),c=s(f.commands);for(var p=0;p<c.length;p++){var d=o(c[p],i);for(var m=0;m<d.length;m++){d[m].x+=a;l.push(d[m])}}a+=u[h].advanceWidth*this._scale(n)}return l};n.Font.prototype._getGlyphs=function(e){return this.font.stringToGlyphs(e)};n.Font.prototype._getPath=function(e,t,r,n){var i=this.parent,o=i._renderer.drawingContext,a=this._handleAlignment(i,o,e,t,r);return this.font.getPath(e,a.x,a.y,i._renderer._textSize,n)};n.Font.prototype._getPathData=function(e,t,r,n){var i=3;if(typeof e==="string"&&arguments.length>2){e=this._getPath(e,t,r,n)}else if(typeof t==="object"){n=t}if(n&&typeof n.decimals==="number"){i=n.decimals}return e.toPathData(i)};n.Font.prototype._getSVG=function(e,t,r,n){var i=3;if(typeof e==="string"&&arguments.length>2){e=this._getPath(e,t,r,n)}else if(typeof t==="object"){n=t}if(n){if(typeof n.decimals==="number"){i=n.decimals}if(typeof n.strokeWidth==="number"){e.strokeWidth=n.strokeWidth}if(typeof n.fill!=="undefined"){e.fill=n.fill}if(typeof n.stroke!=="undefined"){e.stroke=n.stroke}}return e.toSVG(i)};n.Font.prototype._renderPath=function(e,t,r,n){var o,a=n&&n.renderer||this.parent._renderer,s=a.drawingContext;if(typeof e==="object"&&e.commands){o=e.commands}else{o=this._getPath(e,t,r,a._textSize,n).commands}s.beginPath();for(var l=0;l<o.length;l+=1){var u=o[l];if(u.type==="M"){s.moveTo(u.x,u.y)}else if(u.type==="L"){s.lineTo(u.x,u.y)}else if(u.type==="C"){s.bezierCurveTo(u.x1,u.y1,u.x2,u.y2,u.x,u.y)}else if(u.type==="Q"){s.quadraticCurveTo(u.x1,u.y1,u.x,u.y)}else if(u.type==="Z"){s.closePath()}}if(a._doStroke&&a._strokeSet){s.stroke()}if(a._doFill){s.fillStyle=a._fillSet?s.fillStyle:i._DEFAULT_TEXT_FILL;s.fill()}return this};n.Font.prototype._textWidth=function(e,t){if(e===" "){return this.font.charToGlyph(" ").advanceWidth*this._scale(t)}var r=this.textBounds(e,0,0,t);return r.w+r.advance};n.Font.prototype._textAscent=function(e){return this.font.ascender*this._scale(e)};n.Font.prototype._textDescent=function(e){return-this.font.descender*this._scale(e)};n.Font.prototype._scale=function(e){return 1/this.font.unitsPerEm*(e||this.parent._renderer._textSize)};n.Font.prototype._handleAlignment=function(e,t,r,n,o){var a=this._textWidth(r),s=this._textAscent(),l=this._textDescent(),u=s+l;if(t.textAlign===i.CENTER){n-=a/2}else if(t.textAlign===i.RIGHT){n-=a}if(t.textBaseline===i.TOP){o+=u}else if(t.textBaseline===i._CTX_MIDDLE){o+=u/2-l}else if(t.textBaseline===i.BOTTOM){o-=l}return{x:n,y:o}};function o(e,t){var r=u(t,{sampleFactor:.1,simplifyThreshold:0});var n=m(e,0,1),i=n/(n*r.sampleFactor),o=[];for(var s=0;s<n;s+=i){o.push(m(e,s))}if(r.simplifyThreshold){a(o,r.simplifyThreshold)}return o}function a(e,t){t=typeof t==="undefined"?0:t;var r=0;for(var n=e.length-1;e.length>3&&n>=0;--n){if(f(h(e,n-1),h(e,n),h(e,n+1),t)){e.splice(n%e.length,1);r++}}return r}function s(e){var t=[],r;for(var n=0;n<e.length;n++){if(e[n].type==="M"){if(r){t.push(r)}r=[]}r.push(l(e[n]))}t.push(r);return t}function l(e){var t=[e.type];if(e.type==="M"||e.type==="L"){t.push(e.x,e.y)}else if(e.type==="C"){t.push(e.x1,e.y1,e.x2,e.y2,e.x,e.y)}else if(e.type==="Q"){t.push(e.x1,e.y1,e.x,e.y)}return t}function u(e,t){if(typeof e!=="object"){e=t}else{for(var r in t){if(typeof e[r]==="undefined"){e[r]=t[r]}}}return e}function h(e,t){var r=e.length;return e[t<0?t%r+r:t%r]}function f(e,t,r,n){if(!n){return c(e,t,r)===0}if(typeof f.tmpPoint1==="undefined"){f.tmpPoint1=[];f.tmpPoint2=[]}var i=f.tmpPoint1,o=f.tmpPoint2;i.x=t.x-e.x;i.y=t.y-e.y;o.x=r.x-t.x;o.y=r.y-t.y;var a=i.x*o.x+i.y*o.y,s=Math.sqrt(i.x*i.x+i.y*i.y),l=Math.sqrt(o.x*o.x+o.y*o.y),u=Math.acos(a/(s*l));return u<n}function c(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(t[1]-e[1])}function p(e,t,r,n,i,o,a,s,l){var u=1-l,h=Math.pow(u,3),f=Math.pow(u,2),c=l*l,p=c*l,d=h*e+f*3*l*r+u*3*l*l*i+p*a,m=h*t+f*3*l*n+u*3*l*l*o+p*s,g=e+2*l*(r-e)+c*(i-2*r+e),v=t+2*l*(n-t)+c*(o-2*n+t),y=r+2*l*(i-r)+c*(a-2*i+r),_=n+2*l*(o-n)+c*(s-2*o+n),b=u*e+l*r,x=u*t+l*n,w=u*i+l*a,S=u*o+l*s,C=90-Math.atan2(g-y,v-_)*180/Math.PI;if(g>y||v<_){C+=180}return{x:d,y:m,m:{x:g,y:v},n:{x:y,y:_},start:{x:b,y:x},end:{x:w,y:S},alpha:C}}function d(e,t,r,n,i,o,a,s,l){return l==null?w(e,t,r,n,i,o,a,s):p(e,t,r,n,i,o,a,s,S(e,t,r,n,i,o,a,s,l))}function m(e,t,r){e=v(e);var n,i,o,a,s="",l={},u,h=0;for(var f=0,c=e.length;f<c;f++){o=e[f];if(o[0]==="M"){n=+o[1];i=+o[2]}else{a=d(n,i,o[1],o[2],o[3],o[4],o[5],o[6]);if(h+a>t){if(!r){u=d(n,i,o[1],o[2],o[3],o[4],o[5],o[6],t-h);return{x:u.x,y:u.y,alpha:u.alpha}}}h+=a;n=+o[5];i=+o[6]}s+=o.shift()+o}l.end=s;u=r?h:p(n,i,o[0],o[1],o[2],o[3],o[4],o[5],1);if(u.alpha){u={x:u.x,y:u.y,alpha:u.alpha}}return u}function g(e){var t=[],r=0,n=0,i=0,o=0,a=0;if(e[0][0]==="M"){r=+e[0][1];n=+e[0][2];i=r;o=n;a++;t[0]=["M",r,n]}var s,l=e.length===3&&e[0][0]==="M"&&e[1][0].toUpperCase()==="R"&&e[2][0].toUpperCase()==="Z";for(var u,h,f=a,c=e.length;f<c;f++){t.push(u=[]);h=e[f];if(h[0]!==String.prototype.toUpperCase.call(h[0])){u[0]=String.prototype.toUpperCase.call(h[0]);switch(u[0]){case"A":u[1]=h[1];u[2]=h[2];u[3]=h[3];u[4]=h[4];u[5]=h[5];u[6]=+(h[6]+r);u[7]=+(h[7]+n);break;case"V":u[1]=+h[1]+n;break;case"H":u[1]=+h[1]+r;break;case"R":s=[r,n].concat(h.slice(1));for(var p=2,d=s.length;p<d;p++){s[p]=+s[p]+r;s[++p]=+s[p]+n}t.pop();t=t.concat(_(s,l));break;case"M":i=+h[1]+r;o=+h[2]+n;break;default:for(p=1,d=h.length;p<d;p++){u[p]=+h[p]+(p%2?r:n)}}}else if(h[0]==="R"){s=[r,n].concat(h.slice(1));t.pop();t=t.concat(_(s,l));u=["R"].concat(h.slice(-2))}else{for(var m=0,g=h.length;m<g;m++){u[m]=h[m]}}switch(u[0]){case"Z":r=i;n=o;break;case"H":r=u[1];break;case"V":n=u[1];break;case"M":i=u[u.length-2];o=u[u.length-1];break;default:r=u[u.length-2];n=u[u.length-1]}}return t}function v(e,t){var r=g(e),n=t&&g(t),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a=function(e,t,r){var n,i,o={T:1,Q:1};if(!e){return["C",t.x,t.y,t.x,t.y,t.x,t.y]}if(!(e[0]in o)){t.qx=t.qy=null}switch(e[0]){case"M":t.X=e[1];t.Y=e[2];break;case"A":e=["C"].concat(y.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":if(r==="C"||r==="S"){n=t.x*2-t.bx;i=t.y*2-t.by}else{n=t.x;i=t.y}e=["C",n,i].concat(e.slice(1));break;case"T":if(r==="Q"||r==="T"){t.qx=t.x*2-t.qx;t.qy=t.y*2-t.qy}else{t.qx=t.x;t.qy=t.y}e=["C"].concat(x(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1];t.qy=e[2];e=["C"].concat(x(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(b(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(b(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(b(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(b(t.x,t.y,t.X,t.Y));break}return e},s=function(e,t){if(e[t].length>7){e[t].shift();var i=e[t];while(i.length){u[t]="A";if(n){h[t]="A"}e.splice(t++,0,["C"].concat(i.splice(0,6)))}e.splice(t,1);d=Math.max(r.length,n&&n.length||0)}},l=function(e,t,i,o,a){if(e&&t&&e[a][0]==="M"&&t[a][0]!=="M"){t.splice(a,0,["M",o.x,o.y]);i.bx=0;i.by=0;i.x=e[a][1];i.y=e[a][2];d=Math.max(r.length,n&&n.length||0)}},u=[],h=[],f="",c="";for(var p=0,d=Math.max(r.length,n&&n.length||0);p<d;p++){if(r[p]){f=r[p][0]}if(f!=="C"){u[p]=f;if(p){c=u[p-1]}}r[p]=a(r[p],i,c);if(u[p]!=="A"&&f==="C"){u[p]="C"}s(r,p);if(n){if(n[p]){f=n[p][0]}if(f!=="C"){h[p]=f;if(p){c=h[p-1]}}n[p]=a(n[p],o,c);if(h[p]!=="A"&&f==="C"){h[p]="C"}s(n,p)}l(r,n,i,o,p);l(n,r,o,i,p);var m=r[p],v=n&&n[p],_=m.length,w=n&&v.length;i.x=m[_-2];i.y=m[_-1];i.bx=parseFloat(m[_-4])||i.x;i.by=parseFloat(m[_-3])||i.y;o.bx=n&&(parseFloat(v[w-4])||o.x);o.by=n&&(parseFloat(v[w-3])||o.y);o.x=n&&v[w-2];o.y=n&&v[w-1]}return n?[r,n]:r}function y(e,t,r,n,i,o,a,s,l,u){var h=Math.PI,f=h*120/180,c,p,d,m,g=h/180*(+i||0),v=[],_,b=function(e,t,r){var n=e*Math.cos(r)-t*Math.sin(r),i=e*Math.sin(r)+t*Math.cos(r);return{x:n,y:i}};if(!u){_=b(e,t,-g);e=_.x;t=_.y;_=b(s,l,-g);s=_.x;l=_.y;var x=(e-s)/2,w=(t-l)/2,S=x*x/(r*r)+w*w/(n*n);if(S>1){S=Math.sqrt(S);r=S*r;n=S*n}var C=r*r,T=n*n,E=(o===a?-1:1)*Math.sqrt(Math.abs((C*T-C*w*w-T*x*x)/(C*w*w+T*x*x)));d=E*r*w/n+(e+s)/2;m=E*-n*x/r+(t+l)/2;c=Math.asin(((t-m)/n).toFixed(9));p=Math.asin(((l-m)/n).toFixed(9));c=e<d?h-c:c;p=s<d?h-p:p;if(c<0){c=h*2+c}if(p<0){p=h*2+p}if(a&&c>p){c=c-h*2}if(!a&&p>c){p=p-h*2}}else{c=u[0];p=u[1];d=u[2];m=u[3]}var R=p-c;if(Math.abs(R)>f){var A=p,M=s,N=l;p=c+f*(a&&p>c?1:-1);s=d+r*Math.cos(p);l=m+n*Math.sin(p);v=y(s,l,r,n,i,0,a,M,N,[p,A,d,m])}R=p-c;var D=Math.cos(c),k=Math.sin(c),I=Math.cos(p),P=Math.sin(p),O=Math.tan(R/4),L=4/3*r*O,U=4/3*n*O,F=[e,t],B=[e+L*k,t-U*D],H=[s+L*P,l-U*I],G=[s,l];B[0]=2*F[0]-B[0];B[1]=2*F[1]-B[1];if(u){return[B,H,G].concat(v)}else{v=[B,H,G].concat(v).join().split(",");var j=[];for(var V=0,q=v.length;V<q;V++){j[V]=V%2?b(v[V-1],v[V],g).y:b(v[V],v[V+1],g).x}return j}}function _(e,t){var r=[];for(var n=0,i=e.length;i-2*!t>n;n+=2){var o=[{x:+e[n-2],y:+e[n-1]},{x:+e[n],y:+e[n+1]},{x:+e[n+2],y:+e[n+3]},{x:+e[n+4],y:+e[n+5]}];if(t){if(!n){o[0]={x:+e[i-2],y:+e[i-1]}}else if(i-4===n){o[3]={x:+e[0],y:+e[1]}}else if(i-2===n){o[2]={x:+e[0],y:+e[1]};o[3]={x:+e[2],y:+e[3]}}}else{if(i-4===n){o[3]=o[2]}else if(!n){o[0]={x:+e[n],y:+e[n+1]}}}r.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return r}function b(e,t,r,n){return[e,t,r,n,r,n]}function x(e,t,r,n,i,o){var a=1/3,s=2/3;return[a*e+s*r,a*t+s*n,a*i+s*r,a*o+s*n,i,o]}function w(e,t,r,n,i,o,a,s,l){if(l==null){l=1}l=l>1?1:l<0?0:l;var u=l/2,h=12,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],c=0,p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472];for(var d=0;d<h;d++){var m=u*f[d]+u,g=C(m,e,r,i,a),v=C(m,t,n,o,s),y=g*g+v*v;c+=p[d]*Math.sqrt(y)}return u*c}function S(e,t,r,n,i,o,a,s,l){if(l<0||w(e,t,r,n,i,o,a,s)<l){return}var u=1,h=u/2,f=u-h,c,p=.01;c=w(e,t,r,n,i,o,a,s,f);while(Math.abs(c-l)>p){h/=2;f+=(c<l?1:-1)*h;c=w(e,t,r,n,i,o,a,s,f)}return f}function C(e,t,r,n,i){var o=-3*t+9*r-9*n+3*i,a=e*o+6*t-12*r+6*n;return e*a-3*t+3*r}function T(){var e=new Array(arguments.length);for(var t=0;t<e.length;++t){e[t]=arguments[t]}t=e.length;var r="";while(t--){r+=e[t]===Object(e[t])?JSON.stringify(e[t]):e[t]}return r}t.exports=n.Font},{"../core/constants":47,"../core/core":48}],83:[function(e,t,r){"use strict";var n=e("../core/core");n.prototype.append=function(e,t){e.push(t);return e};n.prototype.arrayCopy=function(e,t,r,n,i){var o,a;if(typeof i!=="undefined"){a=Math.min(i,e.length);o=n;e=e.slice(t,a+t)}else{if(typeof r!=="undefined"){a=r;a=Math.min(a,e.length)}else{a=e.length}o=0;r=t;e=e.slice(0,a)}Array.prototype.splice.apply(r,[o,a].concat(e))};n.prototype.concat=function(e,t){return e.concat(t)};n.prototype.reverse=function(e){return e.reverse()};n.prototype.shorten=function(e){e.pop();return e};n.prototype.shuffle=function(e,t){var r=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e);e=t||r?e:e.slice();var n,i,o=e.length;while(o>1){n=Math.random()*o|0;i=e[--o];e[o]=e[n];e[n]=i}return e};n.prototype.sort=function(e,t){var r=t?e.slice(0,Math.min(t,e.length)):e;var n=t?e.slice(Math.min(t,e.length)):[];if(typeof r[0]==="string"){r=r.sort()}else{r=r.sort(function(e,t){return e-t})}return r.concat(n)};n.prototype.splice=function(e,t,r){Array.prototype.splice.apply(e,[r,0].concat(t));return e};n.prototype.subset=function(e,t,r){if(typeof r!=="undefined"){return e.slice(t,t+r)}else{return e.slice(t,e.length)}};t.exports=n},{"../core/core":48}],84:[function(e,t,r){"use strict";var n=e("../core/core");n.prototype.float=function(e){return parseFloat(e)};n.prototype.int=function(e,t){if(typeof e==="string"){t=t||10;return parseInt(e,t)}else if(typeof e==="number"){return e|0}else if(typeof e==="boolean"){return e?1:0}else if(e instanceof Array){return e.map(function(e){return n.prototype.int(e,t)})}};n.prototype.str=function(e){if(e instanceof Array){return e.map(n.prototype.str)}else{return String(e)}};n.prototype.boolean=function(e){if(typeof e==="number"){return e!==0}else if(typeof e==="string"){return e.toLowerCase()==="true"}else if(typeof e==="boolean"){return e}else if(e instanceof Array){return e.map(n.prototype.boolean)}};n.prototype.byte=function(e){var t=n.prototype.int(e,10);if(typeof t==="number"){return(t+128)%256-128}else if(t instanceof Array){return t.map(n.prototype.byte)}};n.prototype.char=function(e){if(typeof e==="number"&&!isNaN(e)){return String.fromCharCode(e)}else if(e instanceof Array){return e.map(n.prototype.char)}else if(typeof e==="string"){return n.prototype.char(parseInt(e,10))}};n.prototype.unchar=function(e){if(typeof e==="string"&&e.length===1){return e.charCodeAt(0)}else if(e instanceof Array){return e.map(n.prototype.unchar)}};n.prototype.hex=function(e,t){t=t===undefined||t===null?t=8:t;if(e instanceof Array){return e.map(function(e){return n.prototype.hex(e,t)})}else if(typeof e==="number"){if(e<0){e=4294967295+e+1}var r=Number(e).toString(16).toUpperCase();while(r.length<t){r="0"+r}if(r.length>=t){r=r.substring(r.length-t,r.length)}return r}};n.prototype.unhex=function(e){if(e instanceof Array){return e.map(n.prototype.unhex)}else{return parseInt("0x"+e,16)}};t.exports=n},{"../core/core":48}],85:[function(e,t,r){"use strict";var n=e("../core/core");n.prototype.join=function(e,t){return e.join(t)};n.prototype.match=function(e,t){return e.match(t)};n.prototype.matchAll=function(e,t){var r=new RegExp(t,"g");var n=r.exec(e);var i=[];while(n!==null){i.push(n);n=r.exec(e)}return i};n.prototype.nf=function(){if(arguments[0]instanceof Array){var e=arguments[1];var t=arguments[2];return arguments[0].map(function(r){return i(r,e,t)})}else{var r=Object.prototype.toString.call(arguments[0]);if(r==="[object Arguments]"){if(arguments[0].length===3){return this.nf(arguments[0][0],arguments[0][1],arguments[0][2])}else if(arguments[0].length===2){return this.nf(arguments[0][0],arguments[0][1])}else{return this.nf(arguments[0][0])}}else{return i.apply(this,arguments)}}};function i(){var e=arguments[0];var t=e<0;var r=t?e.toString().substring(1):e.toString();var n=r.indexOf(".");var i=n!==-1?r.substring(0,n):r;var o=n!==-1?r.substring(n+1):"";var a=t?"-":"";if(arguments.length===3){var s="";if(n!==-1||arguments[2]-o.length>0){s="."}if(o.length>arguments[2]){o=o.substring(0,arguments[2])}for(var l=0;l<arguments[1]-i.length;l++){a+="0"}a+=i;a+=s;a+=o;for(var u=0;u<arguments[2]-o.length;u++){a+="0"}return a}else{for(var h=0;h<Math.max(arguments[1]-i.length,0);h++){a+="0"}a+=r;return a}}n.prototype.nfc=function(){if(arguments[0]instanceof Array){var e=arguments[1];return arguments[0].map(function(t){return o(t,e)})}else{return o.apply(this,arguments)}};function o(){var e=arguments[0].toString();var t=e.indexOf(".");var r=t!==-1?e.substring(t):"";var n=t!==-1?e.substring(0,t):e;n=n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(arguments[1]===0){r=""}else if(arguments[1]!==undefined){if(arguments[1]>r.length){r+=t===-1?".":"";var i=arguments[1]-r.length+1;for(var o=0;o<i;o++){r+="0"}}else{r=r.substring(0,arguments[1]+1)}}return n+r}n.prototype.nfp=function(){var e=this.nf.apply(this,arguments);if(e instanceof Array){return e.map(a)}else{return a(e)}};function a(){return parseFloat(arguments[0])>0?"+"+arguments[0].toString():arguments[0].toString()}n.prototype.nfs=function(){var e=this.nf.apply(this,arguments);if(e instanceof Array){return e.map(s)}else{return s(e)}};function s(){return parseFloat(arguments[0])>0?" "+arguments[0].toString():arguments[0].toString()}n.prototype.split=function(e,t){return e.split(t)};n.prototype.splitTokens=function(){var e,t,r,n;n=arguments[1];if(arguments.length>1){r=/\]/g.exec(n);t=/\[/g.exec(n);if(t&&r){n=n.slice(0,r.index)+n.slice(r.index+1);t=/\[/g.exec(n);n=n.slice(0,t.index)+n.slice(t.index+1);e=new RegExp("[\\["+n+"\\]]","g")}else if(r){n=n.slice(0,r.index)+n.slice(r.index+1);e=new RegExp("["+n+"\\]]","g")}else if(t){n=n.slice(0,t.index)+n.slice(t.index+1);e=new RegExp("["+n+"\\[]","g")}else{e=new RegExp("["+n+"]","g")}}else{e=/\s/g}return arguments[0].split(e).filter(function(e){return e})};n.prototype.trim=function(e){if(e instanceof Array){return e.map(this.trim)}else{return e.trim()}};t.exports=n},{"../core/core":48}],86:[function(e,t,r){"use strict";var n=e("../core/core");n.prototype.day=function(){return(new Date).getDate()};n.prototype.hour=function(){return(new Date).getHours()};n.prototype.minute=function(){return(new Date).getMinutes()};n.prototype.millis=function(){return window.performance.now()};n.prototype.month=function(){return(new Date).getMonth()+1};n.prototype.second=function(){return(new Date).getSeconds()};n.prototype.year=function(){return(new Date).getFullYear()};t.exports=n},{"../core/core":48}]},{},[39])(39)})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],25:[function(e,t,r){t.exports=function o(e){var t=[],r,i,o,a,s;var l=e.querySelector("haarcascade_frontalface_default");var u=l.querySelector("size").innerHTML.split(" ").map(function(e){return parseInt(e)});var h=l.querySelector("stages").children;for(r=0;r<h.length;r++){var f=h[r].querySelector("trees").children;a=[];for(i=0;i<f.length;i++){var c=f[i].children;s=[];for(o=0;o<c.length;o++){var p=n(c[o]);s.push(p)}a.push(s)}t.push(a)}return{sampleSize:u,stages:t}};function n(e){var t=["left_val","right_val","left_node","right_node"];var r={rects:i(e.querySelector("rects")),tilted:!!e.querySelector("tilted").innerHTML,threshold:parseFloat(e.querySelector("threshold").innerHTML)};t.forEach(function(t){var n=e.querySelector(t);if(n){r[t]=parseFloat(n.innerHTML)}});return r}function i(e){var t=[],r;for(r=0;r<e.children.length;r++){t.push(e.children[r].innerHTML.split(" ").map(function(e){return parseInt(e)}))}return t}},{}]},{},[1]);